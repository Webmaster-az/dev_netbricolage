cssNamespace.pkportal.teaserAnimations=function(e,t){var a={color:{background:"#00a7e0",foreground:"#092768",red:"#cb1c81",white:"#fff",border:"#e6e6e6"},font:{description:{family:"Arial",color:"#5b5b5b",size:"12"},text:{family:"Museo700, Arial",color:"#ccc",size:"12"},title:{family:"Museo700, Arial",color:"#5b5b5b",size:"26"}}};t.init(a)}(jQuery,cssNamespace.pkportal.teaserAnimationsShared),cssNamespace.pkportal.footer=function(e,t,a,o){"use strict";function n(e){g=e,o.initFooter(p),r(),c()}function r(){var e={url:g.agencyUrl,success:i};a.doPost(e)}function c(){var e={url:g.servicelineUrl,success:s};a.doPost(e)}function i(t){if(null!==t){var a=e(".footerMenu.agencyFinderMenu a").attr("href"),o=a.substring(0,a.lastIndexOf("/"));if(t.contactSalesPerson.pathToFoto=[o,t.contactSalesPerson.pathToFoto].join("/"),!a.endsWith(t.contactSalesPerson.pathToFoto)){var n="jcr:content/renditions/cq5dam.web.110.146.jpeg";t.contactSalesPerson.pathToFoto=[t.contactSalesPerson.pathToFoto,n].join("/")}e(".footerMenu.agencyFinderMenu").loadTemplate(e("#agencyFinderTemplate"),t,{afterInsert:f}),t.contactSalesPerson.phone||e(".footerMenu.agencyFinderMenu .contactInfo .telefon").hide(),t.contactSalesPerson.email||e(".footerMenu.agencyFinderMenu .contactInfo .email").hide();var r=e(".agencyFinderMenu .email a");r.attr("href","mailto:"+r.attr("href")),e("#footer .footerMapWrapper .footerMap").attr({"data-coordinate-x":parseFloat(t.lat),"data-coordinate-y":parseFloat(t.lon),"data-agency-name":t.name})}}function s(t){if(null!==t){var a="#footer .footerMenu.serviceLineMenu";e(a+" .title").text(t.servicelineTitle),e(a+" .phoneNumber").first().text(t.servicelineNumber),e(".footerButton span.serviceLine").next("span.text").text(t.serviceline)}}function p(t,a){t.shadowSpace=7,t.$map=e(".footerMap",t.$clonedMarkup),t.$mapWrapper=e(".footerMapWrapper",t.$clonedMarkup),t.$googleMaps=e(".footerMap .googleMaps",t.$clonedMarkup),t.$textLink=e(".footerMenu.agencyFinderMenu .map a",t.$clonedMarkup),t.agencyFinderIsOpened=t.$clickedButton.has(".footerMenu.agencyFinderMenu"),t.agencyFinderIsOpened&&(t.$mapWrapper.one("click",function(o){e(o.target).is(t.$mapWrapper)&&a()}),u(t)),e.blockUI({bindEvents:!1,message:t.$clonedMarkup,centerX:!1,centerY:!1,css:{padding:0,margin:0,width:"auto",top:"auto",bottom:0,left:t.$clickedButton.offset().left-1,textAlign:"inherit",color:"inherit",border:"none",backgroundColor:"#fff",cursor:"auto"},overlayCSS:{cursor:"default",opacity:.4},onBlock:function(){e(".blockUI.blockOverlay").one("click",a),t.agencyFinderIsOpened&&l(t)}})}function l(t){t.$googleMaps.attr("id","footerGoogleMaps");var a=e(".footerMenu.agencyFinderMenu",t.$clonedMarkup).outerHeight();t.$mapWrapper.height(a+2*t.shadowSpace+"px"),t.$map.height(a-2+"px")}function u(e){e.$textLink.one("click",function(a){t.loadScript("cssNamespace.pkportal.footer.googleApiLoadedCallback",g.googleMapsUrl),setTimeout(function(){var a=parseFloat(e.$map.data("coordinate-x")),o=parseFloat(e.$map.data("coordinate-y")),n=e.$map.data("agency-name");t.createDefaultMapWithCenteredMarker("footerGoogleMaps",a,o,n)},300)}),e.$textLink.click(function(t){var a=e.$textLink.parent().data("show-map"),o=e.$textLink.parent().data("hide-map"),n=0,r=e.$map.outerWidth()+e.shadowSpace,c=e.shadowSpace;parseInt(e.$map.css("left"),10)===r?(n=c,e.$textLink.text(o)):(n=r,e.$textLink.text(a)),e.$map.stop().animate({left:n},{duration:300}),t.preventDefault()})}function d(){}function f(){e(".set-bg-img").each(function(){var t=e(this).attr("src");e(this).css("background-image","url('"+t+"')").removeAttr("src")})}var g={googleMapsUrl:"",agencyUrl:"",servicelineUrl:""};return{init:n,googleApiLoadedCallback:d}}(jQuery,cssNamespace.pkportal.googleMaps,cssNamespace.pkportal.utils,cssNamespace.pkportal.footerShared);
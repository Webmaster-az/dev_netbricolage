!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.noUiSlider=t()}(function(){"use strict";function t(t,e){var n=document.createElement("div");return u(n,e),t.appendChild(n),n}function e(t){return t.filter(function(t){return!this[t]&&(this[t]=!0)},{})}function n(t,e){return Math.round(t/e)*e}function i(t,e){var n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.documentElement,a=f();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),e?n.top+a.y-r.clientTop:n.left+a.x-r.clientLeft}function r(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function a(t,e,n){n>0&&(u(t,e),setTimeout(function(){c(t,e)},n))}function o(t){return Math.max(Math.min(t,100),0)}function s(t){return Array.isArray(t)?t:[t]}function l(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function u(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function c(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function d(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function f(){var t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||""),n=t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft,i=t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop;return{x:n,y:i}}function m(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function p(t,e){return 100/(e-t)}function h(t,e){return 100*e/(t[1]-t[0])}function g(t,e){return h(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}function v(t,e){return e*(t[1]-t[0])/100+t[0]}function _(t,e){for(var n=1;t>=e[n];)n+=1;return n}function b(t,e,n){if(n>=t.slice(-1)[0])return 100;var i,r,a,o,s=_(n,t);return i=t[s-1],r=t[s],a=e[s-1],o=e[s],a+g([i,r],n)/p(a,o)}function N(t,e,n){if(n>=100)return t.slice(-1)[0];var i,r,a,o,s=_(n,e);return i=t[s-1],r=t[s],a=e[s-1],o=e[s],v([i,r],(n-a)*p(a,o))}function E(t,e,i,r){if(100===r)return r;var a,o,s=_(r,t);return i?(a=t[s-1],o=t[s],r-a>(o-a)/2?o:a):e[s-1]?t[s-1]+n(r-t[s-1],e[s-1]):r}function w(t,e,n){var i;if("number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e))throw new Error("noUiSlider: 'range' contains invalid value.");if(i="min"===t?0:"max"===t?100:parseFloat(t),!r(i)||!r(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");n.xPct.push(i),n.xVal.push(e[0]),i?n.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(n.xSteps[0]=e[1]),n.xHighestCompleteStep.push(0)}function S(t,e,n){if(!e)return!0;n.xSteps[t]=h([n.xVal[t],n.xVal[t+1]],e)/p(n.xPct[t],n.xPct[t+1]);var i=(n.xVal[t+1]-n.xVal[t])/n.xNumSteps[t],r=Math.ceil(Number(i.toFixed(3))-1),a=n.xVal[t]+n.xNumSteps[t]*r;n.xHighestCompleteStep[t]=a}function y(t,e,n,i){this.xPct=[],this.xVal=[],this.xSteps=[i||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e,this.direction=n;var r,a=[];for(r in t)t.hasOwnProperty(r)&&a.push([t[r],r]);for(a.length&&"object"==typeof a[0][0]?a.sort(function(t,e){return t[0][0]-e[0][0]}):a.sort(function(t,e){return t[0]-e[0]}),r=0;r<a.length;r++)w(a[r][1],a[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)S(r,this.xNumSteps[r],this)}function C(t,e){if(!r(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function x(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.");t.spectrum=new y(e,t.snap,t.dir,t.singleStep)}function T(t,e){if(e=s(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function I(t,e){if(t.snap=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function A(t,e){if(t.animate=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function k(t,e){if(t.animationDuration=e,"number"!=typeof e)throw new Error("noUiSlider: 'animationDuration' option must be a number.")}function O(t,e){var n,i=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),e===!0||e===!1){for(n=1;n<t.handles;n++)i.push(e);i.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");i=e}t.connect=i}function U(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function F(t,e){if(!r(e))throw new Error("noUiSlider: 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function M(t,e){if(!r(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function P(t,e){if(!r(e))throw new Error("noUiSlider: 'padding' option must be numeric.");if(0!==e){if(t.padding=t.spectrum.getMargin(e),!t.padding)throw new Error("noUiSlider: 'padding' option is only supported on linear sliders.");if(t.padding<0)throw new Error("noUiSlider: 'padding' option must be a positive number.");if(t.padding>=50)throw new Error("noUiSlider: 'padding' option must be less than half the range.")}}function L(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function R(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,i=e.indexOf("drag")>=0,r=e.indexOf("fixed")>=0,a=e.indexOf("snap")>=0,o=e.indexOf("hover")>=0;if(r){if(2!==t.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");F(t,t.start[1]-t.start[0])}t.events={tap:n||a,drag:i,fixed:r,snap:a,hover:o}}function D(t,e){if(e!==!1)if(e===!0){t.tooltips=[];for(var n=0;n<t.handles;n++)t.tooltips.push(!0)}else{if(t.tooltips=s(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.tooltips.forEach(function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})}}function H(t,e){if(t.format=e,"function"==typeof e.to&&"function"==typeof e.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function V(t,e){if(void 0!==e&&"string"!=typeof e&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function G(t,e){if(void 0!==e&&"object"!=typeof e)throw new Error("noUiSlider: 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix){t.cssClasses={};for(var n in e)e.hasOwnProperty(n)&&(t.cssClasses[n]=t.cssPrefix+e[n])}else t.cssClasses=e}function Y(t,e){if(e!==!0&&e!==!1)throw new Error("noUiSlider: 'useRequestAnimationFrame' option should be true (default) or false.");t.useRequestAnimationFrame=e}function j(t){var e={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,format:q},n={step:{r:!1,t:C},start:{r:!0,t:T},connect:{r:!0,t:O},direction:{r:!0,t:L},snap:{r:!1,t:I},animate:{r:!1,t:A},animationDuration:{r:!1,t:k},range:{r:!0,t:x},orientation:{r:!1,t:U},margin:{r:!1,t:F},limit:{r:!1,t:M},padding:{r:!1,t:P},behaviour:{r:!0,t:R},format:{r:!1,t:H},tooltips:{r:!1,t:D},cssPrefix:{r:!1,t:V},cssClasses:{r:!1,t:G},useRequestAnimationFrame:{r:!1,t:Y}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},useRequestAnimationFrame:!0};Object.keys(n).forEach(function(r){if(void 0===t[r]&&void 0===i[r]){if(n[r].r)throw new Error("noUiSlider: '"+r+"' is required.");return!0}n[r].t(e,void 0===t[r]?i[r]:t[r])}),e.pips=t.pips;var r=[["left","top"],["right","bottom"]];return e.style=r[e.dir][e.ort],e.styleOposite=r[e.dir?0:1][e.ort],e}function B(n,r,l){function p(e,n){var i=t(e,r.cssClasses.origin),a=t(i,r.cssClasses.handle);return a.setAttribute("data-handle",n),0===n?u(a,r.cssClasses.handleLower):n===r.handles-1&&u(a,r.cssClasses.handleUpper),i}function h(e,n){return!!n&&t(e,r.cssClasses.connect)}function g(t,e){et=[],nt=[],nt.push(h(e,t[0]));for(var n=0;n<r.handles;n++)et.push(p(e,n)),st[n]=n,nt.push(h(e,t[n+1]))}function v(e){u(e,r.cssClasses.target),0===r.dir?u(e,r.cssClasses.ltr):u(e,r.cssClasses.rtl),0===r.ort?u(e,r.cssClasses.horizontal):u(e,r.cssClasses.vertical),tt=t(e,r.cssClasses.base)}function _(e,n){return!!r.tooltips[n]&&t(e.firstChild,r.cssClasses.tooltip)}function b(){var t=et.map(_);Q("update",function(e,n,i){if(t[n]){var a=e[n];r.tooltips[n]!==!0&&(a=r.tooltips[n].to(i[n])),t[n].innerHTML=a}})}function N(t,e,n){if("range"===t||"steps"===t)return ut.xVal;if("count"===t){var i,r=100/(e-1),a=0;for(e=[];(i=a++*r)<=100;)e.push(i);t="positions"}return"positions"===t?e.map(function(t){return ut.fromStepping(n?ut.getStep(t):t)}):"values"===t?n?e.map(function(t){return ut.fromStepping(ut.getStep(ut.toStepping(t)))}):e:void 0}function E(t,n,i){function r(t,e){return(t+e).toFixed(7)/1}var a={},o=ut.xVal[0],s=ut.xVal[ut.xVal.length-1],l=!1,u=!1,c=0;return i=e(i.slice().sort(function(t,e){return t-e})),i[0]!==o&&(i.unshift(o),l=!0),i[i.length-1]!==s&&(i.push(s),u=!0),i.forEach(function(e,o){var s,d,f,m,p,h,g,v,_,b,N=e,E=i[o+1];if("steps"===n&&(s=ut.xNumSteps[o]),s||(s=E-N),N!==!1&&void 0!==E)for(s=Math.max(s,1e-7),d=N;d<=E;d=r(d,s)){for(m=ut.toStepping(d),p=m-c,v=p/t,_=Math.round(v),b=p/_,f=1;f<=_;f+=1)h=c+f*b,a[h.toFixed(5)]=["x",0];g=i.indexOf(d)>-1?1:"steps"===n?2:0,!o&&l&&(g=0),d===E&&u||(a[m.toFixed(5)]=[d,g]),c=m}}),a}function w(t,e,n){function i(t,e){var n=e===r.cssClasses.value,i=n?f:m,a=n?c:d;return e+" "+i[r.ort]+" "+a[t]}function a(t,e,n){return'class="'+i(n[1],e)+'" style="'+r.style+": "+t+'%"'}function o(t,i){i[1]=i[1]&&e?e(i[0],i[1]):i[1],l+="<div "+a(t,r.cssClasses.marker,i)+"></div>",i[1]&&(l+="<div "+a(t,r.cssClasses.value,i)+">"+n.to(i[0])+"</div>")}var s=document.createElement("div"),l="",c=[r.cssClasses.valueNormal,r.cssClasses.valueLarge,r.cssClasses.valueSub],d=[r.cssClasses.markerNormal,r.cssClasses.markerLarge,r.cssClasses.markerSub],f=[r.cssClasses.valueHorizontal,r.cssClasses.valueVertical],m=[r.cssClasses.markerHorizontal,r.cssClasses.markerVertical];return u(s,r.cssClasses.pips),u(s,0===r.ort?r.cssClasses.pipsHorizontal:r.cssClasses.pipsVertical),Object.keys(t).forEach(function(e){o(e,t[e])}),s.innerHTML=l,s}function S(t){var e=t.mode,n=t.density||1,i=t.filter||!1,r=t.values||!1,a=t.stepped||!1,o=N(e,r,a),s=E(n,e,o),l=t.format||{to:Math.round};return at.appendChild(w(s,i,l))}function y(){var t=tt.getBoundingClientRect(),e="offset"+["Width","Height"][r.ort];return 0===r.ort?t.width||tt[e]:t.height||tt[e]}function C(t,e,n,i){var a=function(e){return!at.hasAttribute("disabled")&&(!d(at,r.cssClasses.tap)&&(!!(e=x(e,i.pageOffset))&&(!(t===rt.start&&void 0!==e.buttons&&e.buttons>1)&&((!i.hover||!e.buttons)&&(e.calcPoint=e.points[r.ort],void n(e,i))))))},o=[];return t.split(" ").forEach(function(t){e.addEventListener(t,a,!1),o.push([t,a])}),o}function x(t,e){t.preventDefault();var n,i,r=0===t.type.indexOf("touch"),a=0===t.type.indexOf("mouse"),o=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(o=!0),r){if(t.touches.length>1)return!1;n=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY}return e=e||f(),(a||o)&&(n=t.clientX+e.x,i=t.clientY+e.y),t.pageOffset=e,t.points=[n,i],t.cursor=a||o,t}function T(t){var e=t-i(tt,r.ort),n=100*e/y();return r.dir?100-n:n}function I(t){var e=100,n=!1;return et.forEach(function(i,r){if(!i.hasAttribute("disabled")){var a=Math.abs(ot[r]-t);a<e&&(n=r,e=a)}}),n}function A(t,e,n,i){var r=n.slice(),a=[!t,t],o=[t,!t];i=i.slice(),t&&i.reverse(),i.length>1?i.forEach(function(t,n){var i=D(r,t,r[t]+e,a[n],o[n]);i===!1?e=0:(e=i-r[t],r[t]=i)}):a=o=[!0];var s=!1;i.forEach(function(t,i){s=Y(t,n[t]+e,a[i],o[i])||s}),s&&i.forEach(function(t){k("update",t),k("slide",t)})}function k(t,e,n){Object.keys(dt).forEach(function(i){var a=i.split(".")[0];t===a&&dt[i].forEach(function(t){t.call(it,ct.map(r.format.to),e,ct.slice(),n||!1,ot.slice())})})}function O(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&F(t,e)}function U(t,e){if(navigator.appVersion.indexOf("MSIE 9")===-1&&0===t.buttons&&0!==e.buttonsProperty)return F(t,e);var n=(r.dir?-1:1)*(t.calcPoint-e.startCalcPoint),i=100*n/e.baseSize;A(n>0,i,e.locations,e.handleNumbers)}function F(t,e){lt&&(c(lt,r.cssClasses.active),lt=!1),t.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener)),document.documentElement.noUiListeners.forEach(function(t){document.documentElement.removeEventListener(t[0],t[1])}),c(at,r.cssClasses.drag),G(),e.handleNumbers.forEach(function(t){k("set",t),k("change",t),k("end",t)})}function M(t,e){if(1===e.handleNumbers.length){var n=et[e.handleNumbers[0]];if(n.hasAttribute("disabled"))return!1;lt=n.children[0],u(lt,r.cssClasses.active)}t.preventDefault(),t.stopPropagation();var i=C(rt.move,document.documentElement,U,{startCalcPoint:t.calcPoint,baseSize:y(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:ot.slice()}),a=C(rt.end,document.documentElement,F,{handleNumbers:e.handleNumbers}),o=C("mouseout",document.documentElement,O,{handleNumbers:e.handleNumbers});if(document.documentElement.noUiListeners=i.concat(a,o),t.cursor){document.body.style.cursor=getComputedStyle(t.target).cursor,et.length>1&&u(at,r.cssClasses.drag);var s=function(){return!1};document.body.noUiListener=s,document.body.addEventListener("selectstart",s,!1)}e.handleNumbers.forEach(function(t){k("start",t)})}function P(t){t.stopPropagation();var e=T(t.calcPoint),n=I(e);return n!==!1&&(r.events.snap||a(at,r.cssClasses.tap,r.animationDuration),Y(n,e,!0,!0),G(),k("slide",n,!0),k("set",n,!0),k("change",n,!0),k("update",n,!0),void(r.events.snap&&M(t,{handleNumbers:[n]})))}function L(t){var e=T(t.calcPoint),n=ut.getStep(e),i=ut.fromStepping(n);Object.keys(dt).forEach(function(t){"hover"===t.split(".")[0]&&dt[t].forEach(function(t){t.call(it,i)})})}function R(t){t.fixed||et.forEach(function(t,e){C(rt.start,t.children[0],M,{handleNumbers:[e]})}),t.tap&&C(rt.start,tt,P,{}),t.hover&&C(rt.move,tt,L,{hover:!0}),t.drag&&nt.forEach(function(e,n){if(e!==!1&&0!==n&&n!==nt.length-1){var i=et[n-1],a=et[n],o=[e];u(e,r.cssClasses.draggable),t.fixed&&(o.push(i.children[0]),o.push(a.children[0])),o.forEach(function(t){C(rt.start,t,M,{handles:[i,a],handleNumbers:[n-1,n]})})}})}function D(t,e,n,i,a){return et.length>1&&(i&&e>0&&(n=Math.max(n,t[e-1]+r.margin)),a&&e<et.length-1&&(n=Math.min(n,t[e+1]-r.margin))),et.length>1&&r.limit&&(i&&e>0&&(n=Math.min(n,t[e-1]+r.limit)),a&&e<et.length-1&&(n=Math.max(n,t[e+1]-r.limit))),r.padding&&(0===e&&(n=Math.max(n,r.padding)),e===et.length-1&&(n=Math.min(n,100-r.padding))),n=ut.getStep(n),n=o(n),n!==t[e]&&n}function H(t){return t+"%"}function V(t,e){ot[t]=e,ct[t]=ut.fromStepping(e);var n=function(){et[t].style[r.style]=H(e),B(t),B(t+1)};window.requestAnimationFrame&&r.useRequestAnimationFrame?window.requestAnimationFrame(n):n()}function G(){st.forEach(function(t){var e=ot[t]>50?-1:1,n=3+(et.length+e*t);et[t].childNodes[0].style.zIndex=n})}function Y(t,e,n,i){return e=D(ot,t,e,n,i),e!==!1&&(V(t,e),!0)}function B(t){if(nt[t]){var e=0,n=100;0!==t&&(e=ot[t-1]),t!==nt.length-1&&(n=ot[t]),nt[t].style[r.style]=H(e),nt[t].style[r.styleOposite]=H(100-n)}}function z(t,e){null!==t&&t!==!1&&("number"==typeof t&&(t=String(t)),t=r.format.from(t),t===!1||isNaN(t)||Y(e,ut.toStepping(t),!1,!1))}function q(t,e){var n=s(t),i=void 0===ot[0];e=void 0===e||!!e,n.forEach(z),r.animate&&!i&&a(at,r.cssClasses.tap,r.animationDuration),st.forEach(function(t){Y(t,ot[t],!0,!1)}),G(),st.forEach(function(t){k("update",t),null!==n[t]&&e&&k("set",t)})}function K(t){q(r.start,t)}function W(){var t=ct.map(r.format.to);return 1===t.length?t[0]:t}function X(){for(var t in r.cssClasses)r.cssClasses.hasOwnProperty(t)&&c(at,r.cssClasses[t]);for(;at.firstChild;)at.removeChild(at.firstChild);delete at.noUiSlider}function J(){return ot.map(function(t,e){var n=ut.getNearbySteps(t),i=ct[e],r=n.thisStep.step,a=null;r!==!1&&i+r>n.stepAfter.startValue&&(r=n.stepAfter.startValue-i),a=i>n.thisStep.startValue?n.thisStep.step:n.stepBefore.step!==!1&&i-n.stepBefore.highestStep,100===t?r=null:0===t&&(a=null);var o=ut.countStepDecimals();return null!==r&&r!==!1&&(r=Number(r.toFixed(o))),null!==a&&a!==!1&&(a=Number(a.toFixed(o))),[a,r]})}function Q(t,e){dt[t]=dt[t]||[],dt[t].push(e),"update"===t.split(".")[0]&&et.forEach(function(t,e){k("update",e)})}function Z(t){var e=t&&t.split(".")[0],n=e&&t.substring(e.length);Object.keys(dt).forEach(function(t){var i=t.split(".")[0],r=t.substring(i.length);e&&e!==i||n&&n!==r||delete dt[t]})}function $(t,e){var n=W(),i=["margin","limit","padding","range","animate","snap","step","format"];i.forEach(function(e){void 0!==t[e]&&(l[e]=t[e])});var a=j(l);i.forEach(function(e){void 0!==t[e]&&(r[e]=a[e])}),a.spectrum.direction=ut.direction,ut=a.spectrum,r.margin=a.margin,r.limit=a.limit,r.padding=a.padding,ot=[],q(t.start||n,e)}var tt,et,nt,it,rt=m(),at=n,ot=[],st=[],lt=!1,ut=r.spectrum,ct=[],dt={};if(at.noUiSlider)throw new Error("Slider was already initialized.");return v(at),g(r.connect,tt),it={destroy:X,steps:J,on:Q,off:Z,get:W,set:q,reset:K,__moveHandles:function(t,e,n){A(t,e,ot,n)},options:l,updateOptions:$,target:at,pips:S},R(r.events),q(r.start),r.pips&&S(r.pips),r.tooltips&&b(),it}function z(t,e){if(!t.nodeName)throw new Error("noUiSlider.create requires a single element.");var n=j(e,t),i=B(t,n,e);return t.noUiSlider=i,i}y.prototype.getMargin=function(t){var e=this.xNumSteps[0];if(e&&t/e%1!==0)throw new Error("noUiSlider: 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&h(this.xVal,t)},y.prototype.toStepping=function(t){return t=b(this.xVal,this.xPct,t)},y.prototype.fromStepping=function(t){return N(this.xVal,this.xPct,t)},y.prototype.getStep=function(t){return t=E(this.xPct,this.xSteps,this.snap,t)},y.prototype.getNearbySteps=function(t){var e=_(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e-0],step:this.xNumSteps[e-0],highestStep:this.xHighestCompleteStep[e-0]}}},y.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(l);return Math.max.apply(null,t)},y.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var q={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};return{create:z}}),cssNamespace.pkportal.mitteilungszentrale=function(t,e,n,i,r,a,o,s,l,u,c){function d(e){ut=e,ut.policenUrl&&(dt.NOTIFICATION_POLICE.url=ut.policenUrl),lt=u.getLoadingAnimationBlockUiSettings(),t.extend(lt,{css:{border:"1px solid #ccc","border-radius":"5px"}}),s.getPersonsCount()>0?f():s.observePersonen().then(function(){f()})}function f(){Z(),N(),m(),J(),c.resetNewNotificationsCounter()}function m(){var t="account/message?pagingFrom="+rt+"&pagingSize="+at+"&sortParam="+ot;return r.doRestApiCall(t,"GET","",{returnHeader:!0}).then(function(t){var e=t.data,n=t.jqXHR.getResponseHeader("X-Total-Count");rt+=at,rt>=n&&(X(),Q()),e.length>0&&w(e)})}function p(e,n){t(n).hasClass("dataLoaded")||h(e).then(function(e){t(n).addClass("dataLoaded"),T(n,e)})}function h(t){var e="partner/current/anliegen/"+t;return r.doRestApiCall(e,"GET")}function g(t,n){return new Promise(function(i,r){var a={url:ut.mitteilungUrl,data:{partnerNr:n,contentPath:t,hasDetail:!0},success:function(t){i(v(t))},error:r,headers:{}};e.doPost(a)})}function v(t){var e={"mainPerson.userId":s.getHashByPersonId(0),"partnerPerson.userId":s.getHashByPersonId(s.getCurrentPersonId())};return t.title=_(t.title,e),t.detail=_(t.detail,e),t}function _(t,e){var n="\\*";return Object.keys(e).forEach(function(i){var r=n+i+n;t=t.replace(new RegExp(r,"gm"),e[i])}),t}function b(t){var e="account/message/"+t+"/readstate";return r.doRestApiCall(e,"PUT","",{contentType:"application/json"})}function N(){t.addTemplateFormatter({hrefFormatter:function(t){var e="#";if(dt[t.type]&&dt[t.type].url&&(e=dt[t.type].url.replace("{0}",t.uniqueIdentifier).replace("{1}",t.subject).replace("{2}",t.dokumentNr)),"NOTIFICATION_STEUERAUSZUG"===t.type){var n;if(t.fileName)n=t.fileName;else{var i=E(t.partnerNr);n=ut.translations.steuerauszug+"_"+t.metadata[0]+"_"+t.metadata[1]+"_"+i.firstname+"_"+i.lastname}return z(n,t.dokumentNr)}return e},linkFormatter:function(t){return t},dataDateFormatter:function(t){return moment(t).format("YYYYMMDD")},itemStateFormatter:function(t){var e="mitteilungsuebersicht__item";return t.hasBeenRead===!1&&(e+=" mitteilungsuebersicht__item--unread"),t.masked===!0&&(e+=" mitteilungsuebersicht__item--disabled"),e},iconFormatter:function(t){return"ANLIEGEN"===t?"/designs/ie/mycss/images/nonsprite/icons/ic-notification-request.svg":"MESSAGE_LEAD"===t||"DOKUMENT"===t?"/designs/ie/mycss/images/nonsprite/icons/ic-menu-notification.svg":"/designs/ie/mycss/images/nonsprite/icons/ic-menu-invoices.svg"},disableTooltipFormatter:function(){return ut.translations.disabledTooltip},headlineFormatter:function(t){return"MESSAGE_LEAD"!==t.type&&"DOKUMENT"!==t.type?t.subject:" "},subjectFormatter:function(t){var e=t.type,n=moment(t.lastUpdate).format("DD.MM.YYYY"),i=ut.translations.from,r=ut.translations["for"];if("NOTIFICATION_PRAEMIENABRECHNUNG"===e)return t.metadata[1]+" "+t.metadata[2]+" "+i+" "+t.metadata[0];if("NOTIFICATION_EINGEREICHTE_RECHNUNG"===e)return t.metadata[0]+" "+r+" "+t.metadata[1];if("NOTIFICATION_POLICE"===e||"NOTIFICATION_OFFERTE"===e)return r+" "+t.metadata[0]+", CHF "+t.metadata[1];if("NOTIFICATION_LEISTUNGSABRECHNUNG"===e)return"CHF "+t.metadata[1]+" "+i+" "+n;if("ANLIEGEN"===e)return t.uniqueIdentifier+" "+i+" "+moment(t.metadata.ISSUE_DATE).format("DD.MM.YYYY");if("MESSAGE_LEAD"===e||"DOKUMENT"===e)return" ";if("NOTIFICATION_STEUERAUSZUG"===e){var a=E(t.partnerNr);return r+" "+a.firstname+" "+a.lastname+", "+t.metadata[0]+" - "+t.metadata[1]}},hasAttachmentFormatter:function(t){var e="mitteilungsuebersicht__item__attachment";return t===!0?e:e+" invisible"},dateFormatter:function(t){return moment(t).format("DD.MM.YYYY")},unreadCounterFormatter:function(t){var e="mitteilungsuebersicht__item__metadata--messagecounter";return t.UNREAD_HISTORY_COUNT<0?e:e+" invisible"},readyForRatingFormatter:function(t){var e="icon svg open-rating mitteilungsuebersicht__item__icon";return"true"===t.READY_FOR_RATING?e:e+" invisible"},detailBodyAnswerFormatter:function(t){return t.messageData},answererFormatter:function(t){return t.erfasserBenutzerId},dokumentNrToLinkFormatter:function(t){var e=t.fileName?t.fileName:t.dokumentNr;return z(e,t.dokumentNr)},dokumentNameFormatter:function(t){return t.fileName?t.fileName:t.dokumentNr},erfasserFormatter:function(t){return t?ut.companyName:s.getFullnameOfCurrentPerson()},creationDateFormatter:function(t){return moment(t).format("DD.MM.YYYY")},ratingTextFormatter:function(t){var e=ut.translations.anliegenText,n=moment(t.creationDate).format("DD.MM.YYYY");return e.replace("{0}",t.taetigkeitLabel).replace("{1}",n)}})}function E(t){return s.getPersonByPartnerNr(t)}function w(e){t("."+st).loadTemplate("#mitteilungsuebersichtTemplate",e,{success:x,beforeInsert:S,append:!0})}function S(e){e.find(".mitteilungsuebersicht__item--disabled").on("click",function(t){t.preventDefault()}),e.find('a[data-type="MESSAGE_LEAD"],a[data-type="DOKUMENT"]').each(function(){var e=t(this),n=e.find(".mitteilungsuebersicht__item__description--text"),i={href:e.data("href"),type:e.data("type"),partnerNr:e.data("partnernr"),date:e.data("date"),dokumentNr:e.data("doknr")};if(" "===n.text()){var r=encodeURI(e.find(".mitteilungsuebersicht__item__description--headline").data("mitteilungen-subject"));g(r,i.partnerNr).then(function(e){var n=t(".mitteilungszentrale ul li a[data-href='"+i.href+"']"),r=n.find(".mitteilungsuebersicht__item__description--headline"),a={messageData:e.detail,erfasserBenutzerId:"company"};r.text(r.data("mitteilungen-title")),n.find(".mitteilungsuebersicht__item__description--text").text(e.title),n.nextAll(".mitteilungsdetailWrapper").loadTemplate("#mitteilungsdetail__bodyTemplate",a,{afterInsert:function(t){t.find(".mitteilungsdetail__body--content__content").addClass("richTextContent"),y(t),"DOKUMENT"===i.type&&C(t,i)}})})}})}function y(n){n.find(".pran-link").on("click",function(){var n=t(this).closest(".mitteilungsuebersicht__item").find(".mitteilungsuebersicht__item__link").attr("data-partnernr"),i=t(this);return cssNamespace.tracking.trackCustomLinkAction("pkPortal","PRAN-Mitteilungen","click",i.text()),o.updateFamilyViewByPartnerNr(n).then(function(){var t=i.attr("href");e.windowLocationHref(t)}),!1})}function C(t,e){var i=e.partnerNr?E(e.partnerNr.toString()):{},r={fileName:[ut.translations.document,i.firstname||"",i.lastname||"",e.date].join("_"),dokumentNr:e.dokumentNr};t.find(".mitteilungsdetail__body--content__attachment").loadTemplate("#mitteilungsdetail__body--content__attachmentTemplate",r,{success:function(){n.replaceSvgWithInlineSvg()}})}function x(){n.replaceSvgWithInlineSvg(),t(".mitteilungsuebersicht .mitteilungsuebersicht__spinner").remove()}function T(e,n){var i=n.mitteilungen;t(e).find(".mitteilungsdetailWrapper").loadTemplate("#mitteilungsdetailTemplate",n,{success:function(){i.reverse(),i.length>0?t(e).find(".mitteilungsdetail__body").loadTemplate("#mitteilungsdetail__bodyTemplate",i,{success:function(){O(e,i,!0),I(e,n)}}):I(e,n)}})}function I(t,e){A(e)&&k(t,e),e.readyForAnswer?F(t):e.readyForRating?D(t,!1,e):e.rating&&D(t,!0,e)}function A(t){return"ABGESCHLOSSEN"===t.status&&t.eingangsKanal!==t.antwortKanal}function k(e,n){var i=ut.translations.contactCanal[n.antwortKanal];i||(i=ut.translations.contactCanal.DEFAULT),t(e).find(".mitteilungsdetail__body__canalHint").loadTemplate("#mitteilungsdetail_canalHint",{content:i,mandant:ut.companyName},{})}function O(t,e,i){n.replaceSvgWithInlineSvg(),K(t),i&&q(t,e)}function U(e,n){var i=e.closest("form"),r=t.extend(l.formSettings,{submitHandler:n,onkeyup:function(t,e){this.element(t)}});i.validate(r),l.preventFormSubmissionOnEnter(i)}function F(e){t(e).find(".mitteilungsdetail-answer-container").loadTemplate("#mitteilungsdetail-answer-template",{},{afterInsert:function(n){i.registerTextArea(t(".mitteilungsdetail-answer_textarea",n),t(".char-counter",n),t(".chars-left",n)),U(n.find(".mitteilungsdetail-answer_textarea"),function(){M(e)}),L(n)}})}function M(n){var i=n.closest(".mitteilungsuebersicht__item"),a="",o=e.prettyPrintFilter(t(".mitteilungsdetail-answer_textarea").val()),s=a+o,l={contentType:"application/json",headersAccept:"text/plain"},u={prettyPrint:s,uploadUuids:P(i),eingangsDokumentenKlasse:"A_ALLG_INFO"},c=i.find(".mitteilungsuebersicht__item__link").data("href"),d="partner/current/anliegen/"+c+"/antwort?eingangsKanal=PORTAL";o&&r.doRestApiCall(d,"POST",JSON.stringify(u),l).then(function(){t(".mitteilungsdetail-answer-container",i).hide(),h(c).then(function(t){var e=t.mitteilungen[0];R(i,e)}),i.unblock()},function(){i.unblock()}),i.block(lt)}function P(e){var n=[];return t("input[name=fileupload_uuid]",e).each(function(e){n[e]=t(this).val()}),n}function L(e){var n="partner/current/anliegen/document",i=t(".fileuploadTemplate").children().first().clone();e.find(".mitteilungsdetail-answer_fileupload-placeholder").replaceWith(i),e.find(".mitteilungsdetail-answer_submit").appendTo(i.find(".buttonWrapper")),e.find(".mitteilungsdetail-answer_charsleft-container").appendTo(i.find(".buttonWrapper")),a.init(i,n)}function R(e,n){var i={append:!0,success:function(){O(e,n,!1)}};t(".mitteilungsdetail__body",e).loadTemplate("#mitteilungsdetail__bodyTemplate",n,i)}function D(e,n,i){t(e).find(".mitteilungsdetail__rating").loadTemplate("#mitteilungsdetail__ratingTemplate",i,{success:function(){Y(e,n,i.rating),H(e,i),n?(e.find(".rating__headline__rated").show(),e.find(".rating__headline,.rating__text").hide(),G(e,i)):V(e)}})}function H(t,e){t.find("a.mitteilungsdetail__reopen").on("click",function(){return t.find(".rating").hide(),F(t),t.find(".mitteilungsdetail__rating").hide(),!1})}function V(e){t(e).find(".mitteilungsdetail-rating-textarea").loadTemplate("#mitteilungsdetail__ratingTextareaTemplate",{},{success:function(){i.registerTextArea(t(".rating__textarea",e),t(".char-counter",e),t(".chars-left",e))},afterInsert:function(t){U(t.find(".rating__textarea"),function(){return j(e)})}})}function G(e,n){t(e).find(".mitteilungsdetail-rating-comment").loadTemplate("#mitteilungsdetail__ratingCommentTemplate",n)}function Y(e,n,i){setTimeout(function(){var r=t(e).find(".mitteilungsuebersicht__item__link").attr("data-href"),a="slider_"+r;t(e).find(".mitteilungsdetail.rating").attr("data-anliegenid",r),i>0&&i<=it&&t(e).find(".rating").removeClass("rating--notRatedYet"),t(e).find(".rating__slider--slider").attr("id",a);var o=document.getElementById(a);noUiSlider.create(o,{start:i||$,step:1,tooltips:!0,connect:[!0,!1],range:{min:1,max:10},pips:{mode:"values",values:[1,2,3,4,5,6,7,8,9,10],density:10},format:{to:function(t){return parseInt(Math.round(t))},from:function(t){return parseInt(Math.round(t))}}}),o.noUiSlider.on("change",function(){ct=!0,t(e).find(".rating").removeClass("rating--notRatedYet"),t(e).find(".rating__buttons button").prop("disabled",!1),t(e).find(".validationError").addClass("rating__slider--hideError")}),n&&B(a)},1)}function j(e){if(!ct)return t(e).find(".rating__slider--hideError").removeClass("rating__slider--hideError"),!1;var n=moment().format(),i=e.find(".mitteilungsdetail.rating"),a=i.data("anliegenid"),o=i.find(".rating__textarea"),s=o.val().replace(/[\r\n]/g,"<br>"),l=o.attr("placeholder");s===l&&(s="");var u=i.find(".rating__slider--slider").attr("id"),c=document.getElementById(u),d=c.noUiSlider.get(),f={rating:d,createdAt:n,prettyPrint:s},m="partner/current/anliegen/"+a+"/bewertung",p={contentType:"application/json"};r.doRestApiCall(m,"POST",JSON.stringify(f),p).then(function(){var t={ratingFeedback:s};G(i,t),i.find(".mitteilungsdetail-rating-textarea").hide(),i.find(".rating__headline__rated").show(),i.find(".rating__headline,.rating__text").hide(),i.parent().find(".mitteilungsdetail.closed").attr("data-reopenable","false"),B(u),i.unblock()},function(t){i.unblock()}),i.block(lt)}function B(t){var e=document.getElementById(t);e.setAttribute("disabled",!0)}function z(t,e){var n="../../../../secure/pkportal/document.html";return encodeURI(n)+"?documentName="+encodeURIComponent(t)+"&documentId="+encodeURI(e)+"&_charset_=UTF-8"}function q(t,e){setTimeout(function(){
var e=t.find(".mitteilungsdetail__body"),n=t.find(".mitteilungsdetail__body__wrapper"),i=e.find(".mitteilungsdetail__body__button");n.length>nt&&(e.addClass("multipleMessages"),i.text(i.attr("data-text").replace("{0}",n.length-nt)))},1)}function K(e){setTimeout(function(){var n=e.find(".mitteilungsdetail__body--image__user"),i=t("#familyView").find(".member.current .profile-picture");i.clone().appendTo(n)},1)}function W(){t(window).off("scroll"),t(".showMoreMitteilungen").show().off("click").on("click",function(){t(".showMoreMitteilungen").attr("disabled","disabled"),m().then(function(){t(".showMoreMitteilungen").removeAttr("disabled")})})}function X(){t(".showMoreMitteilungen").hide()}function J(){t(window).on("scroll",function(){rt<et?(clearTimeout(t.data(this,"checkScroll")),t.data(this,"checkScroll",setTimeout(function(){t(window).scrollTop()-(t(document).height()-t(window).height())>=tt&&m()},250))):W()})}function Q(){t(window).off("scroll")}function Z(){t(document).on("click",".mitteilungsuebersicht__item__link",function(n){var i=t(this),r=i.parent("li"),a=i.attr("data-href"),s=(i.attr("data-read"),i.attr("data-type")),l=(i.attr("data-doknr"),i.attr("href")),u=[];if(dt[s]&&dt[s].familyView){var c=i.attr("data-partnernr");u.push(o.updateFamilyViewByPartnerNr(c))}t(this).parent().hasClass("mitteilungsuebersicht__item--unread")&&u.push(b(a)),u.length&&(n.preventDefault(),Promise.all(u).then(function(t){"undefined"!=typeof t.length&&i.closest(".mitteilungsuebersicht__item--unread").removeClass("mitteilungsuebersicht__item--unread"),"#"!==l&&e.windowLocationHref(l)},function(){"#"!==l&&(window.location.href=l)})),r.hasClass("mitteilungsuebersicht__item--disabled")||"ANLIEGEN"!==s&&"MESSAGE_LEAD"!==s&&"DOKUMENT"!==s||(n.preventDefault(),r.hasClass("animating")||(r.addClass("animating"),r.hasClass("mitteilungsuebersicht__item--opened")?r.removeClass("mitteilungsuebersicht__item--opened").find(".mitteilungsdetailWrapper").stop().slideUp(300,function(){r.removeClass("animating")}):r.addClass("mitteilungsuebersicht__item--opened").find(".mitteilungsdetailWrapper").stop().slideDown(300,function(){r.removeClass("animating"),"ANLIEGEN"===s&&p(a,r)})))}).on("click",".mitteilungsdetail__body__button",function(){t(this).parent().removeClass("multipleMessages")})}var $=0,tt=-300,et=100,nt=3,it=10,rt=0,at=40,ot="LAST_UPDATE_DESC",st="mitteilungsuebersicht",lt={},ut={},ct=!1,dt={NOTIFICATION_EINGEREICHTE_RECHNUNG:{name:"NOTIFICATION_EINGEREICHTE_RECHNUNG",url:"../meine_gesundheit/timeline.html/{0}",familyView:!0},NOTIFICATION_LEISTUNGSABRECHNUNG:{name:"NOTIFICATION_LEISTUNGSABRECHNUNG",url:"../abrechnungen/leistungsabrechnungen.html"},NOTIFICATION_PRAEMIENABRECHNUNG:{name:"NOTIFICATION_PRAEMIENABRECHNUNG",url:"../abrechnungen/praemienrechnungen.html"},NOTIFICATION_POLICE:{name:"NOTIFICATION_POLICE",url:"../meine_police/meine_police.html",familyView:!0},NOTIFICATION_OFFERTE:{name:"NOTIFICATION_OFFERTE",url:"meine_offerten/offerten_detail.html?offerNumber={0}"}};return{init:d}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.svgService,cssNamespace.pkportal.textareaUtil.charCounter,cssNamespace.pkportal.restService,cssNamespace.pkportal.restFileUpload,cssNamespace.pkportal.familyview,cssNamespace.pkportal.personenService,cssNamespace.pkportal.validation,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.newNotificationsCounter),cssNamespace.pkportal.voe=function(t,e,n){"use strict";function i(i){t(".voelaunch").click(function(){var t=window.open("","_blank"),r=e.getHashByPersonId(e.getCurrentPersonId()),a=n.getLanguage(window.location.href),o=i+(i.indexOf("?")===-1?"?":"&");o+="lang="+a.shortCode.toLowerCase(),o+="&u="+r,t?t.location.href=o:window.location.href=o})}return{init:i}}(jQuery,cssNamespace.pkportal.personenService,cssNamespace.pkportal.utils);
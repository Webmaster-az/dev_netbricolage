cssNamespace.pkportal.checkauth=function(a,e){return{init:function(k,h){null===a.cookie(k)&&"login"!==e.getParameterFromUrl(window.location.href,"source")&&e.windowLocationReplace(h)}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.teaserAnimationsShared=function(a,e,k){function h(c,g,d){if(this.length){var f=a(this).attr("id"),l=p(a(this).data("maxvalue")),h=l-p(a(this).data("customervalue")),r=a(this).data("currency"),x=a(this).data("description"),w=h/l*100,q=new e(f,140,140);w=t(w);d||k.isMobile()||(d=1E3);g||k.isMobile()||(g=300);c||k.isMobile()||(c=1E3);var F=u.color,A=u.font;m(q);q.path().attr({fill:F.white,stroke:F.border,arc:[70,70,100,100,69.5]});q.path().attr({fill:F.white,stroke:F.border,arc:[70,
70,100,100,43.5]});h=q.path().attr({stroke:F.background,"stroke-width":15,arc:[70,70,100,100,56.5]});var M=q.path().attr({stroke:F.white,"stroke-width":25,arc:[70,70,0,100,56.5]});F=q.path().attr({stroke:F.foreground,"stroke-width":15,arc:[70,70,0,100,56.5]});if(r&&!x){var J=50;var L=65;var K=90}else r&&x?(J=50,L=72,K=94):L=44;x&&(x=q.text(70,140,x),x.attr({x:70,y:J-40,"font-family":A.description.family,"font-size":A.description.size,fill:A.description.color,"fill-opacity":0}),J=e.animation({"fill-opacity":1,
y:J},g,"ease-out"),x.animate(J.delay(d)));l=n(l);l=q.text(70,140,l);l.attr({x:70,y:L-40,"font-family":A.title.family,"font-size":A.title.size,fill:A.title.color,"fill-opacity":0});L=e.animation({"fill-opacity":1,y:L},g,"ease-out");l.animate(L.delay(d));r&&(r=q.text(70,140,r),r.attr({x:70,y:K-40,"font-family":A.text.family,"font-size":A.text.size,fill:A.text.color,"fill-opacity":0}),K=e.animation({"fill-opacity":1,y:K},g,"ease-out"),r.animate(K.delay(d)));K=new e.animation({arc:[70,70,w,100,56.5]},
c,"\x3c\x3e");c=new e.animation({arc:[70,70,w,100,56.5]},c,"\x3c\x3e");M.animate(K.delay(g+d));F.animate(c.delay(g+d));b(f,[F,h],[".blue-2",".blue-1"],15,5)}}function d(c,g){if(this.length){var d=a(this).attr("id"),l=p(a(this).data("maxvalue")),f=p(a(this).data("customervalue")),h=p(a(this).data("nvkvalue"));f=f/l*100;var n=h/l*100,r=new e(d,140,140);f=t(f);n=t(n);g||k.isMobile()||(g=1E3);c||k.isMobile()||(c=1200);var x=u.color;m(r);r.path().attr({fill:x.white,stroke:x.border,arc:[70,70,100,100,69]});
l=r.path().attr({fill:x.background,stroke:x.background,"stroke-width":0,arc:[70,70,100,100,63]});h=r.path().attr({stroke:x.white,"stroke-width":53,arc:[70,70,0,100,41.5]});var q=r.path().attr({stroke:x.red,"stroke-width":43,arc:[70,70,0,100,41.5]}),F=r.path().attr({stroke:x.white,"stroke-width":53,arc:[70,70,0,100,41.5]}),w=r.path().attr({stroke:x.foreground,"stroke-width":43,arc:[70,70,0,100,41.5]});r.path().attr({fill:x.white,stroke:0,arc:[70,70,100,100,20]});r.path().attr({fill:x.white,stroke:x.border,
arc:[70,70,100,100,15]});r=e.animation({arc:[70,70,f,100,41.5]},c,"\x3c\x3e");x=e.animation({arc:[70,70,f,100,41.5]},c+100,"\x3c\x3e");var M=e.animation({arc:[70,70,Math.round((f+n)*Math.pow(10,12))/Math.pow(10,12),100,41.5]},c+100,"\x3c\x3e");c=e.animation({arc:[70,70,Math.round((f+n)*Math.pow(10,12))/Math.pow(10,12),100,41.5]},c+100,"\x3c\x3e");w.animate(r.delay(g));F.animate(x.delay(g));q.animate(M.delay(g));h.animate(c.delay(g));b(d,[l,w,q],[".blue-1",".blue-2",".violet"],43,7)}}function c(b,
c){if(this.length){b=a(this).attr("id");var g=p(a(this).data("customervalue")),d=new e(b,100,100);b=0;k.isMobile()||(b=500);c||(c=300);var l=u.color,f=u.font;m(d);d.path("M5,50 a 44,44 0 1,1 0,0.1").attr({stroke:l.border});d.path("M14,50 a 35,35 0 1,1 0,0.1").attr({"stroke-width":8,stroke:l.background});d.path("M23,50 a 26,26 0 1,1 0,0.1").attr({stroke:l.border});g=d.text(50,40,g).attr({"font-family":f.title.family,"font-size":f.title.size,fill:f.title.color,"fill-opacity":0});d=e.animation({"fill-opacity":1,
y:50},b,"ease-in");k.isMobile()?g.animate(d.delay(0)):g.animate(d.delay(c+b+200))}}function f(b,c,g){k.isMobile()||a(this).each(function(){var d=a(this);c||(c=500);b||(b=800);var l=p(d.text());/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/.test(l)&&(d.data("initial-animation-value",n(l)),d.addClass("countUpAnimationRunning"),g?d.html(""):/^[0-9]+$/.test(l)?d.html("0"):d.html("0.00"),/^[0-9]+$/.test(l)||d.attr("data-decimals",2),d.css("opacity",1).delay(c).animate({opacity:1},0,function(){d.countTo({from:0,to:l,
speed:b,refreshInterval:5,formatter:function(a,b){return n(a.toFixed(b.decimals))},onComplete:function(){d.removeClass("countUpAnimationRunning")}})}))})}function l(b,c){k.isMobile()||this.each(function(){var g=a(this).find(".bar"),d=0;if("undefined"!==typeof g.data("customervalue")&&"undefined"!==g.data("total")){d=100*p(g.data("customervalue"));var l=p(g.data("total"));d/=l}else"undefined"!==typeof g.attr("alt")&&(d=g.attr("alt"));b||(b=1E3);c||(c=500);g.data("initial-animation-value",d);p(g.data("customervalue"));
g.css("width","0").delay(c).animate({width:parseFloat(d,10)+"%"},b)})}function g(b,g){this.each(function(){var c=a(this);b||(b=1E3);g||(g=500);c.startBarAnimation(b,g);c.find(".innerDescription, .outerDescription").startCountAnimation(b,g,!0)})}function b(b,g,c,d,l){function f(a){m="none"===a.attr("fill")?d:0;a.animate({"stroke-width":m},200,"elastic")}var m;a.each(c,function(c,e){var h=g[c];a("#"+b).parents(".teaser").find(e).parent().mouseenter(function(){m="none"===h.attr("fill")?d+l:l;h.animate({"stroke-width":m},
300,"elastic")}).mouseleave(function(){f(h)});a("#"+b).mouseleave(function(){f(h)})})}function m(a){a.customAttributes.arc=function(a,b,g,c,d){var l=360/c*g,f=(90-l)*Math.PI/180,m=a+d*Math.cos(f);f=b-d*Math.sin(f);return{path:c===g?[["M",a,b-d],["A",d,d,0,1,1,a-.01,b-d]]:[["M",a,b-d],["A",d,d,0,+(180<l),1,m,f]]}}}function n(a){var b=(a+"").split(".");a=b[0];b=1<b.length?"."+b[1]:"";for(var g=/(\d+)(\d{3})/;g.test(a);)a=a.replace(g,"$1'$2");return a+b}function p(a){if(null===a||"undefined"===typeof a)return null;
a=a.toString();return a=a.replace(/\'/,"")}function t(a){return isNaN(a)?(console&&console.warn&&console.warn("Could not compute valid number for animation parameter. Treating NaN as 0"),0):a}function w(){var b=function(){a(".countUpAnimationRunning").each(function(){if("undefined"===typeof a(this).data("stopped-count-up-animation-for-printing")){var b=a(this).data("initial-animation-value"),g=a("\x3c"+a(this).prop("tagName")+"\x3e").insertAfter(a(this));g.text(b);g.attr("class",a(this).attr("class"));
g.attr("style",a(this).attr("style"));g.removeClass("countUpAnimationRunning");a(this).hide();a(this).data("stopped-count-up-animation-for-printing",!0)}})};window.matchMedia&&window.matchMedia("print").addListener(function(a){a.matches&&b()});window.onbeforeprint=b}var u={color:{background:"#00a7e0",foreground:"#092768",red:"#cb1c81",white:"#fff",border:"#e6e6e6"},font:{description:{family:"Arial",color:"#5b5b5b",size:"12"},text:{family:"Museo700, Arial",color:"#ccc",size:"12"},title:{family:"Museo700, Arial",
color:"#5b5b5b",size:"26"}}};return{init:function(b){"undefined"!==typeof b&&a.extend(u,b);0<a(".ie8").length&&(u.font.description.family="Arial",u.font.text.family="Arial",u.font.title.family="Arial");a.fn.startDonutAnimation=h;a.fn.startPieAnimation=d;a.fn.startNotificationAnimation=c;a.fn.startCountAnimation=f;a.fn.startBarAnimation=l;a.fn.startBarAndCountAnimation=g;w()}}}(jQuery,Raphael,cssNamespace.pkportal.utils);
cssNamespace.pkportal.systemMessage=function(a){function e(e,d){0<a(".login-system-message").length&&a(".login-system-message").show();a("\x3cdiv /\x3e").addClass("systemMessage").addClass(d).prop("id",e).appendTo("#systemMessages")}function k(e){e=a("#"+e);0<e.length&&e.remove();!(0<a("#systemMessages").length&&0<a("#systemMessages").children().length)&&0<a(".login-system-message").length&&a(".login-system-message").hide()}return{populateSystemMessages:function(h,d,c){k(d);e(d,c);var f=!1;a.each(h,
function(c,g){c=a("\x3cdiv /\x3e").addClass("padded").appendTo("#"+d);c=a("\x3cdiv /\x3e").addClass("statusMessage").appendTo(c);"object"===typeof g&&1<g.length?(a("\x3cb/\x3e").html(g[0]).appendTo(c),a("\x3cspan/\x3e").html(g[1]).appendTo(c)):c.html(g);f=!0});f&&a("#"+d).show()},removeSystemMessage:k}}(jQuery);
cssNamespace.pkportal.ajaxConfig=function(a,e,k){function h(a,l,g){var b=a.success;a.success=function(g,l,f){e.isDefinedAndNotNull(g)&&(e.isDefinedAndNotNull(g.errorMessageForService)||e.isDefinedAndNotNull(g.errorPageUrl))?e.isDefinedAndNotNull(g.errorMessageForService)?(k.populateSystemMessages([g.errorMessageForService],"errormessageforservice","red"),d(a.error,f)):e.isDefinedAndNotNull(g.errorPageUrl)&&(window.location.href=g.errorPageUrl):c(b,g,l,f)}}function d(c,d){"function"===typeof c?c(d,
"error","Backend not available"):c instanceof Array&&a.each(c,function(a,b){b(d,"error","Backend not available")})}function c(c,d,g,b){"function"===typeof c?c(d,g,b):c instanceof Array&&a.each(c,function(a,c){c(d,g,b)})}a.ajaxPrefilter(function(a,c,g){g.setRequestHeader("X-Request-Source","ajax");h(a,c,g)});return{}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.systemMessage);
cssNamespace.pkportal.animatedLoader=function(a,e){function k(){return{message:a("#loadingAnimationContainer").html(),centerX:!1,centerY:!1,fadeIn:1E3,fadeOut:400,ignoreIfBlocked:!1,css:{padding:0,width:"100%",height:"100%",top:0,bottom:"auto",left:0,textAlign:"inherit",color:"inherit",border:"none",backgroundColor:"none",cursor:"progress"},overlayCSS:{backgroundColor:"#FFFFFF",opacity:.85},baseZ:450}}function h(g,b,l){var f=k();c(b,function(b,c){a.each(g,function(b,c){b=a(c);b.hasClass("hasActiveLoadingAnimation")&&
d(b)||(b.addClass("hasActiveLoadingAnimation"),b.block(f));d(b)?b.data("linked-ajax-call-ids").push(l):b.data("linked-ajax-call-ids",[l])})})}function d(a){a=a.data("linked-ajax-call-ids");return a instanceof Array&&0<a.length}function c(a,b){var c=a.beforeSend;a.beforeSend=a.beforeSend?function(){b();c()}:b}function f(c,b,f){l(b,function(){a.each(c,function(b,c){b=a(c);c=d(b)?b.data("linked-ajax-call-ids").length:0;1===c?(b.removeData("linked-ajax-call-ids"),b.removeClass("hasActiveLoadingAnimation"),
b.unblock()):(b=b.data("linked-ajax-call-ids"),e.removeFromArrayInPlace(f,b))})})}function l(a,b){a.complete?"function"===typeof a.complete?a.complete=[a.complete,b]:a.complete instanceof Array&&a.complete.push(b):a.complete=[b]}a.fn.animatedPost=function(a){var b=Math.random().toString(36).substr(2,9);h(this,a,b);f(this,a,b);e.doPost(a)};return{getLoadingAnimationBlockUiSettings:k}}(jQuery,cssNamespace.pkportal.utils);cssNamespace.pkportal.validation=cssNamespace.pkportal.validation||{};
cssNamespace.pkportal.validation.formSettings={onkeyup:!1,highlight:function(a){$(a).addClass("validationError");$(a).prev("label").addClass("validationError")},unhighlight:function(a){$(a).removeClass("validationError");$(a).prev("label").removeClass("validationError")},errorPlacement:function(a,e){a.appendTo(e.parent())},errorElement:"div",errorClass:"validationError"};
cssNamespace.pkportal.validation.preventFormSubmissionOnEnter=function(a){a=a||$("form");a.find(":input").on("keypress",function(a){return a.target&&a.target.tagName&&"textarea"===a.target.tagName.toLowerCase()?!0:13!==a.keyCode})};cssNamespace.pkportal.validation.handleFormSubmissionOnEnter=function(a){a.find(":input").on("keypress",function(e){13===e.which&&(e.preventDefault(),a.submit())})};cssNamespace.pkportal.validation=cssNamespace.pkportal.validation||{};
$.extend(cssNamespace.pkportal.validation,function(a){function e(a){if(h.test(a)){for(var c=a=a.split("-").join(""),d=a=0;d<c.length-1;d++)a=[0,9,4,6,8,2,7,1,3,5][(a+parseInt(c[d],10))%10];c=parseInt(c[c.length-1],10);return c===(10-a)%10||c===(10-a+5)%10}return!1}function k(){var d=!1,c,f;a("#partnerNumberA, #partnerNumberB, #partnerNumberC").each(function(l,g){c=a(g).attr("maxlength");f=new RegExp("^\\d{"+c+"}$","g");if(f.test(a(g).val()))d=!0;else return d=!1});return d}var h=/\d{3}-\d{2}-\d{3}/;
return{partnerNumber:{validatePartnerNumber:e,threeFieldsPartnerNumberValidator:function(d){d=a("#partnerNumberA");var c=a("#partnerNumberB"),f=a("#partnerNumberC");d=[d.val(),c.val(),f.val()].join("-");return e(d)},getThreeFieldValidationRules:function(){return{rules:{partnerNumberA:{partnerNumber:{depends:k}},partnerNumberB:{partnerNumber:{depends:k}},partnerNumberC:{partnerNumber:{depends:k}}}}}}}}(jQuery));cssNamespace.pkportal.validation=cssNamespace.pkportal.validation||{};
$.extend(cssNamespace.pkportal.validation,function(a,e){function k(b){var c=!1;a.each(b,function(a,b){return c=!0});return c}function h(b){var c=a(l[0]).val(),d=a(l[1]).val(),g=a(l[2]).val(),f=a(l[3]).val();return[c,d,g,f].slice(0,b)}function d(a,b){a=a.join("");return(new RegExp("^([A-Z+2-9]{5}){"+b+"}$")).test(a)}function c(a){return b.test(a)}function f(a){return{activationCode:{depends:function(){var b=h(a);return d(b,a)},param:a},activationCodeBlock:!0}}var l=["#activationCodeA","#activationCodeB",
"#activationCodeC","#activationCodeD"],g=/[A-Z+2-9]/,b=/[A-Z+2-9]{5}/;return{activationCode:{validateActivationCode:function(a,b){return d(a,b)&&k(a)},getThreeFieldValidationRules:function(){return{rules:{activationCodeA:f(3),activationCodeB:f(3),activationCodeC:f(3)}}},multiFieldActivationCodeValidator:function(a,b){a=h(b);return k(a)},getFourFieldValidationRules:function(){return{rules:{activationCodeA:f(4),activationCodeB:f(4),activationCodeC:f(4),activationCodeD:f(4)}}},activationCodeBlockMatcher:c,
insertCodeBlocks:function(b){a.each(b,function(b,c){a(l[b]).val(c)})},getCodeBlockArray:h,enableInputAssistance:function(){var b=a(l.join(", "));b.css("text-transform","uppercase");var d=b.length;b.each(function(l,f){var e=d!==l+1;a(f).keyup(function(d){var m=a(f).caret();a(f).val(a(f).val().toUpperCase());a(f).caret(m);d=String.fromCharCode(d.which);d=g.test(d);m=c(a(f).val());d&&m&&e&&a(b[l+1]).focus()})})}}}}(jQuery,cssNamespace.pkportal.utils));
cssNamespace.pkportal.datePickerConfigurer=function(a,e){var k={monthsFull:"Januar Februar M\x26auml;rz April Mai Juni Juli August September Oktober November Dezember".split(" "),monthsShort:"Jan Feb M\x26auml;r Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),weekdaysFull:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),weekdaysShort:"So Mo Di Mi Do Fr Sa".split(" "),today:"Heute",clear:"L\x26ouml;schen",firstDay:1},h={monthsFull:"Janvier F\x26eacute;vrier Mars Avril Mai Juin Juillet Ao\x26ucirc;t Septembre Octobre Novembre D\x26eacute;cembre".split(" "),
monthsShort:"Jan Fev Mar Avr Mai Juin Juil Aou Sep Oct Nov Dec".split(" "),weekdaysFull:"Dimanche Lundi Mardi Mercredi Jeudi Vendredi Samedi".split(" "),weekdaysShort:"Dim Lun Mar Mer Jeu Ven Sam".split(" "),today:"Aujourd'hui",clear:"Effacer",firstDay:1},d={monthsFull:"gennaio febbraio marzo aprile maggio giugno luglio agosto settembre ottobre novembre dicembre".split(" "),monthsShort:"gen feb mar apr mag giu lug ago set ott nov dic".split(" "),weekdaysFull:"domenica luned\x26igrave; marted\x26igrave; mercoled\x26igrave; gioved\x26igrave; venerd\x26igrave; sabato".split(" "),
weekdaysShort:"dom lun mar mer gio ven sab".split(" "),today:"oggi",clear:"cancellare",firstDay:1};switch(e.getLanguage()){case "de":a.extend(jQuery.fn.pickadate.defaults,k);break;case "fr":a.extend(jQuery.fn.pickadate.defaults,h);break;case "it":a.extend(jQuery.fn.pickadate.defaults,d)}return{}}(jQuery,cssNamespace.pkportal.context);
cssNamespace.pkportal.styleOptimizer=function(a){function e(e){a(e).attr("style","white-space: nowrap");a(e).width("1px");var d=k(e);a(e).width(d)}function k(e){var d=[];a(e).each(function(){d.push(a(this).width())});return Math.max.apply(null,d)}return{optimizeTablesForReadability:function(a){e(a+"table.generalTable tr th:first-of-type, table.generalTable tr td:first-of-type");e(a+"table.generalTable tr th:last-of-type, table.generalTable tr td:last-of-type")},restyleMultiRowLinkButtons:function(){a.each(a("a[class*\x3dbutton]"),
function(){1<Math.round(a(this).height()/a(this).css("line-height").replace("px",""))&&a(this).addClass("multipleRows")})}}}(jQuery);
cssNamespace.pkportal.pager=function(a,e){function k(c,d,b){if(c.hasPrevious){var g=a(document.createElement("button")).addClass("button pagingLeft").append(document.createElement("span"));a("#prevPage").html(g)}else a("#prevPage").empty();a("ul.paging").loadTemplate("#pagingNumbersTemplate",c.numbers);c.hasNext?(g=a(document.createElement("button")).addClass("button pagingRight").append(document.createElement("span")),a("#nextPage").html(g)):a("#nextPage").empty();a("ul.paging \x3e li").filter(function(){return parseInt(a(this).text(),
10)===c.current}).addClass("selected");a("ul.paging \x3e li").filter(function(){return-1===parseInt(a(this).text(),10)}).addClass("nonClickable").text("...");1===c.numbers.length&&a("ul.paging \x3e li").css("display","none");a("ul.paging \x3e li").off("click","**");a(".pagingLeft").off("click","**");a(".pagingRight").off("click","**");a("ul.paging \x3e li:not(.nonClickable)").on("click",function(){h(parseInt(a(this).text(),10),d,b)});a(".pagingLeft").on("click",function(){h(c.current-1,d,b)});a(".pagingRight").on("click",
function(){h(c.current+1,d,b)})}function h(a,c,b){e.doPost({url:c,data:{pageNumber:a},success:b})}function d(c,d){a(".entriesPerPage ul.selectorList \x3e li").off("click","**");a(".entriesPerPage ul.selectorList \x3e li").on("click",function(){var b=parseInt(a(this).text(),10);isNaN(b)&&(b=parseInt(f.maxPageSize,10));e.doPost({url:c,data:{pageSize:b},success:d})});a(".entriesPerPage button").click(function(b){a(".entriesPerPage ul.selectorList").show();b.stopPropagation();a("body").on("click",function(){a(".entriesPerPage ul.selectorList").hide()})})}
var c=".resultsPager",f={};return{initWithDefaults:function(d){c=e.getValueForOptionalVariable(d,c);f.pageSizeUrl=a(c).data("pagesizeurl");f.currentPageUrl=a(c).data("currentpageurl")},doPaging:function(l,g){void 0===l.pagerResult?a(c).hide():(k(l.pagerResult,f.currentPageUrl,g),l=l.pageSize,a(".entriesPerPage span.currentPageSize").text(l.currentPageSize),a(".entriesPerPage ul.selectorList").loadTemplate("#pageSizesTemplate",l.otherPageSizes),d(f.pageSizeUrl,g),a(c).show())}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.tooltip=function(a,e){function k(e){a(e).qtip({content:{text:a(e).next(".tooltipContent")},style:{classes:"qtip-tipsy"},position:{my:"bottom center",at:"top center",adjust:{y:-5},viewport:a(window)}})}a.addTemplateFormatter("renderAsTooltip",function(e,d){if("undefined"===typeof e||null===e||""===e||1>e.length)return"";var c='\x3cdiv class\x3d"tooltipContent"\x3e';e instanceof Array?a.each(e,function(a,d){c+="\x3cp\x3e"+d+"\x3c/p\x3e"}):c+="\x3cp\x3e"+e+"\x3c/p\x3e";c+="\x3c/div\x3e";
return'\x3ca class\x3d"hasTooltip"\x3e\x3c/a\x3e'+c});a(document).ready(function(){if("ontouchstart"in window||0<navigator.MaxTouchPoints)window.navigator.msPointerEnabled?(a("body").on("click",".hasTooltip:not([data-hasqtip])",function(){k(this);a(this).trigger("mouseenter")}),a("body").on("click",".hasTooltip",function(){a(this).trigger("mouseenter")})):(a("body").on("touchstart",".hasTooltip:not([data-hasqtip])",function(){k(this);a(this).trigger("mouseenter")}),a("body").on("touchstart",".hasTooltip",
function(){a(this).trigger("mouseenter")}),a("DIV.teaser A.hasTooltip").on("touchstart",function(){}));else a("body").on("mouseenter",".hasTooltip:not([data-hasqtip])",function(){k(this);a(this).trigger("mouseenter")})});return{}}(jQuery,cssNamespace.pkportal.utils);cssNamespace.pkportal.textareaUtil=cssNamespace.pkportal.textareaUtil||{};
cssNamespace.pkportal.textareaUtil.charCounter=function(a){function e(a,e,d,c){a=a.val().length;c-=a;e.html(a);d.html(c)}return{registerTextArea:function(a,h,d,c){c||(c=3E3);a.attr("maxlength",c);e(a,h,d,c);a.bind("keyup",function(){e(a,h,d,c)})}}}(jQuery);
cssNamespace.pkportal.filterValidationSettings=function(a,e){function k(b){var c={};a.each(a(g(b.settings),b.currentForm),function(b,d){b=a(d).data("fieldnames");var g=a(d).text();a.each(b,function(a,b){c[b]=g})});return c}function h(b,c){return a.map(b,function(a,b){if(!(b in c&&c[b]===a))return b})}function d(b,c){a.each(b,function(b,d){a(g(c.settings),c.currentForm).each(function(b,c){b=a(c);b.data("fieldnames");c=b.data("fieldnames");if(!e.isInArray(d,c))return!0;c=(c=b.data("fieldnames"))?c.length:
0;1===c?b.remove():(c=b.data("fieldnames"),e.removeFromArrayInPlace(d,c),b.data("fieldnames",c))})})}function c(b,c){a.each(b,function(b,d){c.settings.unhighlight(a("[name\x3d"+d+"]",c.currentForm)[0],c.settings.errorClass)})}function f(b,c){var d=c.settings;a.each(b,function(b,c){if(0<a(g(d)+":contains("+c.message+")",a(c.element).parent()).length){d.highlight(c.element,d.errorClass);b=c.message;var f=a(c.element);b=a(g(d)+":contains("+b+")",f.parent());l(b,c.element.name);return!0}b=c.message;f=
a("\x3c"+d.errorElement+"\x3e");f.addClass(d.errorClass);f.text(b);l(f,c.element.name);d.errorPlacement(f,a(c.element));d.highlight(c.element,d.errorClass)})}function l(a,b){var c=a.data("fieldnames");c?e.isInArray(b,c)||(c.push(b),a.data("fieldnames",c)):a.data("fieldnames",[b])}function g(a){return a.errorElement+"."+a.errorClass}var b={onfocusout:function(b,c){a(this.currentForm).valid()},onkeyup:function(b,c){b.name in this.invalid&&a(this.currentForm).valid()},onclick:function(b,c){a(this.currentForm).valid()},
errorPlacement:function(b,c){b.appendTo(a(c).parent())},errorElement:"div",errorClass:"validationError",showErrors:function(a,b){a=k(this);a=h(a,this.invalid);d(a,this);c(a,this);f(b,this)},highlight:function(b,c,d){a(b).addClass(c);a(b).parent().prev("label").addClass(c)},unhighlight:function(b,c,d){a(b).removeClass(c);a(b).parent().prev("label").removeClass(c)}};return{getDefaultSettings:function(){return e.createDeepCopy(b)},removeValidationClasses:function(c){c=e.getValueForOptionalVariable(c,
"");a(c+" ."+b.errorClass).removeClass(b.errorClass)}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.filterValidationRules=function(a,e,k){function h(a){a=c(a);return l.test(a.fromAmount)&&l.test(a.toAmount)}function d(a){a=f(a);return a.fromDate.isValid()&&a.toDate.isValid()}function c(c){var b=a(c).parent().children("[name\x3dfromAmount]").first().val();c=a(c).parent().children("[name\x3dtoAmount]").first().val();return{fromAmount:b,toAmount:c}}function f(c){var b=a(c).parent().children("[name\x3dfromDate]").first().val();c=a(c).parent().children("[name\x3dtoDate]").first().val();
b=k(b,"DD.MM.YYYY");c=k(c,"DD.MM.YYYY");return{fromDate:b,toDate:c}}var l=/^[0-9]*\.?[0-9]+$/;return{getDefaultRules:function(){return{rules:{invoiceNumber:{alphanumericWithWildcards:!0,maxlength:12},fromDate:{date:!0,fromDateGreaterThanToDateValidator:{depends:d}},toDate:{date:!0,fromDateGreaterThanToDateValidator:{depends:d}},fromAmount:{number:!0,min:0,fromAmountGreaterThanToAmountValidator:{depends:h}},toAmount:{number:!0,min:0,fromAmountGreaterThanToAmountValidator:{depends:h}}}}},fromAmountGreaterThanToAmountValidator:function(a,
b){a=c(b);return parseFloat(a.fromAmount)<=parseFloat(a.toAmount)?!0:!1},fromDateGreaterThanToDateValidator:function(a,b){a=f(b);return a.fromDate<=a.toDate?!0:!1}}}(jQuery,cssNamespace.pkportal.utils,moment);
cssNamespace.pkportal.filterTab=function(a,e){function k(){var d=a(".tabButtons .button").find(".text");a.trim(d.text())===h()?d.text(a.trim(a(".tabButtons .button .text").data("hidefilterlabel"))):d.text(h())}function h(){return a.trim(a(".tabButtons .button .text").data("showfilterlabel"))}return{addDefaultClickHandlerForFilterTab:function(d){a(".tabButtons .button").click(function(){a(".tabButtons .button").toggleClass("active");a(".filterResults").slideToggle(function(){k();var c={filterVisible:a(".filterResults").is(":visible")};
e.doPost({url:d,data:c})})})},toggleFilterTabLabel:k}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.filter=function(a,e,k,h,d,c){function f(){return{fromDate:a(y.formSelector+" [name\x3dfromDate]").val(),toDate:a(y.formSelector+" [name\x3dtoDate]").val(),fromAmount:a(y.formSelector+" [name\x3dfromAmount]").val(),toAmount:a(y.formSelector+" [name\x3dtoAmount]").val(),filterVisible:a(y.formSelector).is(":visible")}}function l(){var a=p(A);e.doPost({url:y.applyFiltersUrl,data:a,success:cssNamespace.pkportal.filterResultsTable.updateResultView})}function g(){var b={filterVisible:a(y.formSelector).is(":visible")};
e.doPost({url:y.resetFiltersUrl,data:b,success:cssNamespace.pkportal.filterResultsTable.updateResultView})}function b(){u.resetForm();a(r)[0].reset();d.removeValidationClasses(r);x()}function m(b,c){if(1<a(r+" [name\x3d"+b+"]").length)throw Error("expected to only match one input field with given selector: "+r+" [name\x3d"+b+"]");a(r+" [name\x3d"+b+"]").val(c)}function n(b){b=e.getValueForOptionalVariable(b,{});var g=d.getDefaultSettings(),f=c.getDefaultRules();b=a.extend(!0,{},g,f,b);u=a(r).validate(b)}
function p(b){var c={};a.each(b,function(b){c[b]="filterVisible"===b?a(y.formSelector).is(":visible"):a(y.formSelector+" [name\x3d"+b+"]").val()});return c}function t(c){r=e.getValueForOptionalVariable(c,".filterResults form");k.addDefaultClickHandlerForFilterTab(y.filterStateUrl);a(r+" .filterButtons .button.reset").click(b);a(r+" .fromDate").pickadate(w);a(r+" .toDate").pickadate(w);a(r).find("[placeholder]").each(function(){a(this).placeholder()})}var w={format:"dd.mm.yyyy",min:new Date(function(){var a=
(new Date).getFullYear()-5;return 2012>a?2012:a}(),0,1),max:new Date,selectYears:!0,onClose:function(a){this.$node.focusout()}},u=null,r="",x=a.noop,A={},y={};return{initDefaults:t,enableFormValidation:n,addPostFormResetHandler:function(a){x=a},resetForm:b,updateFilterState:function(b){if(b.hasOwnProperty("filterVisible")){var c=a(r).is(":visible");if(c&&!b.filterVisible||!c&&b.filterVisible)a("UL.tabButtons BUTTON.button").addClass("active"),a(".filterResults").slideToggle(),k.toggleFilterTabLabel()}delete b.filterVisible;
a.each(b,m)},updateLeistungsErbringer:function(b,c){if(0<b.length){var d=a(y.formSelector+" [name\x3dleistungserbringerNr]");d.empty();d.append(a("\x3coption /\x3e").val("").text(y.allLeistungserbringerLabel));a.each(b,function(){d.append(a("\x3coption /\x3e").val(this.partnerNr).text(this.name))});d.val(c)}},updateStatusSelection:function(b,c){if(0<b.length){var d=a(y.formSelector+" [name\x3dstatus]");d.empty();d.append(a("\x3coption /\x3e").val("").text(y.allStatusesLabel));a.each(b,function(){d.append(a("\x3coption /\x3e").val(this.value).text(this.label))});
"undefined"!==typeof c&&d.val(c)}},initApplyFilters:function(b){y=b;"undefined"!==typeof y.additionalFilterValues?(b=y.additionalFilterValues,A=a.extend(f(),b)):A=f();t(y.formSelector);n({submitHandler:l});x=g},getFilterDefaultValues:f}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.filterTab,cssNamespace.pkportal.filterResultsTable,cssNamespace.pkportal.filterValidationSettings,cssNamespace.pkportal.filterValidationRules);
cssNamespace.pkportal.filterResultsTableSorting=function(a,e,k){var h={};return{initSelectedSortColumn:function(d){a(h.tableSelector+":not(.nonSortable) thead tr th").each(function(){a(this).find("span.down").removeClass("selected").show();a(this).find("span.up").removeClass("selected").show()});var c="#"+h.sortParamsPrefix+d.property;"DESC"===d.direction?(a(c).find("span.down").removeClass("selected").show(),a(c).find("span.up").addClass("selected").hide()):(a(c).find("span.down").addClass("selected").hide(),
a(c).find("span.up").removeClass("selected").show())},initSort:function(d){h=d;a(h.tableSelector+":not(.nonSortable) thead tr th").click(function(){var c=a(this).attr("id");if(void 0!==c){c=c.replace(h.sortParamsPrefix,"").toUpperCase();var d=a(this).find("span.down").hasClass("selected");a(this).find("span.up").hasClass("selected");var l={};l.type=c;l.direction=d?"DESC":"ASC";e.doPost({url:h.sortUrl,data:l,success:cssNamespace.pkportal.filterResultsTable.updateResultView})}})}}}(jQuery,cssNamespace.pkportal.utils,
cssNamespace.pkportal.filterResultsTable);
cssNamespace.pkportal.filterResultsTable=function(a,e,k,h,d){function c(b){e.getValueForOptionalVariable(b,l);a(l+" tbody").loadTemplate("#noResultsTableRowTemplate")}function f(b){0<b.result.entries.length?(a(l+" tbody").loadTemplate(g.tableTemplate,b.result.entries),g.updateResultViewCallback&&g.updateResultViewCallback()):c();h.doPaging(b,f);"undefined"!==typeof b.searchParams.filter&&k.updateFilterState(b.searchParams.filter);b.searchParams.leistungsErbringer&&k.updateLeistungsErbringer(b.searchParams.leistungsErbringer,
b.searchParams.filter.leistungserbringerNr);b.searchParams.statuses&&k.updateStatusSelection(b.searchParams.statuses,b.searchParams.filter.status);void 0!==b.searchParams.sortOrder&&d.initSelectedSortColumn(b.searchParams.sortOrder);a("td.buttons button.detailsButton").each(function(){var b=a(this).prev("span.detailsLink").text();0<b.length&&(a(this).show(),a(this).click(function(){e.windowLocationHref(b)}))})}var l=".tableView table.generalTable",g={};return{init:function(a,c){l=e.getValueForOptionalVariable(a,
".tableView table.generalTable");g=c;a={tableSelector:l,sortParamsPrefix:g.sortParamsPrefix,sortUrl:g.sortUrl};k.initApplyFilters({formSelector:g.formSelector,applyFiltersUrl:g.applyFiltersUrl,resetFiltersUrl:g.resetFiltersUrl,filterStateUrl:g.filterStateUrl,allLeistungserbringerLabel:g.allLeistungserbringerLabel,allStatusesLabel:g.allStatusesLabel,additionalFilterValues:g.additionalFilterValues});h.initWithDefaults();d.initSort(a);e.doPost({url:g.currentResultsUrl,success:f})},updateResultView:f,
showNoResultsMessage:c}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.filter,cssNamespace.pkportal.pager,cssNamespace.pkportal.filterResultsTableSorting);
cssNamespace.pkportal.flippy=function(a,e){return{init:function(k){function h(){switch(w){case "timeline":var b="currentAnimation"+m.find(".teaserAnimation").closest(".row").attr("alt");m.find(".teaserAnimation").attr("id",b);a("#"+b).startPieAnimation();m.find(".teaserAnimation").closest(".row").find(".countUpToValue").startCountAnimation();break;case "kvgvvg":a("#kvgvvgTeaser .countUpToValue").startCountAnimation();break;case "settledFranchise":b=parseInt(a(".franchise_remaining").first().text(),
10);var c=parseInt(a(".franchise_available").first().text(),10),d=a(a(".franchise_currency")[0]).text();a("#franchise_graphic").data("currency",d);a("#franchise_graphic").data("maxvalue",c);a("#franchise_graphic").data("customervalue",b);a("#franchise_graphic").startDonutAnimation();a(".settledFranchiseTeaser .countUpToValue").startCountAnimation();a("#franchise_graphic").find("svg").on("click",function(){a(".settledFranchiseTeaser").find(".lastLine.link")[0].click()});break;case "providedLeistungen":m.find("#css_balance").startBarAndCountAnimation(),
m.find("#customer_balance").startBarAndCountAnimation(),m.find("#uninsured_costs").startBarAndCountAnimation()}}function d(){m.find(".paymentBar").each(function(b,c){"true"===a(c).find(".isInner").attr("alt")?a(c).find(".outerDescription").hide():a(c).find(".innerDescription").hide()});m.find(".paymentBar .bar").each(function(){a(this).outerWidth(a(this).attr("alt"))})}function c(c){b.find(c).each(function(){"undefined"!==typeof a(this).data("initial-animation-value")&&b.is(".preview")&&a(this).text(a(this).data("initial-animation-value"))})}
function f(){c(".paymentBar .innerDescription, .paymentBar .outerDescription");b.find(".paymentBar .bar").each(function(){"undefined"!==typeof a(this).data("initial-animation-value")&&b.is(".preview")&&a(this).outerWidth(a(this).data("initial-animation-value"))})}var l=k.openButton,g=k.closeButton,b=k.$flipboxParent,m=k.$flipbox,n=k.$afterFlipElement,p=k.duration,t=k.flipDirection,w=k.componentName,u={direction:t,light:0,duration:p,verso:function(){return n.html()},onMidway:function(){b.removeClass("preview");
b.show()},onReverseMidway:function(){b.addClass("preview");"timeline"!==w&&"settledFranchise"!==w||m.find(".teaserAnimation").removeAttr("id")},onFinish:function(){h()},onReverseFinish:function(){d()}},r=e.createDeepCopy(u);(function(){(function(){a.extend(!0,r,{color_target:"#f2f2f2",onStart:function(){if(u.hasOwnProperty("onStart"))u.onStart();a("html.ie9").length&&"LEFT"===t&&(m.data("pre-right",m.css("right")),m.css("right",m.width()+"px"));a("html.ie8, html.ie9").length&&(b.data("pre-height",
b.height()),b.animate({height:n.height()+"px"},p))},onReverseStart:function(){if(u.hasOwnProperty("onReverseStart"))u.onReverseStart();a("html.ie9").length&&"LEFT"===t&&m.css("right",m.width()+"px");a("html.ie8, html.ie9").length&&b.animate({height:b.data("pre-height")+"px"},p)},onFinish:function(){if(u.hasOwnProperty("onFinish"))u.onFinish();a("html.ie9").length&&"LEFT"===t&&m.css("right",m.data("pre-right"))},onReverseFinish:function(){if(u.hasOwnProperty("onReverseFinish"))u.onReverseFinish();
a("html.ie9").length&&"LEFT"===t&&m.css("right",m.data("pre-right"))}})})();(function(){a("html.ie7").length&&(b.find(l).click(function(){b.data("pre-height",b.height());b.animate({height:n.height()+"px"},p);n.fadeIn(p)}),n.find(g).click(function(){b.animate({height:b.data("pre-height")+"px"},p);n.fadeOut(p)}))})();a("html.ie8, html.ie9").length&&(m.addClass("ieBackgroundFix"),b.find(l).parent().addClass("ieBackgroundFix"))})();(function(){a("html.ie7").length||(b.on("click",g,function(){m.flippyReverse()}),
b.on("click",l,function(){c(".countUpToValue");f();m.flippy(r)}))})()}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.popup=function(){function a(){$("a[href]").each(function(){var a=$(this).attr("href"),d=-1!==a.indexOf("/popups/"),e="/"===a.charAt(0),g=-1!==a.indexOf("css.ch")||-1!==a.indexOf("sanagate.ch");a&&d&&(e||g)&&$(this).addClass("openLinkInPopup")})}function e(){$("body").on("click",".openLinkInPopup",function(a){k($(this).attr("href"));a.preventDefault()});$("body").on("click",".popupContainer .close-X",function(a){d()})}function k(a,d){h($("\x3cdiv\x3e\x3c/div\x3e").load(a),d)}
function h(a,f){var c=$(window).height(),g=.2*c,b=.2*c,e=c-g-b+"px";f=f||700;a.css("maxHeight",c-g-b-40+"px");a.css("overflow","auto");a.css("margin","20px");$.blockUI({message:a,onBlock:function(){$(".blockUI.blockOverlay").one("click",d)},css:{border:"none","border-radius":"10px",cursor:"auto",textAlign:"inherit",boxShadow:"2px 2px 15px rgba(0, 0, 0, 0.3)",top:"20%","max-height":e,width:f+"px",left:"50%",marginLeft:f/2*-1+"px"},overlayCSS:{opacity:.5,cursor:"default"}})}function d(){$.unblockUI()}
$(document).ready(function(){a();e()});return{open:k,openElement:h,close:d,getPopupLinkClass:function(){return"openLinkInPopup"}}}(jQuery);cssNamespace.pkportal.print=function(a){return{init:function(){a(".printButton .button:has(.print), .printButton.button:has(.print)").click(function(a){a.preventDefault();window.print()})}}}(jQuery);
cssNamespace.pkportal.teaser=function(a,e,k){return{addClickHandlersToTeaserPopup:function(){var e={openButton:"button.teaserDetailButton",closeButton:".close-X",$flipboxParent:a("button.teaserDetailButton").parents(".teaserPopup.preview"),$flipbox:a("button.teaserDetailButton").parents(".flipbox"),$afterFlipElement:a("button.teaserDetailButton").parents(".teaserPopup.preview").next(".teaserPopup"),duration:300,flipDirection:"LEFT",componentName:a("button.teaserDetailButton").parents(".teaserComponent").data("teasertype")};
k.init(e)},updateTeaser:function(a,d,c,f){var l={};l.teaserType=c;void 0!==f&&(l.year=f);e.doPost({url:a,data:l,success:d})},addCountUpToValueTeaserPreview:function(){a(".teaserPopup.preview .countUpToValue").startCountAnimation()}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.flippy);
cssNamespace.pkportal.backbutton=function(a,e){function k(c){c.backButtonUrl?a(".backButton").attr("href",c.backButtonUrl):a(".backButton").hide()}var h,d;return{init:function(a,f){h=a;d=f;a={};a.origin=d;e.doPost({url:h,data:a,success:k})}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.swissidusersettings=function(a,e,k,h,d){function c(a){var b="?language\x3d"+d.getLanguage();k.doRestApiCallWithoutMandant("swissid/status"+b,"GET",null,{contentType:"application/json"}).then(function(b){if(b&&b.accountTrennenUrl&&b.accountVerknuepfenUrl){if(b.verknuepft?(p=b.accountTrennenUrl,w.hide(),u.show()):(p=b.accountVerknuepfenUrl,u.hide(),w.show()),t.removeClass("hidden"),a){var c=n.connectSwissIdRequestStatus;"success"===c&&b.verknuepft?e.populateSystemMessages([n.connectSwissIdSuccessMessage],
"usersettingswissidconnectsuccessmessage","green"):"failure"===c?e.populateSystemMessages([n.connectSwissIdErrorMessage],"usersettingswissidconnecterrormessage","red"):"duplicated"===c&&e.populateSystemMessages([n.connectSwissIdDuplicatedMessage],"usersettingswissidconnectduplicatedmessage","red")}}else f()},function(){f()})}function f(){e.populateSystemMessages([n.swissIdGetStatusErrorMessage],"usersettingswissidstatusserrormessage","red");t.addClass("hidden")}function l(){g();k.doUrlRestApiCall(p,
"GET",null,{contentType:"application/json"}).then(function(){c(!1);e.populateSystemMessages([n.disconnectSwissIdSuccessMessage],"usersettingswissiddisconnectsuccessmessage","green")},function(){e.populateSystemMessages([n.disconnectSwissIdErrorMessage],"usersettingswissiddisconnecterrormessage","red")})}function g(){e.removeSystemMessage("usersettingswissiddisconnecterrormessage");e.removeSystemMessage("usersettingswissiddisconnectsuccessmessage");e.removeSystemMessage("usersettingswissidconnecterrormessage");
e.removeSystemMessage("usersettingswissidconnectsuccessmessage");e.removeSystemMessage("usersettingswissidconnectduplicatedmessage")}function b(){a("body").on("click",".swissIdPopup .cancel",function(){h.close()})}function m(){a("body").on("click",".swissIdPopup .accept",function(){l();h.close()})}var n={swissIdGetStatusErrorMessage:"",connectSwissIdSuccessMessage:"",connectSwissIdErrorMessage:"",disconnectSwissIdSuccessMessage:"",disconnectSwissIdErrorMessage:"",connectSwissIdRequestStatus:"",connectSwissIdDuplicatedMessage:""},
p="",t,w,u;return{init:function(d){n=d;t=a(".swissidSettings");w=a("#connectSwissid");u=a("#disconnectSwissid");g();c(!0);b();m()},connectSwissId:function(){window.location.href=p},disconnectSwissIdShowPopup:function(){h.openElement(a(".swissIdPopup"),500)}}}(jQuery,cssNamespace.pkportal.systemMessage,cssNamespace.pkportal.restService,cssNamespace.pkportal.popup,cssNamespace.pkportal.context);
cssNamespace.pkportal.swissidlogin=function(a,e){function k(a){for(var c=window.location.search.substring(1).split("\x26"),d=0;d<c.length;d++){var g=c[d].split("\x3d");if(g[0]==a)return g[1]}}function h(c){e.populateSystemMessages([c],"systemMessageSwissID","red");setTimeout(function(){50<a(document).scrollTop()&&a("html, body").animate({scrollTop:"0px"},1E3)},300)}var d;return{init:function(a,f){d=a;try{var c="true"===sessionStorage.getItem("SWISS_ID_LOGIN");var g=k("error"),b=k("message");c&&g&&
"loginpage.login-failed"===b&&h(f)}finally{sessionStorage.removeItem("SWISS_ID_LOGIN")}},start:function(){sessionStorage.setItem("SWISS_ID_LOGIN","true");window.location.href=d}}}(jQuery,cssNamespace.pkportal.systemMessage);
cssNamespace.pkportal.swissidbutton=function(a,e,k){return{init:function(h,d){a("#"+h).click(function(a){if(d)switch(a.preventDefault(),d){case "start":k.start();break;case "connect":e.connectSwissId();break;case "disconnect":e.disconnectSwissIdShowPopup();break;default:console.log("swissidbutton: provided action "+d+" not handled")}}).bind("contextmenu",function(){return!1})}}}(jQuery,cssNamespace.pkportal.swissidusersettings,cssNamespace.pkportal.swissidlogin);
cssNamespace.pkportal.googleMaps=function(a,e,k){function h(a,d){for(var c=[].slice.call(arguments).splice(2),g=a.split("."),b=g.pop(),e=0;e<g.length;e++)d=d[g[e]];return d[b].apply(this,c)}var d=!1;return{createDefaultMapWithCenteredMarker:function(c,d,e,g){a("#"+c).length&&"undefined"!==typeof google&&(d=new google.maps.LatLng(d,e),e={zoom:15,center:d,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,zoomControl:!1,fullscreenControlOptions:{streetViewControl:!0,zoomControl:!0}},
c=new google.maps.Map(document.getElementById(c),e),new google.maps.Marker({position:d,map:c,title:g}))},loadScript:function(a,f){if(!1===d){var c=document.createElement("script");c.type="text/javascript";c.src=e.getProtocol()+"://"+f+"\x26language\x3d"+k.getLanguage()+"\x26callback\x3d"+a;document.body.appendChild(c);d=!0}else h(a,window,arguments)}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.context);
$(document).ready(function(){$("A.backToTop").on("click",function(a){a.preventDefault();$("HTML, BODY").animate({scrollTop:0},500)})});
cssNamespace.pkportal.timeline_uistate=function(a,e){function k(a){var c={};c.record=a;e.doPost({url:h.removeCurrentDetailsRecordUrl,data:c})}var h={};return{init:function(a,c,e,l,g,b){h.addMonthUrl=a;h.removeMonthUrl=c;h.addDetailsRecordUrl=e;h.removeDetailsRecordUrl=l;h.addCurrentDetailsRecordUrl=g;h.removeCurrentDetailsRecordUrl=b},addMonth:function(a){var c={};c.month=parseInt(a,10);e.doPost({url:h.addMonthUrl,data:c})},removeMonth:function(a){var c={};c.month=parseInt(a,10);e.doPost({url:h.removeMonthUrl,
data:c})},addDetailsRecord:function(a){var c={};c.record=a;e.doPost({url:h.addDetailsRecordUrl,data:c})},removeDetailsRecord:function(a){var c={};c.record=a;e.doPost({url:h.removeDetailsRecordUrl,data:c})},addCurrentDetailsRecord:function(a){var c={};c.record=a;e.doPost({url:h.addCurrentDetailsRecordUrl,data:c})},removeCurrentDetailsRecord:k,initializeSelectedMonths:function(d){if(0<d.length)for(var c=0;c<d.length;c++)a(".monthName").filter('*[alt\x3d"'+d[c]+'"]').parent().click();else a("#timelineDetails .monthSelector").first().click()},
inializeSelectedRecords:function(d){for(var c=0;c<d.length;c++)a(".row").filter('*[alt\x3d"'+d[c]+'"]').find(".button:has(.image.details)").click()},initializeCurrentDetailsRecord:function(d){void 0!==d&&(setTimeout(function(){a("html, body").animate({scrollTop:a('*[alt\x3d"'+d+'"]').offset().top},"slow")},1E3),k(d))}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.timeline=function(a,e,k,h){function d(){a(".auswertungen .timeline .previewRow").each(function(){var b={openButton:".previewRow",closeButton:".close-X",$flipboxParent:a(this).parents(".teaserPopup.preview"),$flipbox:a(this).parents(".flipbox"),$afterFlipElement:a(this).parents(".teaserPopup.preview").prev(".teaserPopup"),duration:n.animationDuration,flipDirection:"TOP",componentName:"timeline"};k.init(b)})}function c(){a("#timelineDetails .previewRow").off("click","**");a("#timelineDetails").on("click",
".previewRow",function(){var b=a(this).closest(".row").attr("alt");h.addDetailsRecord(b)});a("#timelineDetails .close-X").off("click","**");a("#timelineDetails").on("click",".close-X",function(){var b=a(this).closest(".row").attr("alt");h.removeDetailsRecord(b)})}function f(){a(".auswertungen .timeline .monthSelector").click(function(){var b=a(this).find(".monthName").attr("alt");a(this).hasClass("selected")?(h.removeMonth(b),a(this).removeClass("selected").addClass("unselected"),a(this).find(".plusMinus").text("+"),
b=a(this).next(".rows").find(".teaserPopup:not(.preview) .flipbox .close-X"),b.click(),null!==b&&0<b.length?a(this).next(".rows").delay(n.animationDuration+300).slideToggle():a(this).next(".rows").slideToggle()):(h.addMonth(b),a(this).removeClass("unselected").addClass("selected"),a(this).find(".plusMinus").html("\x26ndash;"),a(this).next(".rows").slideToggle())})}function l(e){a("#timelineDetails").empty();var l=e.data;e=e.uiState;0<l.timeline_summary.length?(a("#timeline .noResults").hide(),l.is_grouped_by_month?
(a("#timelineDetails").loadTemplate("#monthTemplate",l.timeline_summary,{beforeInsert:m}),f(),h.initializeSelectedMonths(e.selected_months)):(a("\x3cdiv/\x3e").addClass("rows").appendTo("#timelineDetails"),a("#timelineDetails .rows").loadTemplate("#costDistributionTemplate",l.timeline_summary,{beforeInsert:m})),d(),h.inializeSelectedRecords(e.selected_results),c(),h.initializeCurrentDetailsRecord(e.details_record),a("#timelineDetails .bar").each(function(b,c){b=a(c).attr("alt");a(c).css("width",b)})):
a("#timeline .noResults").show();g();b();0!==a("#timelineDetails .paymentBar").length&&a("#timelineDetails .paymentBar").startBarAndCountAnimation()}function g(){a("#timelineDetails").on("click",".detailRechnung",function(){var b=a(this).closest(".row").attr("alt");h.addCurrentDetailsRecord(b);void 0!==a(this).attr("alt")&&(window.location.href=a(this).attr("alt"))})}function b(){a("#timelineDetails .paymentBar").each(function(b,c){"true"===a(c).find(".isInner").attr("alt")?a(c).find(".outerDescription").hide():
a(c).find(".innerDescription").hide()})}function m(b){b.find(".detailRechnung").each(function(){void 0===a(this).attr("alt")&&a(this).hide()})}var n={};return{init:function(a,b,c,d,e,g,f){n.timelineUrl=a;h.init(b,c,d,e,g,f);n.animationDuration=300},refresh:function(a){var b={};b.year=a;e.doPost({url:n.timelineUrl,data:b,success:l})}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.flippy,cssNamespace.pkportal.timeline_uistate);
cssNamespace.pkportal.lsvAntrag=function(a,e){function k(h){e.doPost({url:h,success:function(d){if(void 0!==d.showComponent&&d.showComponent){d=a("#lsvAntragContainer .dataContainer");var c=a("#lsvAntragTemplate");d.loadTemplate(c,{})}else d=a("#lsvAntragContainer"),d.hide(),d.parents(".section").prev(".section").find(".dottedLine").last().remove()}})}return{init:function(a){k(a)}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.pramienabrechungen=function(a,e,k){function h(){var c,d;a(".praemienabrechnungenTable td.documentId").each(function(){if(a(this).attr("dokumentgeladen"))if("true"===a(this).attr("dokumentgeladen")){var e=a('\x3cspan class\x3d"image pdfDownload"\x3e\x3c/span\x3e');a(this).find("a").append(e);a(this).find("a").click(function(){cssNamespace.tracking.trackCustomDownloadWithCategory(s,this,a(this).attr("href"),"Praemienrechnungen")})}else c=a.trim(a(".generalTable").data("documentnotavailabletext")),
d=a('\x3cdiv class\x3d"tooltipText"\x3e\x3ca class\x3d"hasTooltip documentNotAvailable"\x3e\x3c/a\x3e\x3cdiv class\x3d"tooltipContent"\x3e\x3cp\x3e'+c+"\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e"),a(this).append(d);else c=a.trim(a(".generalTable").data("nodocumentnrtext")),d=a('\x3cdiv class\x3d"tooltipText"\x3e\x3ca class\x3d"hasTooltip"\x3e\x3c/a\x3e\x3cdiv class\x3d"tooltipContent"\x3e\x3cp\x3e'+c+"\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e"),a(this).append(d)})}var d={};return{initilizeComponent:function(c,f,
l,g,b,m,k){d.resetFiltersUrl=c;d.applyFiltersUrl=f;d.currentResultsUrl=l;d.documentDownloadUrl=g;d.filterStateUrl=b;d.sortUrl=m;d.allStatusesLabel=k;d.tableTemplate="#pramienabrechnungenTableTemplate";d.sortParamsPrefix="praemienabrechung_";d.formSelector="#filters_form";d.additionalFilterValues={invoiceNumber:a("#filters_form [name\x3dinvoiceNumber]").val(),status:a("#filters_form [name\x3dstatus]").val()};d.updateResultViewCallback=h;e.init(".praemienabrechnungenTable",d)},setNumberParamAndUrlFrageRechnung:function(c){a(".question").each(function(){var d=
a(this).parent("tr").find("td SPAN.nid").text();a(this).find(".imageOnly").click(function(){k.windowLocationReplace(""+c+".step_ENTERQUESTION.html?nid\x3d"+d)})})}}}(jQuery,cssNamespace.pkportal.filterResultsTable,cssNamespace.pkportal.utils);
cssNamespace.pkportal.teaser.kvgvvg=function(a,e){function k(c){c.show_teaser?(a.each(c,function(c,d){a("#kvgvvgTeaser .teaser [data-content\x3d"+c+"]").text(d)}),a("#kvgvvgTeaser").show()):a("#kvgvvgTeaser").hide();e.addCountUpToValueTeaserPreview()}function h(a){e.updateTeaser(d.teaserUrl,k,d.teaserType,a)}var d={};return{init:function(a,f,l){d.teaserUrl=a;d.teaserType=f;e.addClickHandlersToTeaserPopup();h(l)},refresh:h}}(jQuery,cssNamespace.pkportal.teaser);
cssNamespace.pkportal.pendingAnliegenAndLeadMessagesCounter=function(a){function e(){a.doPostWithoutKeepAliveReset({url:c,success:k})}function k(a,c,b){f=a;$.each(h,function(b,c){c(a)})}var h=[],d=!1,c,f;return{update:e,registerUpdateHandler:function(a){h.push(a);f&&a(f)},initAndUpdate:function(a){d||(d=!0,c=a,setInterval(e,3E5),e())}}}(cssNamespace.pkportal.utils);
cssNamespace.pkportal.newNotificationsCounter=function(a){function e(){f.updateUrl?a.doPostWithoutKeepAliveReset({url:f.updateUrl,success:k}):console.log("No updateUrl, check initAndUpdate call")}function k(a){c=a;$.each(h,function(c,b){b(a)})}var h=[],d=!1,c,f={updateUrl:"",markAsDisplayedUrl:""};return{update:e,registerUpdateHandler:function(a){h.push(a);c&&a(c)},initAndUpdate:function(a){d||(d=!0,f=a,setInterval(e,3E5),e())},resetNewNotificationsCounter:function(){return new Promise(function(c,
d){f.markAsDisplayedUrl?a.doPost({url:f.markAsDisplayedUrl,complete:c}):(console.log("No markAsDisplayedUrl, check initAndUpdate call"),d())})}}}(cssNamespace.pkportal.utils);
cssNamespace.pkportal.teaserAndTabbingAnliegenLeadMessages=function(a,e,k){function h(d){var c=0<d.nrUnreadMessagesTotal?"orange":"green",e=0<d.nrUnreadLeadMessages?"orange":"green";a(".anliegenMitteilungen .tabbing .numberOfNewAnliegen").addClass(c).text(d.nrUnreadMessagesTotal).fadeIn();a(".anliegenMitteilungen .tabbing .numberOfNewMitteilungen").addClass(e).text(d.nrUnreadLeadMessages).fadeIn();a("#anliegenMitteilungenTeaser .numberOfNewAnliegen").text(d.nrUnreadMessagesTotal);a("#anliegenMitteilungenTeaser .numberOfNewMitteilungen").text(d.nrUnreadLeadMessages);
a("#anliegenMitteilungenTeaser").fadeIn()}return{init:function(){k.registerUpdateHandler(h)}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.pendingAnliegenAndLeadMessagesCounter);
cssNamespace.pkportal.leistungsabrechnungen=function(a,e,k){function h(){a(".leistungsabrechnungenTable td.documentId").each(function(){if("true"===a(this).attr("hasDocument"))if(a(this).find("a").length){var c=a('\x3cspan class\x3d"image pdfDownload"\x3e\x3c/span\x3e');a(this).find("a").append(c);a(this).find("a").click(function(){cssNamespace.tracking.trackCustomDownloadWithCategory(s,this,a(this).attr("href"),"Leistungsabrechnungen")})}else c=a.trim(a(".generalTable").data("documentnotavailabletext")),
c=a('\x3cdiv class\x3d"tooltipText"\x3e\x3ca class\x3d"hasTooltip documentNotAvailable"\x3e\x3c/a\x3e\x3cdiv class\x3d"tooltipContent"\x3e\x3cp\x3e'+c+"\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e"),a(this).append(c)})}var d={};return{initilizeComponent:function(c,f,l,g,b,m,n){d.resetFiltersUrl=c;d.applyFiltersUrl=f;d.currentResultsUrl=l;d.documentDownloadUrl=g;d.filterStateUrl=b;d.sortUrl=m;d.allStatusesLabel=n;d.tableTemplate="#leistungsabrechnungenTableTemplate";d.sortParamsPrefix="leistungsabrechnungen_";
d.formSelector="#filters_form";d.additionalFilterValues={invoiceNumber:a("#filters_form [name\x3dinvoiceNumber]").val(),status:a("#filters_form [name\x3dstatus]").val()};d.updateResultViewCallback=h;k.init(".leistungsabrechnungenTable",d);e.init()},setNumberParamAndUrlFrageRechnung:function(c){a(".question").each(function(){var d=a(this).parent("tr").find("td SPAN.nid").text();a(this).find(".imageOnly").click(function(){window.location.replace(""+c+".step_ENTERQUESTION.html?nid\x3d"+d)})})}}}(jQuery,
cssNamespace.pkportal.print,cssNamespace.pkportal.filterResultsTable);
cssNamespace.pkportal.teaser.providedleistungen=function(a,e){function k(c,d){c=c[d];a("#"+d+" .bar").css("width",c.providedleistungen_percent);a("#"+d+" .bar").attr("alt",c.providedleistungen_percent);c.providedleistungen_show_inner?a("#"+d+" .innerDescription").text(c.providedleistungen_decimal):a("#"+d+" .outerDescription").text(c.providedleistungen_decimal);a("#"+d+" .alignRight").text(c.providedleistungen_percent_rounded)}function h(c,d){c=c[d];a("#"+d+" .value").text(c.providedleistungen_decimal)}
function d(c){c.providedleistungen_show_teaser?("table"===c.providedleistungen_teaser_type||"cockpit"===c.providedleistungen_teaser_type?(k(c,"css_balance"),k(c,"customer_balance"),k(c,"uninsured_costs"),a(".total .alignRight").html(c.providedleistungen_currency+' \x3cspan class\x3d"bold countUpToValue"\x3e'+c.providedleistungen_total+"\x3c/span\x3e"),a(".largeDisplay .currency").text(c.providedleistungen_currency),a(".largeDisplay .value").text(c.providedleistungen_total)):"auswertungen"===c.providedleistungen_teaser_type&&
(h(c,"css_balance"),h(c,"customer_balance"),h(c,"uninsured_costs"),a(".total .alignRight").html(c.providedleistungen_currency+' \x3cspan class\x3d"bold countUpToValue"\x3e'+c.providedleistungen_total+"\x3c/span\x3e")),c.providedleistungen_show_uninsured_costs?(a("#uninsured_costs").show(),a("#uninsured_costs").next(".separator").show()):(a("#uninsured_costs").hide(),a("#uninsured_costs").next(".separator").hide()),a("#kostenverteilung_graphic").empty(),a("#kostenverteilung_graphic").data("nvkvalue",
c.uninsured_costs.graphics_providedleistungen_decimal_num),a("#kostenverteilung_graphic").data("maxvalue",c.graphics_providedleistungen_total_num),a("#kostenverteilung_graphic").data("customervalue",c.customer_balance.graphics_providedleistungen_decimal_num),a("#css_balance .bar").data("width",c.css_balance.graphics_providedleistungen_decimal_num),a("#customer_balance .bar").data("width",c.customer_balance.graphics_providedleistungen_decimal_num),a("#uninsured_costs .bar").data("width",c.uninsured_costs.graphics_providedleistungen_decimal_num),
"auswertungen"===f.teaserType?(a("#kostenverteilung_graphic").startPieAnimation(),a("#kostenverteilung_graphic").parent().find(".countUpToValue").startCountAnimation()):a(".teaser").find(".countUpToValue").startCountAnimation(),a(".providedLeistungenTeaser").show()):a(".providedLeistungenTeaser").hide()}function c(a){e.updateTeaser(f.teaserUrl,d,f.teaserType,a)}var f={};return{init:function(a,d,b){f.teaserUrl=a;f.teaserType=d;"table"===d||""===d?(e.addClickHandlersToTeaserPopup(),c(b)):"cockpit"===
d&&c(b)},refresh:c}}(jQuery,cssNamespace.pkportal.teaser);
cssNamespace.pkportal.offertenuebersicht=function(a,e,k,h){function d(){a("body").on("click","#offertenueebersicht .generalTable thead tr th",function(){var d=a(this).attr("id");if(void 0!==d){d=d.replace("offertenueebersicht_","").toUpperCase();var b=a(this).find("span.down").hasClass("selected")?"DESC":"ASC";e.doPost({url:l.setSortUrl,data:{type:d,direction:b},success:c})}})}function c(c){0<c.result.length?a(".offertenueebersichtTable tbody").loadTemplate("#offertenuebersichtTableTemplate",c.result):
k.showNoResultsMessage();f();a("#offertenueebersicht .generalTable thead tr th").each(function(){a(this).find("span.down").removeClass("selected").show();a(this).find("span.up").removeClass("selected").show()});var b="#offertenueebersicht_"+c.searchParams.sortOrder.property;"DESC"===c.searchParams.sortOrder.direction?(a(b).find("span.down").removeClass("selected").show(),a(b).find("span.up").addClass("selected").hide()):(a(b).find("span.down").addClass("selected").hide(),a(b).find("span.up").removeClass("selected").show());
a("td.buttons button.detailsButton").click(function(){window.location.href=a(this).prev("span.detailsLink").text()})}function f(){"mysanagate"===h.getMandant()&&a(".offertenueebersichtTable td").each(function(){"myCSS"===a(this).text()&&a(this).text("mySanagate")})}var l={};return{initializeComponent:function(a,b,f){l.currentResultsUrl=a;l.setSortUrl=b;l.detailsUrl=f;d();e.doPost({url:l.currentResultsUrl,success:c})}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.filterResultsTable,cssNamespace.pkportal.context);
cssNamespace.pkportal.offertenuebersicht_details=function(a,e,k,h,d){function c(a){a.parent().find(".praemienZahlerHide").remove()}function f(b){b.persons&&0<b.persons.length&&a("#offertenuebersichtDetailsContainer").loadTemplate("#offertenuebersichtDetailsTableTemplate",b.persons,{afterInsert:c});a("#offerdetails-offer-number").text(b.offerNumber);a("#offerdetails-customer-number").text(b.customerNumber);a("#offerdetails-customer-name").text(b.customerName);a("#offerdetails-valid-from").text(b.validFrom);
a("#offerdetails-provider").text(b.provider);a("#offerdetails-channel").text(b.channel);"mysanagate"===d.getMandant()&&"myCSS"===b.channel&&a("#offerdetails-channel").text("mySanagate");a("#offerdetails-creation-date").text(b.creationDate);a("#offerTotalAmountValue").text(b.totalAmount);a("#offerTotalAmountCurrency").text(b.totalAmountCurrency);a("#offerdetails-offer-numberMobile").text(b.offerNumber);a("#offerdetails-customer-numberMobile").text(b.customerNumber);a("#offerdetails-customer-nameMobile").text(b.customerName);
a("#offerdetails-valid-fromMobile").text(b.validFrom);a("#offerdetails-providerMobile").text(b.provider);a("#offerdetails-channelMobile").text(b.channel);a("#offerdetails-creation-dateMobile").text(b.creationDate);a("#offerTotalAmountValueMobile").text(b.totalAmount);a("#offerTotalAmountCurrencyMobile").text(b.totalAmountCurrency);if(b.downloadDocumentUrl)a("#offerDetailsPDF").on("click",function(){cssNamespace.tracking.trackCustomDownloadWithCategory(s,this,b.downloadDocumentUrl,"Offerte");location.href=
b.downloadDocumentUrl});else a("#offerDetailsPDF").hide();a("#offerContact a").attr("href",a("#offerContact a").attr("href")+"\x26nid\x3d"+b.policeNr);h.optimizeTablesForReadability("#offerdetails ")}function l(){a("#offerContact").on("click",function(){a("#offerContact").find(".text.link")[0].click()})}var g,b;a.addTemplateFormatter("hideShowFormatter",function(a){return"undefined"===typeof a.label?"praemienZahlerHide":"praemienZahlerShow"});return{initializeComponent:function(a,c){g=a;b=c;e.doPost({url:g,
data:{offerNumber:b},success:f});l()}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.filterResultsTable,cssNamespace.pkportal.styleOptimizer,cssNamespace.pkportal.context);
cssNamespace.pkportal.futurePolicy=function(a,e){function k(){var c=a(".futurePolicyTeaser .link.moreLink"),d=a(".futurePolicyTeaser").find(".teaserPopup"),e="";a("#morePolicies").is(":visible")?(e=c.data("more-policies"),d.find(".teaser").removeClass("shadowBox"),d.find(".teaser").addClass("noShadowBox"),c.removeClass("up"),c.addClass("down")):(e=c.data("less-policies"),d.find(".teaser").addClass("shadowBox"),d.find(".teaser").removeClass("noShadowBox"),c.addClass("up"),c.removeClass("down"));a("#morePolicies").slideToggle(500,
function(){c.text(e)})}function h(a){a.parent().find(".pdfButtonHide").remove()}function d(d){null===d.firstFuturePolicy||a.isEmptyObject(d)||(a(".futurePolicyTeaser").show(),a("#firstFuturePolicy").loadTemplate("#futurePolicyTemplate",d.firstFuturePolicy,{afterInsert:h,success:c}),d.showOtherPolicies?(a("#morePoliciesLink").show(),a("#morePolicies").loadTemplate("#futurePolicyTemplate",d.otherFuturePolicies,{afterInsert:h,success:c})):a("#morePoliciesLink").hide())}function c(){a(".pran-link").on("click",
function(){var c=a(this),d=c.attr("href");cssNamespace.tracking.trackCustomLinkAction("pkPortal","Policen","click",c.data("documentnr"));e.windowLocationHref(d);return!1})}a.addTemplateFormatter("cssNamespace.pkportal.futurepolicy.hideShowButtonFormatter",function(c){var d=a(this).attr("class");d=e.isBlank(d)?"":d+" ";return!0===c.showPdfButton?d+"pdfButtonShow":d+"pdfButtonHide"});return{showHideMore:k,init:function(c){a(".futurePolicyTeaser .link.moreLink").click(k);e.doPost({url:c,success:d})}}}(jQuery,
cssNamespace.pkportal.utils);
cssNamespace.pkportal.fileupload=function(a,e){function k(b){b=a(b);var c=b.parent(".fileEntry"),d=c.find("input[name\x3d'fileupload_id']").val();b.off("click.fileupload");e.doPost({url:q.urlDeleteFile,data:{fileId:d},success:function(a){a.success&&(r(c),n(l(c)).filecount--)},error:function(c){b.on("click.fileupload",function(){k(a(this),a(this).parents(".fileUploadContainer"))})}})}function h(b,d,e,g){var f=b+" ("+Math.round(d/1024)+" KB)",h=a("\x3cdiv/\x3e",{"class":"fileEntry"});a("\x3cdiv/\x3e",
{"class":"removeFile",alt:q.labelRemove,title:q.labelRemove}).on("click.fileupload",function(){k(a(this),a(this).parents(".fileUploadContainer"))}).appendTo(h);a("\x3cinput/\x3e",{name:"fileupload_name",type:"hidden",value:b}).appendTo(h);a("\x3cinput/\x3e",{name:"fileupload_size",type:"hidden",value:d}).appendTo(h);a("\x3cinput/\x3e",{name:"fileupload_id",type:"hidden",value:e}).appendTo(h);a("\x3cspan/\x3e",{"class":"fileinfo"}).text(f).appendTo(h);b=m(g).is(":empty");m(g).append(h);b&&c("onFirstFileAdded",
g);G(g);c("onFileAdded",g)}function d(b){if(!b.urlFileupload)throw Error("missing configuration urlFileupload");if(!b.urlDeleteFile)throw Error("missing configuration urlDeleteFile");if(!b.urlFetchExistingFiles)throw Error("missing configuration urlFetchExistingFiles");a.isNumeric(b.maxFileNumber)||delete b.maxFileNumber;a.isNumeric(b.maxUploadSize)||delete b.maxUploadSize;return b}function c(b,c){b=F[b];for(var d=0;d<b.length;d++)if(a.isFunction(b[d]))b[d](c)}function f(a,b){var c=F[a];if(!c)throw Error("event handler "+
a+" not supported");c.push(b)}function l(b){return a(b).closest(".fileuploadComponent")}function g(a){return a.find(".fileUploadContainer")}function b(a){return a.find(".attachDocument")}function m(a){return a.find(".filelist")}function n(a){return g(a).data()}function p(a){return a.find("[name\x3dfilechooser_uploadkey]")}function t(a){a.find(".uploadErrorMessage").empty().hide()}function w(a){b(a).show()}function u(a){b(a).hide()}function r(b){var d=l(b);b.fadeOut(500,function(){a(this).remove();
m(d).is(":empty")&&!g(d).find(".text").is(":visible")&&c("onLastFileRemoved",d);c("onFileRemoved",d)});t(d)}function x(a){n(a).filecount>=q.maxFileNumber?u(a):w(a)}function A(b){b=b.find(".filechooser");if(1!==b.length)throw Error("component must have exactly one input.filechooser");b.on("click.fileupload",function(){var a=l(this);t(a)});b.fileupload(a.extend(O,{url:q.urlFileupload,dataType:"json",progressInterval:200}))}function y(a){a=b(a);if(1!==a.length)throw Error("component must have exactly one .attachDocument element");
a.on("click.fileupload",function(){l(this).find(".filechooser").click()})}function G(a){m(a).find(".fileEntry").length===n(a).filecount&&c("onLastFileAdded",a)}function E(a){0<n(a).filecount?G(a):c("onLastFileRemoved",a)}function C(b,c){var d=a("\x3cdiv\x3e").addClass("validationError").text(b);c.find(".uploadErrorMessage").append(d).show();b=new CustomEvent("event-impression-trigger",{detail:{eventCategory:"rechnungen",eventAction:"fehler",eventLabel:b}});document.body.dispatchEvent(b)}function H(b){var c=
a.format(q.errorMessages.sizeExceeded,Math.floor(q.maxUploadSize/Math.pow(1024,2)*10)/10);C(c,b)}var B=!1,q={labelRemove:"",restrictToOneUpload:!1,maxFileNumber:10,allowedFileTypes:"",maxUploadSize:41943040,urlFileupload:"",urlDeleteFile:"",urlFetchExistingFiles:"",errorMessages:{sizeExceeded:"",wrongFileType:"",tooManyFiles:"",generic:"",security:""}},F={onInitFinished:[function(a){var b={url:q.urlFetchExistingFiles,data:{uploadkey:p(a).val()},success:function(b){if(!0===b.success){b=b.uploadedFiles;
for(var c=0;c<b.length;c++){var d=b[c];h(d.fileName,d.fileSize,d.fileId,a)}}}};a.animatedPost(b)}],onFileAdded:[],onFileRemoved:[],onFirstFileAdded:[function(a){g(a).show()}],onLastFileAdded:[],onLastFileRemoved:[function(a){g(a).hide()}],fileuploaddone:[],fileuploadfail:[],fileuploadstart:[]},O={formData:function(a){return p(a).serializeArray()},add:function(b,c){var d=l(this);a.each(c.files,function(b,e){b=!0;var g=e.name;if(null===g.toLowerCase().match(q.allowedFileTypes)&&""!==g){b=!1;g=q.allowedFileTypes.split("|");
for(var f=[],h=0;h<g.length;h++)f.push(g[h].replace(/\W/g,""));g=a.format(q.errorMessages.wrongFileType,f.join(", "));C(g,d)}e=e.size;e=void 0===e?!0:e<=q.maxUploadSize;e||(b=!1,H(d));e=q.maxFileNumber&&0<q.maxFileNumber?n(d).filecount<q.maxFileNumber:!0;e||(b=!1,e=a.format(q.errorMessages.tooManyFiles,q.maxFileNumber),C(e,d));b&&(n(d).filecount++,c.submit())})},submit:function(b,c){b=l(this);c.progressbar=a("\x3cdiv\x3e",{"class":"progressbar"}).append(a("\x3cdiv\x3e",{"class":"status"}).append(a("\x3cspan\x3e",
{"class":"text"}))).appendTo(b.find(".progressbarcontainer"));g(b).fadeIn()},done:function(b,d){var e=l(this);a.each(d.result.files,function(a,b){c("fileuploaddone",e);0<b.error.length?("maxsizeexceeded"===b.error?H(e):C(q.errorMessages.generic,e),n(e).filecount--,E(e)):h(b.name,b.size,b.id,e);d.progressbar.remove()})},fail:function(a,b){a=l(this);c("fileuploadfail",a);403===b.jqXHR.status?C(q.errorMessages.security,a):C(q.errorMessages.generic,a);n(a).filecount--;E(a);b.progressbar.remove()},progress:function(a,
b){a=parseInt(b.loaded/b.total*100,10);a=Math.min(a,90)+"%";b.progressbar.find(".status").css("width",a);b.progressbar.find(".text").text(a)},start:function(a,b){a=l(this);c("fileuploadstart",a)}};return{configure:function(b){a.extend(q,d(b));q.restrictToOneUpload?(f("onFirstFileAdded",u),f("onLastFileRemoved",w)):0<q.maxFileNumber&&(f("onFileAdded",x),f("onFileRemoved",x));B=!0},registerHandler:f,init:function(a){if(!B)throw Error("can not init component before it is configured");A(a);y(a);c("onInitFinished",
a)},addToFileList:h,removeAll:function(a){m(a).find(".fileEntry .removeFile").each(function(){k(this)})}}}(jQuery,cssNamespace.pkportal.utils);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};
cssNamespace.pkportal.anliegen.helper=function(a,e,k){return{postErrorHandler:function(a,d,c){d=a.status.toString().charAt(0);a=a.responseJSON?a.responseJSON.errorMessageForService:[];"3"===d?k.windowLocationReload():a&&a[0]&&a[0].length&&e.populateSystemMessages(a,"errormessageforservice","red")}}}(jQuery,cssNamespace.pkportal.systemMessage,cssNamespace.pkportal.utils);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};
cssNamespace.pkportal.anliegen.anliegenNavigation=function(a,e,k){function h(){e.doPost({url:l.nextUrl,data:{stepName:l.stepName},success:function(a){a=a.forwardToConfirmationPage?l.confirmationUrl:b(a.stepName);m(a)},error:k.postErrorHandler})}function d(){e.doPost({url:l.previousUrl,data:{stepName:l.stepName},success:function(a){m(b(a.stepName))},error:k.postErrorHandler})}function c(a){e.doPost({url:l.cancelUrl,success:function(b){e.isBlank(a)&&(a=b.orginPath);m(a)},error:function(){a?m(a):k.postErrorHandler()}})}
function f(){a("body div#container").on("click.anliegen",function(b){b.preventDefault();b=b.target;b=b.href||a(b).parents("[href]").attr("href");e.isBlank(b)||c(b)});a(".mainWindow").on("click.anliegen",function(a){a.stopPropagation()})}var l={nextUrl:"",previousUrl:"",cancelUrl:"",confirmationUrl:"",pageName:"",stepName:""},g,b=function(a){return l.pageName+".step_"+a+".html?keepSessionData\x3dtrue"},m=function(a){window.location.href=a};return{init:function(e,k,t){l=e;void 0!==k&&(m=k);void 0!==
t&&(b=t);a("#prev").click(function(a){a.preventDefault();d()});a("#prevCancel").click(function(a){a.preventDefault();c()});a("#cancel").click(function(a){a.preventDefault();c()});a.isFunction(g)&&g(a('form[name\x3d"anliegenForm"]'),h);f()},registerStepValidationCallback:function(a){g=a}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.anliegen.helper);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};
cssNamespace.pkportal.anliegen.adressaenderung=cssNamespace.pkportal.anliegen.adressaenderung||{};
cssNamespace.pkportal.anliegen.adressaenderung.confirmNewAddress=function(a,e,k){function h(c){var e={url:cssNamespace.pkportal.anliegen.adressaenderung.confirmNewAddress.sendUrl,success:function(c){!0===c.success&&a.isFunction(d)&&d()},error:k.postErrorHandler};a(c).animatedPost(e)}var d=null;return{registerSubmit:function(a,e){d=e;a.on("submit",function(a){a.preventDefault();h(this)})}}}(jQuery,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.anliegen.helper);
cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.adressaenderung=cssNamespace.pkportal.anliegen.adressaenderung||{};
cssNamespace.pkportal.anliegen.adressaenderung.newAddressContainer=function(a,e,k,h,d){function c(b,c){if(!E||"CH"!==a("#"+b+"_country").val()||c)return!1;c=a("."+b+" .houseKey").val();if("legal"===b)return!(a("#isAlsoLegalAddress").is(":checked")||c);if("postal"===b)return!c;throw Error("prefix: "+b+" is not valid!");}function f(d){var e=a("#invalidAddressInfoBox").is(":visible"),g=a("#addressChecked").is(":checked"),f=c("postal",g),k=c("legal",g),m={url:cssNamespace.pkportal.anliegen.adressaenderung.newAddressContainer.sendUrl,
data:{postal_street:a(".postal .street").val(),legal_street:a(".legal .street").val(),postal_housenumber:a(".postal .housenumber").val(),legal_housenumber:a(".legal .housenumber").val(),postal_streetadditive:a(".postal .streetadditive").val(),legal_streetadditive:a(".legal .streetadditive").val(),postal_zipInternational:a(".postal .zipInternational").val(),legal_zipInternational:a(".legal .zipInternational").val(),postal_city:a(".postal .city").val(),legal_city:a(".legal .city").val(),postal_country:a(".postal .country").val(),
legal_country:a(".legal .country").val(),postal_startDate:a(".postal input[name$\x3dstartDate]:checked").val(),legal_startDate:a(".legal input[name$\x3dstartDate]:checked").val(),postal_datePickerInput:a(".postal .datepicker").val(),legal_datePickerInput:a(".legal .datepicker").val(),isAlsoLegalAddress:a("#isAlsoLegalAddress").is(":checked")},success:l,error:h.postErrorHandler};f=f?b(a(".postal .street").val(),a(".postal .zipInternational").val(),a(".postal .housenumber").val()):Promise.resolve(!0);
k=k?b(a(".legal .street").val(),a(".legal .zipInternational").val(),a(".legal .housenumber").val()):Promise.resolve(!0);if(e&&g)a(d).animatedPost(m);else{if(e&&!g)return!1;if(!e){var n=a("#invalidAddressMessage");Promise.all([f,k]).then(function(b){var c=b[0];b=b[1];c&&b?a(d).animatedPost(m):(c||b?c?b||n.html(H.invalidLegalAddressLabel):n.html(H.invalidPostalAddressLabel):n.html(H.invalidPostalAndLegalAddressLabel),a("#invalidAddressInfoBox").show())})}}}function l(b){b.success&&a.isFunction(C)&&
C()}function g(a){return d.doNonKuzuRestApiCall("/strassenstamm/v1/portal/adressstamm/"+a,"GET","",{returnHeader:!0})}function b(a,b,c){return m(a,b,c).then(function(){return!0}).catch(function(){return!1})}function m(a,b,c){return d.doNonKuzuRestApiCall("/strassenstamm/v1/portal/gebaeude/"+a+"/"+b+(c?"?hausnummer\x3d"+c:""),"GET","",{returnHeader:!0})}function n(a,b){b=b&&"number"===typeof b?b:100;var c;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){c=null;a.apply(d,
e)},b)}}function p(b){a("#"+b.data.prefix+"_houseKey").val("");y()}function t(b){var c=a(this).data("json");c=JSON.parse(c);b=b.data.prefix;a("#"+b+"_street").val(c.strasse);a("#"+b+"_housenumber").val(c.hausnummer);a("#"+b+"_zipInternational").val(c.postleitzahl);a("#"+b+"_city").val(c.ort);a("#"+b+"_houseKey").val(c.hausKey);a("#"+b+"_search").val("");a("#"+b+"_searchResults").hide().empty();y()}function w(b,c){var d="#"+c+"_searchResults";a(d).hide().empty();a.each(b.data,function(b,e){var g=e.strasse+
" "+e.hausnummer+", "+e.postleitzahl+" "+e.ort;e=JSON.stringify(e);a("\x3cdiv/\x3e",{key:b,html:g,id:c+"searchResult"+b,class:"searchResult",tabindex:"-1"}).data("json",e).bind("click",{prefix:c},t).appendTo(d)});a("#"+c+"_search").keydown(function(b){"Enter"===b.key&&a("#"+c+"searchResult0").click()});a(d).show()}function u(b){var c=a("#"+b+"_search").val();3>c.length?a("#"+b+"_searchResults").empty():g(c).then(function(a){if(0<a.data.length)w(a,b);else throw Error("No search results found for given queryString: "+
c);}).catch(function(c){console.warn(c);c="#"+b+"_searchResults";a("#"+b+"_searchResults").hide().empty();a("\x3cdiv/\x3e",{html:H.noSearchResult,class:"noSearchResult"}).appendTo(c);a(c).show()})}function r(b){var c=a("#"+b+"_searchContainer");a("#"+b+"_country").change(function(){"CH"===a("#"+b+"_country").val()&&G?c.show():c.hide()});a("#"+b+"_country").trigger("change")}function x(){return g("Luzern").then(function(a){return!(400<=a.jqXHR.status||"success"!==a.textStatus)}).catch(function(){return!1})}
function A(){return m("Luzernerstrasse",6014,135).then(function(){return!0}).catch(function(a){return 500>a.status})}function y(){a("#invalidAddressInfoBox").hide()}var G=!1,E=!1,C=null,H={invalidLegalAddressLabel:"",invalidPostalAddressLabel:"",invalidPostalAndLegalAddressLabel:"",noSearchResult:""};return{registerValidateAndSubmit:function(b,c){C=c;b.validate(a.extend(e.formSettings,{submitHandler:f,errorPlacement:function(a,b){a.appendTo(b.parents(".row").find(".errorMessage"))}}));e.preventFormSubmissionOnEnter(b)},
init:function(b){H=b;b=x();var c=A();Promise.all([b,c]).then(function(b){G=b[0];E=b[1];a.each(["postal","legal"],function(b,c){r(c);b="#"+c+"_search";var d="#"+c+"_searchResults";a(b).keyup(n(function(){u(c)},250));a(b).focusin(function(b){b.currentTarget.id===c+"_search"&&3<=b.currentTarget.value.length&&0<a("#"+c+"_searchResults").children().length&&a(d).show()});a(b).focusout(function(b){void 0!==b.relatedTarget&&null!==b.relatedTarget&&"searchResult"===b.relatedTarget.className||a(d).hide()});
a("#"+c+"_street").on("paste keyup",{prefix:c},p);a("#"+c+"_housenumber").on("paste keyup",{prefix:c},p);a("#"+c+"_zipInternational").on("paste keyup",{prefix:c},p);a("#"+c+"_city").on("paste keyup",{prefix:c},p)})});var d=a(".newAddressContainer.legal");a("#isAlsoLegalAddress").on("ifUnchecked",function(){d.show();y()});a("#isAlsoLegalAddress").on("ifChecked",function(){d.hide();y()})}}}(jQuery,cssNamespace.pkportal.validation,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.anliegen.helper,
cssNamespace.pkportal.restService);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.adressaenderung=cssNamespace.pkportal.anliegen.adressaenderung||{};
cssNamespace.pkportal.anliegen.adressaenderung.showPartnerSelection=function(a,e,k,h){function d(){var c=[];a(cssNamespace.pkportal.anliegen.adressaenderung.showPartnerSelection.inputSelector+":checked").each(function(){c.push(this.value)});return c}var c=null,f=null,l={errorPlacement:function(a,b){a.appendTo(b.parents("ul").next(".message"))},errorElement:e.formSettings.errorElement,errorClass:e.formSettings.errorClass,submitHandler:function(c){var b={url:cssNamespace.pkportal.anliegen.adressaenderung.showPartnerSelection.sendUrl,
data:{"partnerListFromRequest[]":d()},success:function(){a.isFunction(f)&&f()},error:h.postErrorHandler};a(c).animatedPost(b)}};return{registerSelectAll:function(d){d.click(function(b){b.preventDefault();b=a(cssNamespace.pkportal.anliegen.adressaenderung.showPartnerSelection.inputSelector);b.prop("checked","checked");b.parent().addClass("checked");c.resetForm()})},registerValidateAndSubmit:function(a,b){f=b;c=a.validate(l)}}}(jQuery,cssNamespace.pkportal.validation,cssNamespace.pkportal.animatedLoader,
cssNamespace.pkportal.anliegen.helper);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.frage=cssNamespace.pkportal.anliegen.frage||{};
cssNamespace.pkportal.anliegen.frage.confirmQuestion=function(a,e,k,h){function d(d){var e={url:cssNamespace.pkportal.anliegen.frage.confirmQuestion.sendUrl,success:function(d){!0===d.success?a.isFunction(c)&&c():d.errorMessage&&(d=d.errorMessage,a("#messageContainerConfirm .errorMessage").text(d).addClass("validationError").show())},error:h.postErrorHandler};a("#messageContainerConfirm .errorMessage").removeClass("validationError").hide();a(d).animatedPost(e)}var c=null;return{registerSubmit:function(a,
e){c=e;a.on("submit",function(a){a.preventDefault();d(this)})},checkSession:function(c){c="undefined"===typeof c?"":c;!a(".questionTextEscaped").html().length&&c.length&&e.windowLocationHref(c)}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.anliegen.helper);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.frage=cssNamespace.pkportal.anliegen.frage||{};
cssNamespace.pkportal.anliegen.frage.enterQuestion=function(a,e,k,h,d){function c(c){var e={url:cssNamespace.pkportal.anliegen.frage.enterQuestion.sendUrl,data:{ls_questionText:a("#messageTextarea").val(),ls_additionalField:a("#additionalField").val()},success:function(b){b.success&&a.isFunction(f)&&f()},error:d.postErrorHandler};a(c).animatedPost(e)}var f=null;return{registerValidateAndSubmit:function(d,e){f=e;d.validate(a.extend(k.formSettings,{onkeyup:function(a,c){0>[9,8,46].indexOf(c.which)&&
this.element(a)},submitHandler:c}));k.preventFormSubmissionOnEnter(d)}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.validation,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.anliegen.helper);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.kontoaenderung=cssNamespace.pkportal.anliegen.kontoaenderung||{};
cssNamespace.pkportal.anliegen.kontoaenderung.changeAndShowAccount=function(a,e,k,h){function d(){a(".rowBank").show().find("input").addClass("required");a(".rowPost").hide().find("input").removeClass("required");a(".rowCity").show().find("input").addClass("required");a(".rowZip").show().find("input").addClass("required")}function c(){a(".rowBank").hide().find("input").removeClass("required");a(".rowPost").show().find("input").addClass("required");a(".rowCity").hide().find("input").removeClass("required");
a(".rowZip").hide().find("input").removeClass("required")}function f(b){var c={url:cssNamespace.pkportal.anliegen.kontoaenderung.changeAndShowAccount.sendUrl,data:{accountType:a(".account").val(),iban:a("#bank_"+a(".account").val()).val(),zipInternational:a(".zipInternational").val(),city:a(".city").val(),startDate:a("input[name$\x3dstartDate]:checked").val(),datePickerInput:a(".datepicker").val()},success:function(b){b.success&&a.isFunction(g)&&g()},error:h.postErrorHandler};a(b).animatedPost(c)}
var l=null,g=null;return{registerAndInitAccountSwitch:function(){a(".rowPost").hide();a(".rowBank").hide();a(".rowCity").hide();a(".rowZip").hide();a("#account").on("change",function(){"bank"===a(this).val()&&d();"post"===a(this).val()&&c()});"bank"===a("#account").val()&&d();"post"===a("#account").val()&&c()},registerReset:function(b){b.click(function(b){b.preventDefault();b=a(b.target).parents("form");var c={};b.find(".bank").val(c.bank);b.find(".post").val(c.post);b.find(".zipInternational").val(c.zipInternational);
b.find(".city").val(c.city);b.find(".account option").prop("selected",!1);b.find(".account option[value\x3dbank]").prop("selected","selected");d();c=a(b.find(".selectDate input[value\x3dnow]"));c.iCheck("check");c=c.parent();c.addClass("checked");c.next("label").removeClass("checked");b.find(".message .okay").hide();l.resetForm();b.find("label").removeClass("validationError")})},registerValidateAndSubmit:function(b,c){g=c;l=b.validate(a.extend(e.formSettings,{submitHandler:f}));e.preventFormSubmissionOnEnter(b)},
maskIban:function(a){var b=Inputmask(""),c=Inputmask("AA99 999* **** **** **** *"),d=Inputmask("AA99 999* **** **** **** **"),e=Inputmask("AA99 999* **** **** **** *"),g=Inputmask("AA99 999* **** **** ****"),f=Inputmask("AA99 999* **** **** **** **** ***"),h=Inputmask("AA99 999* **** **** **** **** ***");switch(a.value.substring(0,2)){case "CH":c.mask(a);break;case "DE":d.mask(a);break;case "LI":e.mask(a);break;case "AT":g.mask(a);break;case "IT":f.mask(a);break;case "FR":h.mask(a);break;default:b.mask(a)}}}}(jQuery,
cssNamespace.pkportal.validation,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.anliegen.helper);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.kontoaenderung=cssNamespace.pkportal.anliegen.kontoaenderung||{};
cssNamespace.pkportal.anliegen.kontoaenderung.confirmAccount=function(a,e,k){function h(c){var e={url:cssNamespace.pkportal.anliegen.kontoaenderung.confirmAccount.sendUrl,success:function(c){!0===c.success&&a.isFunction(d)&&d()},error:k.postErrorHandler};a(c).animatedPost(e)}var d=null;return{registerSubmit:function(a,e){d=e;a.on("submit",function(a){a.preventDefault();h(this)})}}}(jQuery,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.anliegen.helper);
cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.kontoaenderung=cssNamespace.pkportal.anliegen.kontoaenderung||{};
cssNamespace.pkportal.anliegen.kontoaenderung.selectAccount=function(a,e,k,h){var d=null,c={errorPlacement:function(a,c){a.appendTo(c.parents(".accountsList").next(".message"))},errorElement:e.formSettings.errorElement,errorClass:e.formSettings.errorClass,submitHandler:function(c){var e={url:cssNamespace.pkportal.anliegen.kontoaenderung.selectAccount.sendUrl,data:{accountListFromRequest:a(cssNamespace.pkportal.anliegen.kontoaenderung.selectAccount.inputSelector+":checked").val()},success:function(){a.isFunction(d)&&
d()},error:h.postErrorHandler};a(c).animatedPost(e)}};return{registerValidateAndSubmit:function(a,e){d=e;a.validate(c)}}}(jQuery,cssNamespace.pkportal.validation,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.anliegen.helper);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};
cssNamespace.pkportal.anliegen.requestsAndMessages=function(a,e,k,h,d,c,f){function l(b){var c=a(b).find(".requestUnreadMessages");if(0!==c.length){var d=a(b).attr("id");e.doPost({url:B.readingConfirmation.confirmUrl,success:f.update,data:{anliegenNr:d}});c.remove();0<a(b).find("DIV.messageThread FORM#assessmentForm").length&&g(b,"show")}}function g(b,c){"show"===c?a(b).find("SPAN.pendingRating").show():a(b).find("SPAN.pendingRating").hide()}function b(){a(".request .header").each(function(){a(this).click(function(b){b.preventDefault();
b=a(b.target).parents(".header");var c=b.nextAll(".messageThread");c.is(":hidden")?(c.slideDown(200),l(a(this).parent("DIV.request")),b.addClass("openMessageThread")):(c.slideUp(200),0===c.find(".messageInfoClosed").length&&(c.find(".blueMessageHeader").remove(),c.find(".authorRightBlue").removeClass("authorRightBlue").addClass("authorRightWhite")),b.removeClass("openMessageThread"))})})}function m(){a.addTemplateFormatter({lowerCaseFormatter:function(a,b){return a.toLowerCase()},authorRightBlueFormatter:function(a,
b){return"authorRightBlue"}})}function n(){a(".newMessageForm form").each(function(){r(a(this));t(a(this));var b=a(this),c=a("#fileuploadTemplate").children().first().clone(),e=c.find("[name\x3dfilechooser_uploadkey]"),g=e.val()+"_"+E(b);e.val(g);b.find(".button.submit").prependTo(c.find(".buttonWrapper"));b.find(".fileuploadPlaceholder").replaceWith(c);d.init(c)})}function p(){a(".assessmentContainer form").each(function(){r(a(this));t(a(this));0===a(this).parents("DIV.messageThread").prevAll("DIV.header").find("SPAN.requestUnreadMessages").length&&
g(a(this).parents("DIV.messageThread").prevAll("DIV.header"),"show")})}function t(a){var b=a.find("textarea");b.placeholder();if(0<navigator.userAgent.indexOf("MSIE 10")){var c=b.attr("placeholder");b.val()===c&&b.val("")}c=a.find(".charsLeftContainer .charCounter");var d=a.find(".charsLeftContainer .charsLeft");if("newMessageForm"===a.attr("id"))var e=B.newMessage.maxChars;else"assessmentForm"===a.attr("id")&&(e=B.assessment.maxChars);h.charCounter.registerTextArea(b,c,d,e)}function w(a){a.find(".button.submit").attr("disabled",
"disabled")}function u(a){a.find(".button.submit").removeAttr("disabled")}function r(b){"newMessageForm"===b.attr("id")?b.validate(a.extend(k.formSettings,{onkeyup:function(a,b){0>[9,8,46].indexOf(b.which)&&this.element(a)},onfocusout:!1,submitHandler:x})):"assessmentForm"===b.attr("id")&&b.validate(a.extend(k.formSettings,{onkeyup:function(a,b){0>[9,8,46].indexOf(b.which)&&this.element(a)},errorPlacement:function(a,b){"radio-1"===b.attr("id")?a.appendTo(b.parents("form").find(".errorMessage")):"assessmentFeedback"===
b.attr("id")&&a.appendTo(b.parents("form").find(".errorMessageComment"))},submitHandler:x}));k.preventFormSubmissionOnEnter(b)}function x(b){var d=a(b),e={};"newMessageForm"===d.attr("id")?e={url:B.newMessage.submitUrl,data:{selectedanliegen:E(d),ls_text:d.find("textarea").val()},success:function(a){!0===a.success?A(E(d),d):G(a.errorMessage,d)},error:c.postErrorHandler}:"assessmentForm"===d.attr("id")&&(e={url:B.assessment.submitUrl,data:{selectedanliegen:E(d),assessment:C(d),ls_assessmentFeedback:d.find("textarea").val()},
success:function(c){!0===c.success?(y(E(d),d),g(a(b).parents("DIV.messageThread").prevAll("DIV.header"),"hide")):G(c.errorMessage,d)},error:c.postErrorHandler});d.find(".errorMessage").removeClass("validationError").hide();d.animatedPost(e)}function A(a,b){b.animatedPost({url:B.newMessage.loadUrl,data:{selectedanliegen:a},success:function(a){a=a.message;b.closest(".messageThread").loadTemplate(B.newMessage.templateForMessage,a,{prepend:!0});b.closest(".newMessageForm").parent().remove().remove()},
error:function(){window.location.reload()}})}function y(a,b){b.animatedPost({url:B.assessment.loadUrl,data:{selectedanliegen:a},success:function(a){a=a.showAssessment;b.closest(".assessmentContainer").parent().loadTemplate(B.assessment.templateForAssessment,a);H()},error:function(){window.location.reload()}})}function G(a,b){b.find(".errorMessage").text(a).addClass("validationError").show()}function E(a){return a.find("input[name\x3dselectedanliegen]").val()}function C(a){var b=a.find("input[name\x3d'assessment[]']:checked").attr("id");
return a.find("label[for\x3d'"+b+"']").text()}function H(){a("#closedRequestsContainer .readonly").each(function(){var b=a(this).find("input[name\x3dassessmentValue]").val();a(this).find("input[id\x3dradio-"+b+"]").prop("disabled",!1).prop("checked",!0)})}a(document).ready(function(){a(document).ajaxStop(function(){0<a("DIV.mobileAuthorWrap .rightColumnAuthor").length&&a("DIV.mobileAuthorWrap .rightColumnAuthor").each(function(){a(this).children().hasClass("insurer")&&a(this).parents("DIV.mobileAuthorWrap").addClass("insurerMessage")})})});
"use strict";var B={templating:{},newMessage:{}};return{init:function(){var c=B.templating;d.registerHandler("fileuploaddone",u);d.registerHandler("fileuploadfail",u);d.registerHandler("fileuploadstart",w);e.doPost({url:c.urlGetRequests,success:function(d){m();c.containerForOpen.loadTemplate(c.templateForOpen,d.anliegen.open);c.containerForClosed.loadTemplate(c.templateForClosed,d.anliegen.closed);b();d=a("#"+d.anliegen.selectedAnliegenNr).first();0<d.size()&&(a(d).find(".messageThread").show(),a(d).find(".header").toggleClass("openMessageThread"),
a("HTML, BODY").animate({scrollTop:a(d).find(".messageThread \x3e SPAN[data-format-options]").offset().top},500),l(d));n();p();H()}})},setTemplatingParams:function(a,b,c,d,e){B.templating={containerForOpen:a,containerForClosed:b,templateForOpen:c,templateForClosed:d,urlGetRequests:e}},setNewMessageParams:function(a,b,c,d){B.newMessage={maxChars:a,submitUrl:b,loadUrl:c,templateForMessage:d}},setAssessmentParams:function(a,b,c,d){B.assessment={maxChars:a,submitUrl:b,loadUrl:c,templateForAssessment:d}},
setReadingConfirmationParams:function(a){B.readingConfirmation={confirmUrl:a}}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.validation,cssNamespace.pkportal.textareaUtil,cssNamespace.pkportal.fileupload,cssNamespace.pkportal.anliegen.helper,cssNamespace.pkportal.pendingAnliegenAndLeadMessagesCounter);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.terminvereinbarung=cssNamespace.pkportal.anliegen.terminvereinbarung||{};
cssNamespace.pkportal.anliegen.terminvereinbarung.enterAppointmentWish=function(a){function e(b){for(var c=a("\x3cdiv /\x3e"),d=0;d<b.length;d++)b[d]=c.html(b[d]).text()}function k(){p=a(a("#appointmentWishContainerTemplate").text().replace(/{containerCounterValue}/g,w));h();d();l();g();b();m();p.appendTo(a("#enterAppointmentWish"));w++}function h(a){var b=p.find("input[id*\x3d'datepicker']");b.placeholder();b.pickadate(t);var c=b.pickadate("picker");if("undefined"!==typeof a&&0<a.length)c.set("select",
a);else c.on({open:function(){},close:function(){var a=b.closest(".appointmentWishContainer");if(""!==b.val())a.find(".checkboxContainer").is(":hidden")&&(a.find(".wholeDayCheckbox").find("input").iCheck("check"),a.find(".checkboxContainer").show());else{var c=b.closest(".appointmentWishContainer").find(".checkboxContainer");c.find("input").iCheck("uncheck");c.hide();a.insertAfter(a.parent().find(".appointmentWishContainer:last"))}}})}function d(){p.find(".checkboxContainer input").iCheck(u);var b=
p.find(".wholeDayCheckbox"),d=p.find(".timeSlotsCheckboxes");b.find("ins").on("click",function(){c(b,d)});b.find("label").on("click",function(){c(b,d)});d.each(function(){a(this).find("ins").on("click",function(){f(b,d)});a(this).find("label").on("click",function(){f(b,d)})})}function c(b,c){b.find("div").hasClass("checked")&&c.each(function(){a(this).find("input").iCheck("uncheck")})}function f(b,c){c.each(function(){a(this).find("div").hasClass("checked")&&b.find("input").iCheck("uncheck")})}function l(){p.find(".addAppointmentWish").on("click",
function(){a(this).parent("div").find('input[name^\x3d"timeSlots"]').valid()&&(n(a(this).closest(".appointmentWishContainer"),"add"),k(),a(".appointmentWishContainer #appointmentDate"+(w-1)+"_datepicker").click())})}function g(){p.find(".appointmentWishItem .edit").on("click",function(){var b=a(this).closest(".appointmentWishContainer"),c=b.siblings(".appointmentWishContainer"),d=c.length;if(""===a(c[d-1]).find(".datepicker").val())a(c[d-1]).remove(),c=b.siblings(".appointmentWishContainer");else if(!a(c[d-
1]).find('input[name^\x3d"timeSlots"]').valid())return!1;b.children().show();b.find(".appointmentWishItem").hide();b.find(".addAppointmentWish").hide();b.find(".saveChange").show();n(c,"edit")})}function b(){p.find(".appointmentWishItem .delete").on("click",function(){a(this).closest(".appointmentWishContainer").remove()})}function m(){p.find(".saveChange").on("click",function(){a(this).parent("div").find('input[name^\x3d"timeSlots"]').valid()&&(n(a(this).closest(".appointmentWishContainer"),"save"),
a(this).closest(".appointmentWishContainer").siblings(".appointmentWishContainer").find("button").show(),k())})}function n(b,c){b.each(function(b,d){var e=[],g="";b=a(this).find(".date .datepicker").val();a.each(a(this).find('input[name^\x3d"timeSlots"]:checked'),function(){e.push(a(a(this)).closest("label").text())});a.each(e,function(a,b){g+=b;a<e.length-1&&(g+=" | ")});a(this).children().hide();d=a(this).find(".appointmentWishItem");d.find(".chosenDate").text(b);d.find(".timeSlots").text(g);"edit"===
c&&d.find("button").hide();d.show()})}var p,t={format:"dddd dd. mmmm yyyy",selectYears:!0},w=1,u={checkboxClass:"icheckbox_minimal-blue",increaseArea:"20%"};return{init:function(b,c,d,g){t.min=b;t.max=c;t.disable=d;e(a.fn.pickadate.defaults.monthsFull);e(a.fn.pickadate.defaults.weekdaysFull);if(0<g.length){b=g.replace(/&#034;/g,'"');b=JSON.parse(b);for(var f in b)if(b.hasOwnProperty(f)){k();c=b[f];h(c.date);for(var l in c.timeSlots)c.timeSlots.hasOwnProperty(l)&&p.find("label:contains("+c.timeSlots[l]+
")").find('input[name^\x3d"timeSlots"]').iCheck("check");n(p);w++}}k()}}}(jQuery);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.terminvereinbarung=cssNamespace.pkportal.anliegen.terminvereinbarung||{};
cssNamespace.pkportal.anliegen.terminvereinbarung.enterTerminvereinbarung=function(a,e,k,h){function d(){var c=[];a(".appointmentWishContainer").each(function(b,d){var e=[];d=a(this).find(".date .datepicker").pickadate("picker");b=d.get("value");d=d.get("select");""!==b&&(a.each(a(this).find('input[name^\x3d"timeSlots"]:checked'),function(){e.push(a(a(this)).closest("label").text())}),c.push({date:[d.year,d.month,d.date],formattedDate:b,timeSlots:e}))});return c}function c(c){c.success&&a.isFunction(f)&&
f()}var f=null,l={errorPlacement:function(a,b){b.parents(".checkboxContainer").length?a.appendTo(b.parents(".checkboxContainer").find(".message")):a.appendTo(b.next(".message"))},errorElement:e.formSettings.errorElement,errorClass:e.formSettings.errorClass,submitHandler:function(e){var b={url:cssNamespace.pkportal.anliegen.terminvereinbarung.enterTerminvereinbarung.sendUrl,data:{ls_questionText:a("#messageTextarea").val(),contactEmail:a("#email").val(),contactPhone:a("#phone").val(),appointmentWishesJson:JSON.stringify(d())},
success:c,error:h.postErrorHandler};a(e).animatedPost(b)}};return{registerValidateAndSubmit:function(a,b){f=b;a.validate(l);e.preventFormSubmissionOnEnter(a)}}}(jQuery,cssNamespace.pkportal.validation,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.anliegen.helper);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.terminvereinbarung=cssNamespace.pkportal.anliegen.terminvereinbarung||{};
cssNamespace.pkportal.anliegen.terminvereinbarung.confirmTerminvereinbarung=function(a,e,k,h){function d(d){var e={url:cssNamespace.pkportal.anliegen.terminvereinbarung.confirmTerminvereinbarung.sendUrl,success:function(d){!0===d.success?a.isFunction(c)&&c():d.errorMessage&&(d=d.errorMessage,a(".confirmTerminvereinbarungContainer .errorMessage:last").text(d).addClass("validationError").show())},error:h.postErrorHandler};a(".confirmTerminvereinbarungContainer .errorMessage:last").removeClass("validationError").hide();
a(d).animatedPost(e)}var c=null;return{registerSubmit:function(a,e){c=e;a.on("submit",function(a){a.preventDefault();d(this)})}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.anliegen.helper);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};cssNamespace.pkportal.anliegen.terminvereinbarung=cssNamespace.pkportal.anliegen.terminvereinbarung||{};
cssNamespace.pkportal.anliegen.terminvereinbarung.confirmTerminvereinbarung_appointmentWish=function(a){return{init:function(){a("#addDate").on("click",function(e){e.preventDefault();a("#prev").click()})}}}(jQuery);cssNamespace.pkportal.anliegen=cssNamespace.pkportal.anliegen||{};
cssNamespace.pkportal.anliegen.closure=function(a,e,k){return{init:function(e){k.restyleMultiRowLinkButtons();e={url:e,success:function(d){a("#anliegenType").text(d.anliegenType);a("#anliegenNr").text(d.anliegenNr);a("#date").text(d.date);a("#status").text(d.status)}};a(".confirmationDetails").animatedPost(e)}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.styleOptimizer);
cssNamespace.pkportal.leistungsuebersicht=function(a,e,k){function h(){a(".leistungsuebersichtTable td.documentId").each(function(){var c=a(this).attr("showTooltip");if(c&&0<c.length){var d=a.trim(a(".generalTable").data((c+"text").toLowerCase()));c&&d&&d.length&&(c=a('\x3cdiv class\x3d"tooltipText"\x3e\x3ca class\x3d"hasTooltip '+c+'"\x3e\x3c/a\x3e\x3cdiv class\x3d"tooltipContent"\x3e\x3cp\x3e'+d+"\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e"),a(this).append(c))}else 0<a(this).find("a").length&&(c=a('\x3cspan class\x3d"image pdfDownload"\x3e\x3c/span\x3e'),
a(this).find("a").append(c),a(this).find("a").click(function(){k.trackCustomDownloadWithCategory(s,this,a(this).attr("href"),"Eingereichte_Rechnungen")}))})}var d={};a(document).ready(function(){a("BODY").on("click","DIV#userchoicedialogoptions TD.letter",function(){a(this).parent("TR").toggleClass("active")})});return{initializeComponent:function(c,f,k,g,b,m,n,p,t){d.resetFiltersUrl=c;d.applyFiltersUrl=f;d.currentResultsUrl=k;d.sortUrl=g;d.documentDownloadUrl=b;d.filterStateUrl=m;d.allLeistungserbringerLabel=
n;d.allStatusesLabel=p;d.detailsUrl=t;d.tableTemplate="#leistungsuebersichtTableTemplate";d.sortParamsPrefix="leistungsuebersicht_";d.formSelector="#leistungsuebersichtFiltersForm";d.additionalFilterValues={invoiceNumber:a("#leistungsuebersichtFiltersForm [name\x3dinvoiceNumber]").val(),leistungserbringerNr:a("#leistungsuebersichtFiltersForm [name\x3dleistungserbringerNr]").val(),status:a("#leistungsuebersichtFiltersForm [name\x3dstatus]").val()};d.updateResultViewCallback=h;e.init(".leistungsuebersichtTable",
d)}}}(jQuery,cssNamespace.pkportal.filterResultsTable,cssNamespace.tracking);
cssNamespace.pkportal.teaser.settledfranchise=function(a,e){function k(c){if(c.settledfranchise_show_teaser){var e=function(d){a(".teaser [data-content\x3d"+d+"]").text(c[d])};e("settledfranchise_used");e("settledfranchise_remaining");e("settledfranchise_available");e("graphics_settledfranchise_used_num");e("graphics_settledfranchise_available_num");e("graphics_settledfranchise_remaining_num");e("settledfranchise_currency");"undefined"!==typeof c.settledfranchise_previousinsurer&&c.settledfranchise_show_previousinsurer?
(e("settledfranchise_previousinsurer"),a(".settledfranchise tr.previousinsurer").show(),a(".teaserCockpit .used td").css("height","auto")):a(".settledfranchise tr.previousinsurer").hide();a("#franchise_graphic").empty();a("#franchise_graphic").data("currency",c.settledfranchise_currency);a("#franchise_graphic").data("maxvalue",c.graphics_settledfranchise_available_num);a("#franchise_graphic").data("customervalue",c.graphics_settledfranchise_remaining_num);"auswertungen"===d.teaserType?(a("#franchise_graphic").startDonutAnimation(),
a("#franchise_graphic").parent().find(".countUpToValue").startCountAnimation()):"cockpit"===d.teaserType?a("#franchise_graphic").startDonutAnimation():a(".teaser").find(".countUpToValue").startCountAnimation();if("cockpit"===d.teaserType)a("#franchise_graphic").find("svg").on("click",function(){location.href=a(".settledFranchiseTeaser").find(".categoryLink").find("a").attr("href")});a(".settledFranchiseTeaser").show()}else a(".settledFranchiseTeaser").hide()}function h(a){e.updateTeaser(d.teaserUrl,
k,d.teaserType,a)}var d={};return{init:function(a,f,k){d.teaserUrl=a;d.teaserType=f;"table"===f||""===f?(e.addClickHandlersToTeaserPopup(),h(k)):"cockpit"===f&&h(k)},refresh:h}}(jQuery,cssNamespace.pkportal.teaser);
cssNamespace.pkportal.teaser.selbstbehalt=function(a,e){function k(c){if(c.selbstbehalt_show_teaser){var d=function(d){a("#selbstbehaltTeaser [data-content\x3d"+d+"]").text(c[d])};d("selbstbehalt_used");d("selbstbehalt_remaining");"undefined"!==typeof c.selbstbehalt_previousinsurer&&c.selbstbehalt_show_previousinsurer?(d("selbstbehalt_previousinsurer"),a(".selbstbehalt tr.previousinsurer").show()):a(".selbstbehalt tr.previousinsurer").hide();a("#selbstbehalt_graphic").empty();a("#selbstbehalt_graphic").data("currency",
c.selbstbehalt_currency);a("#selbstbehalt_graphic").data("maxvalue",c.graphics_selbstbehalt_available_num);a("#selbstbehalt_graphic").data("customervalue",c.graphics_selbstbehalt_remaining_num);a("#selbstbehalt_graphic").startDonutAnimation();a("#selbstbehalt_graphic").parent().find(".countUpToValue").startCountAnimation();a("#selbstbehaltTeaser").show()}else a("#selbstbehaltTeaser").hide()}var h,d;return{init:function(a,e,k){h=a;d=e},refresh:function(a){e.updateTeaser(h,k,d,a)}}}(jQuery,cssNamespace.pkportal.teaser);
cssNamespace.pkportal.titletext=cssNamespace.pkportal.titletext||{};cssNamespace.pkportal.titletext=function(a,e){return{init:function(a){e.doPost({url:cssNamespace.pkportal.titletext.getTitleUrl,success:function(e){a.loadTemplate("#titleTemplate",e)}})}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.initcheckandradiobuttons=function(a){var e=!1;return{initNiceInputs:function(k){!0!==k&&e||(e=!0,a("input").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue",increaseArea:"20%"}),a("form").on("reset",function(){a("input").iCheck("update")}))}}}(jQuery);
cssNamespace.pkportal.selectdatepicker=function(a,e){return{selectDateDatePicker:function(k,h){function d(){f.removeClass("hasValidationError");f.nextAll(".validationError").hide();f.removeClass("required");f.removeClass("field")}e.initNiceInputs();var c={format:"dd.mm.yyyy",selectYears:!0};h&&a.extend(c,h);var f=a("#"+k+"_datepicker").pickadate(c),l=f.pickadate("picker"),g=a("#"+k+"_pickDate"),b=a("#"+k+"_now");l.on({open:function(){f.addClass("required");f.addClass("field");g.attr("checked",!0).parent().addClass("checked");
b.attr("checked",!1).parent().removeClass("checked")},close:function(){""!==f.val()&&d()}});a("#"+k+"_pickDate").on("ifChecked",function(){setTimeout(function(){l.open();a(this).attr("checked",!0);f.addClass("required");f.addClass("field")},100)});a("#"+k+"_now").on("ifChecked",function(){l.set("clear");f.blur();d();a(this).attr("checked",!0)})}}}(jQuery,cssNamespace.pkportal.initcheckandradiobuttons);
cssNamespace.pkportal.actionbar=function(a,e,k,h){function d(c){c=c.nrOfNewNotifications;var d=0<c?"orange":"green";a(".notificationWrapper .number").addClass(d).text(c).fadeIn()}function c(){e.doPost({url:f.loadUserDetailsUrl,success:function(c){a(f.button).find(".text").text(c.username);a(f.button).find(".image").addClass(c.gender)}})}var f={button:"",loadUserDetailsUrl:""};return{init:function(e){f=e;h.registerVisualCounter(a(".keepaliveCounter").get(0));k.registerUpdateHandler(d);c()}}}(jQuery,
cssNamespace.pkportal.utils,cssNamespace.pkportal.newNotificationsCounter,cssNamespace.pkportal.keepalive);cssNamespace.pkportal.userFullName=function(a,e){return{populate:function(a,h){e.doPost({url:h,success:function(d){a.text(d.user)}})}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.cockpit=function(a,e,k){function h(){a("#triggerArrow").click(function(d){c.is(":hidden")?(c.slideDown(500),f.toggleClass("down up"),l.removeClass("hideTriggerLine"),l.addClass("showTriggerLine"),a.cookie("secondCockpitTeaserRow","isOpen",{expires:3})):(c.slideUp(300),f.toggleClass("up down"),l.removeClass("showTriggerLine"),l.addClass("hideTriggerLine"),a.cookie("secondCockpitTeaserRow","",{expires:3}))})}var d={paramNbTeasers:"",accountDeactivated:"",daysUntilAccountDeactivation:"",
accountDeactivatedMessage:""},c,f,l;return{init:function(e){d=e;a(".mainWindow").removeClass("main").addClass("mainCockpit");null===a.cookie("secondCockpitTeaserRow")&&a.cookie("secondCockpitTeaserRow","isOpen",{expires:3});e=d.paramNbTeasers;var b="isOpen"===a.cookie("secondCockpitTeaserRow");3>=e?a("#firstTeaserRow").parent(".teaserCockpit").css("margin-bottom","50px"):(c=a("#teaser4, #teaser5, #teaser6"),f=a("#triggerArrow"),l=a(".trigger"),h(),b?(c.show(),f.addClass("up"),l.removeClass("hideTriggerLine"),
l.addClass("showTriggerLine")):(c.hide(),f.toggleClass("down"),l.removeClass("showTriggerLine"),l.addClass("hideTriggerLine")));if(e="true"===d.accountDeactivated)b=d.daysUntilAccountDeactivation,e=!0,b&&(b=parseInt(b))&&56<b&&(e=!1);e&&k.populateSystemMessages([d.accountDeactivatedMessage],"accountDeactivatedMessage","yellow")}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.systemMessage);
cssNamespace.pkportal.leistungenfinden=function(a,e,k,h,d,c){function f(){h.doPost({url:v.getPolicyNrUrl,success:function(a){Y=a},cache:!1,async:!0})}function l(){a("#hideKatalogLinkDiv").show();a("#leistungskatalog").show();a('input[id\x3d"leistungsearchbar"]').val("");a("#leistungsearchbarautocomplete").hide();a("#showKatalogLinkDiv").hide();a("#leistungenfindenTable").hide();a("#leistungenUpgradesTable").hide();a(".alternativTherapeutenContainer").hide();a(".alternativTherapeutenTooltipContent").hide().find("P").empty()}
function g(){a("#leistungskatalog").hide();a("#hideKatalogLinkDiv").hide();a("#showKatalogLinkDiv").show()}function b(){a.each(v.alphabetLetters,function(b,c){b=a("\x3cli\x3e\x3ca\x3e"+c+"\x3c/a\x3e\x3c/li\x3e");b.click(function(){m(c)});a("#alphabetLetters").append(b)})}function m(b){b={url:v.leistungskatalogDataUrl,data:{alphabetLetter:b},success:n,cache:!1,async:!0};a("#leistungskataloglistContainer").animatedPost(b)}function n(b){a("#leistungskataloglist").empty();if(0<b.displayTexts.length)a("#leistungskataloglist").css({"column-count":3,
"-moz-column-count":3,"-webkit-column-count":3}),a.each(b.displayTexts,function(b,c){b=a("\x3cli\x3e\x3ca class\x3d'link leistungskatalogentry'\x3e"+c+"\x3c/a\x3e\x3c/li\x3e");b.click(function(){cssNamespace.tracking.setSearchResultsCriteria(s,c,"Leistungssuche");a("#leistungsearchbar").val(c);A([c])});a("#leistungskataloglist").append(b)});else{a("#leistungskataloglist").css({"column-count":1,"-moz-column-count":1,"-webkit-column-count":1});var c=a('\x3cli class\x3d"noResults"\x3e'+v.katalogEmptyPageText+
"\x3c/li\x3e");a("#leistungskatalog #leistungskataloglistContainer ul").append(c)}a("#alphabetLetters a").removeClass("selected");a("#alphabetLetters a:contains('"+b.alphabetLetter+"')").addClass("selected")}function p(){a("#leistungsearchbar").keypress(w);a("#leistungsearchbar").keyup(t);a("#leistungsearchbar").placeholder();Q(a(".leistungSearch"))}function t(b){if(0>[13,16,17,20,37,38,39,40].indexOf(b.which)){g();a("#leistungenfindenTable").hide();a("#leistungenUpgradesTable").hide();a(".alternativTherapeutenContainer").hide();
a(".alternativTherapeutenTooltipContent").hide().find("P").empty();var c=a("#leistungsearchbar").val();2<c.length?(a("#leistungsearchbarautocomplete").show(),h.doPost({url:v.leistungssucheDataUrl,data:{searchtext:c},success:u,cache:!1,async:!0})):a("#leistungsearchbarautocomplete").empty().hide();4<c.length&&(I&&(clearTimeout(I),I=null),I=setTimeout(function(){cssNamespace.tracking.setSearchResultsCriteria(s,c,"Leistungssuche");var b=null;a("#leistungsearchbarautocomplete").hasClass("noResults")||
(b=a("ul#leistungsearchbarautocomplete li").length);cssNamespace.tracking.setNumberResults(s,b)},500))}if(38===b.which||40===b.which){if(a("#leistungsearchbarautocomplete").hasClass("noResults"))if(0===a("li.hovered").length)var d=2;else d=a("li.hovered").index()+1,a("#leistungsearchbarautocomplete \x3e li:nth-child("+d+")").removeClass("hovered"),38===b.which?d--:40===b.which&&d++,4<=d?d=2:1>=d&&(d=3);else{d=a("li.hovered").index()+1;var e=a("#leistungsearchbarautocomplete \x3e li").length;a("#leistungsearchbarautocomplete \x3e li:nth-child("+
d+")").removeClass("hovered");38===b.which?d--:40===b.which&&d++;d>=e+1?d=1:0>=d&&(d=e)}a("#leistungsearchbarautocomplete \x3e li:nth-child("+d+")").addClass("hovered")}}function w(b){13===b.which&&(b.preventDefault(),0<a("li.hovered").length&&(a("#leistungsearchbarautocomplete").hasClass("noResults")?(b=a("li.hovered").index(),1===b?window.location.href=v.searchboxNoResultsLink:2===b&&("true"===v.isFromTeaser?J("?showCatalogOnInit\x3dtrue"):l())):(b=a("#leistungsearchbarautocomplete \x3e li.hovered").text(),
r(b),cssNamespace.tracking.setSearchResultsCriteria(s,b,"Leistungssuche"))))}function u(b){a("#leistungsearchbarautocomplete").empty();a("#leistungsearchbarautocomplete").removeClass("noResults");0===b.displayTexts.length?(a("#leistungsearchbarautocomplete").addClass("noResults"),a("#leistungsearchbarautocomplete").append(a('\x3cli style\x3d"cursor:default;"\x3e'+v.searchboxNoResultsText+"\x3c/li\x3e")),b=a('\x3cli class\x3d"link"\x3e'+v.searchboxNoResultsLinkText+"\x3c/li\x3e"),b.click(function(a){window.location.href=
v.searchboxNoResultsLink}),b.hover(function(){a(this).addClass("hovered")},function(){a(this).removeClass("hovered")}),a("#leistungsearchbarautocomplete").append(b),b=a('\x3cli class\x3d"link"\x3e'+v.showKatalogLabel+"\x3c/li\x3e"),b.click(function(a){"true"===v.isFromTeaser?J("?showCatalogOnInit\x3dtrue"):l()}),b.hover(function(){a(this).addClass("hovered")},function(){a(this).removeClass("hovered")}),a("#leistungsearchbarautocomplete").append(b)):(a.each(b.displayTexts,function(b,c){b=a("\x3cli\x3e"+
c+"\x3c/li\x3e");b.click(function(){r(c);cssNamespace.tracking.setSearchResultsCriteria(s,c,"Leistungssuche")});b.hover(function(){a("#leistungsearchbarautocomplete \x3e li").removeClass("hovered");a(this).addClass("hovered")},function(){a(this).removeClass("hovered")});a("#leistungsearchbarautocomplete").append(b)}),a("#leistungsearchbarautocomplete \x3e li:nth-child(1)").addClass("hovered"))}function r(b){a("#leistungsearchbar").val(b);A([b]);a("#leistungsearchbarautocomplete").empty().hide()}function x(){return a("input[name\x3d'userchoice']:checked").map(function(){return this.value}).get()}
function A(b){a("#userchoicedialogchoice").html('"'+b+'"');G(b,v.processkatalogchoiceDataUrl)}function y(b){a.isArray(b)||(b=x());cssNamespace.tracking.setSearchResultsCriteria(s,b,"Leistungssuche");a("#leistungsearchbar").val(b);G(b,v.processdialogchoiceDataUrl)}function G(b,c){b={url:c,data:{choice:b},success:E,cache:!1,async:!0};a("#leistungenOverview").animatedPost(b)}function E(b){if("true"===v.isFromTeaser)v.isFromTeaser="false",J("");else if("undefined"!==typeof b.errorMessageForService&&null!==
b.errorMessageForService)a("#userchoicedialogoptions").empty(),a("#userchoicedialogsubmit").hide(),M();else switch(a("#userchoicedialogoptions").empty(),a("#userchoicedialogoptions").removeClass("userChoiceAlphabet"),a("#userchoicedialogsubmit").show(),c.removeSystemMessage("errormessageforservice"),b.type){case "LeistungsDeckung":a("#leistungenOverview tbody tr").remove();a("#upgradesOverview tbody tr").remove();a("#userchoicedialog").hide();a("#leistungenNoResultsMessage").hide();a("#leistungenRechtsHinweis").hide();
a("#leistungenUpgrades").hide();a("#noDeckungenMessage").hide();a("#noUpgradesMessage").hide();a("#noUpgrades").hide();g();0<b.deckungen.length?(a("#leistungenOverview tbody").loadTemplate("#leistungenfindenTableTemplate",b.deckungen),a("#leistungenRechtsHinweis").show(),void 0!==b.upgrades&&0<b.upgrades.length?(a("#upgradesOverview tbody").loadTemplate("#leistungenUpgradesTableTemplate",b.upgrades),a("#leistungenUpgrades").show(),L(b)):(K(),a("#noUpgradesMessage").show(),a("#noUpgrades").show()),
"undefined"!==typeof b.selectedLeistungsartForTherapeutenSearch&&null!==b.selectedLeistungsartForTherapeutenSearch?(b={url:v.searchfortherapeutenUrl,data:{choice:b.selectedLeistungsartForTherapeutenSearch,maxNrOfTherapeuten:v.maxNrOfTherapeuten},success:P,cache:!1,async:!0},a(".alternativTherapeutenTable").animatedPost(b)):b.deckungen[0].leistungsartTooltip&&a(".alternativTherapeutenTooltipContent").show().find("P").html(b.deckungen[0].leistungsartTooltip)):(K(),a("#leistungenNoResultsMessage").show(),
a("#noDeckungenMessage").show(),a("#noUpgrades").show());a("#leistungenOverview .right:empty").prev("#leistungenOverview .left").removeClass("left").end().remove();a("#leistungenfindenTable").show();a("#leistungenUpgradesTable").show();M();break;case "UserChoiceMultiple":C(b);break;case "UserChoiceAlphabet":H(b);break;case "UserChoiceSingle":B(b)}}function C(b){a("#infoText").html(v.multiChoiceInfoText+'\x3cbutton id\x3d"selectAll" class\x3d"button floatRight link"\x3e'+v.selectAllText+"\x3c/button\x3e");
a.each(b.displayTexts,function(b,c){b=a('\x3cdiv class\x3d"optioncontainer"\x3e\x3cinput type\x3d"checkbox" name\x3d"userchoice" value\x3d"'+c+'"/\x3e'+c+"\x3cbr/\x3e\x3c/div\x3e");a("#userchoicedialogoptions").append(b)});a("#selectAll").click(function(b){b.preventDefault();b=a('input[name\x3d"userchoice"]');b.prop("checked","checked");b.parent().addClass("checked");N.resetForm()});q()}function H(b){a("#infoText").html(v.radioButtonInfoText);a.each(b.displayTexts,function(b,c){var d=a('\x3ctable\x3e\x3ctr\x3e\x3ctd class\x3d"letter"\x3e'+
b+'\x3c/td\x3e\x3ctd\x3e\x3cul class\x3d"userChoiceAlphabetList"\x3e\x3c/ul\x3e\x3c/td\x3e\x3ctd class\x3d"spacerRight"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e');a("#userchoicedialogoptions").append(d);a.each(c,function(a,b){d.find(".userChoiceAlphabetList").append('\x3cli\x3e\x3ca class\x3d"link userchoicedialogsubmit3"\x3e'+b+"\x3c/a\x3e\x3c/li\x3e")})});a("#userchoicedialogsubmit").hide();a("#userchoicedialogoptions").addClass("userChoiceAlphabet");a(".userchoicedialogsubmit3").click(function(b){b=
a(this).text();y([b])});q()}function B(b){a("#infoText").html(v.radioButtonInfoText);a.each(b.displayTexts,function(b,c){b=a('\x3cdiv class\x3d"optioncontainer"\x3e\x3cinput type\x3d"radio" name\x3d"userchoice" value\x3d"'+c+'"/\x3e'+c+"\x3cbr/\x3e\x3c/div\x3e");a("#userchoicedialogoptions").append(b)});q()}function q(){var b=(a(window).width()-620)/2;a("#userchoicedialogoptions").append(a('\x3cspan class\x3d"message"\x3e\x3c/span\x3e)'));a("#userchoicedialogoptions input").first().prop("required",
"true");cssNamespace.pkportal.initcheckandradiobuttons.initNiceInputs();a.blockUI({message:a("#userchoicedialog"),css:{cursor:"inherit",width:"620px",border:"none",position:"absolute",left:b+"px"},overlayCSS:{cursor:"inherit",opacity:.4}})}function F(){N=a("#userchoiceform").validate(D);a("#userchoicedialog .close-X").click(O);a("#userchoicedialogcancel").click(O)}function O(){a('input[id\x3d"leistungsearchbar"]').val("");M()}function M(){a.unblockUI();N.resetForm()}function J(a){void 0!==v.redirectUrl&&
(window.location.href=v.redirectUrl+a)}function L(b){a("#leistungenUpgrades .button.update").click(function(){var b="\x26leistungsart\x3d"+a(this).parent().parent().find("div.leistungsartUpgradeText").text().replace(/\s/g,""),c="\x26produkt\x3d"+a(this).parent().parent().find("div.produktUpgradeText").text().replace(/\s/g,""),d=a("#leistungenUpgradesTable .tableView .button").attr("href");a("#leistungenUpgradesTable .tableView .button").attr("href",d+Y+b+c)})}function K(){var b=a("#leistungenUpgradesTable .button.update").attr("href");
a("#leistungenUpgradesTable .button.update").attr("href",b+Y)}function P(b){if("undefined"!==typeof b.leistungsartTooltipContent&&0<b.leistungsartTooltipContent.length){var c=b.leistungsartTooltipContent;a(".alternativTherapeutenTooltipContent").show().find("P").html(c)}else a(".alternativTherapeutenTitle").loadTemplate("#alternativTherapeutenTitleTemplate",b.selectedLeistungsartForTherapeutenSearch),a("input#newLocationSearch").unbind("click"),a(".yourAddress").loadTemplate("#personaddressTemplate",
b.personaddress,{beforeInsert:function(a){V()}}),a("input#newLocation").unbind("geocode:result").geocomplete({country:"ch"}).bind("geocode:result",function(c,d){c=d.geometry;d=b.selectedLeistungsartForTherapeutenSearch;c={latitude:c.location.lat(),longitude:c.location.lng(),maxNrOfTherapeuten:v.maxNrOfTherapeuten,choice:d};c={url:v.searchfortherapeutenUrl,data:c,success:T,cache:!1,async:!0};a(".alternativTherapeutenTable").animatedPost(c)}),T(b),a(".alternativTherapeutenContainer").show()}function T(b){W=
z=0;!0===b.allowGoogleSearchForUser&&0===a("input#newLocation").val().length&&a.each(b.personaddress,function(b){a("input#newLocation").val(this.strasse+" "+this.hausnr+", "+this.city)});a(".alternativTherapeutenTable tbody").loadTemplate("#therapeutenTemplate",b.therapeuten);a(".alternativTherapeutenTable tbody tr").each(function(b){a(this).attr({id:b,style:"display:none"})});R(b)}function R(b){W+=parseFloat(v.shownTherapeuten);a("#moreResults").unbind("click");a.each(b.therapeuten.slice(z,W),function(b,
c){var e=parseFloat(this.latitude),g=parseFloat(this.longitude),f=this.name,h=b+z;a(".alternativTherapeutenTable tbody").find("#"+h).show();a(".alternativTherapeutenTable tbody").find("#"+h).find(".map").attr({"data-coordinate-x":e,"data-coordinate-y":g,"data-provider-name":f});a(".alternativTherapeutenTable tbody").find("#"+h).find(".googleMaps").attr("id","providerMap"+h);window.setTimeout(function(){d.createDefaultMapWithCenteredMarker("providerMap"+h,e,g,f)},1);S(h,W,this.printMapsUrl)});z=W;
z<b.therapeuten.length?(U(b),a("#moreResults").show()):a("#moreResults").hide()}function U(b){a("#moreResults").click(function(){R(b)})}function V(){a("input#newLocationSearch").click(function(){a("input#newLocation").trigger("geocode")})}function Q(b){a(document).mouseup(function(c){(!b.is(c.target)&&0===b.has(c.target).length||"p"===c.target.tagName.toLowerCase()&&b.is(a(c.target).parent()))&&b.find("#leistungsearchbarautocomplete").hide()})}function X(){a("input#leistungssearchbutton").click(function(b){""!==
a("#leistungsearchbar").val()&&2<a("#leistungsearchbar").val().length&&(a("#leistungsearchbarautocomplete").hasClass("noResults")?a("#leistungsearchbarautocomplete \x3e li:nth-child(1)").addClass("hovered"):(0===a("#leistungsearchbarautocomplete li").length?(b=a("#leistungsearchbar").val(),g()):(b=a("#leistungsearchbarautocomplete \x3e li:nth-child(1)").text(),g(),a("#leistungsearchbar").val(b),a("#leistungsearchbarautocomplete").empty().hide()),A([b])))})}function S(b,c,d){a(".alternativTherapeutenTable tbody").find("#"+
b).find("a.print").click(function(){a(".alternativTherapeutenContainer").find("#"+b).show().parentsUntil(".alternativTherapeutenTable tbody").andSelf().siblings().hide();if(0!==a("input#newLocation").val().length){var e=a("input#newLocation").val();a(".findAddress").append("\x3cdiv class\x3dnewAddress\x3e"+e+"\x3c/div\x3e")}else a(".findAddress").hide();a(".alternativTherapeutenTable tbody").find("#"+b).find(".map").hide();a(".alternativTherapeutenContainer").find(".location").after('\x3cimg class\x3dstaticMap src\x3d"'+
d+'" /\x3e');a(".alternativTherapeutenContainer").find("#"+b).addClass("printView");a(".alternativTherapeutenContainer").printArea();a(".newAddress").remove();a(".staticMap").remove();a(".findAddress").show();a(".alternativTherapeutenTable tbody").find("#"+b).find(".map").show();a(".alternativTherapeutenContainer").find("#"+b).removeClass("printView");for(e=0;e<c;e++)a("#providerMap"+e+".googleMaps").parent().parent().show()})}var v={leistungssucheDataUrl:"",processkatalogchoiceDataUrl:"",searchboxNoResultsText:"",
searchboxNoResultsLink:"",searchboxNoResultsLinkText:"",redirectUrl:"",isFromTeaser:"true",processdialogchoiceDataUrl:"",leistungskatalogDataUrl:"",alphabetLetters:[],selecteduserchoice:{userChoices:[]},katalogEmptyPageText:"",showCatalogOnInit:"",showKatalogLabel:"",multiChoiceInfoText:"",radioButtonInfoText:"",selectAllText:"",shownTherapeuten:"",maxNrOfTherapeuten:"",searchfortherapeutenUrl:"",googleMapsUrl:"",getPolicyNrUrl:""},N=null,I=null,D={errorPlacement:function(a,b){a.appendTo(b.parents(".optioncontainer").parents("#userchoicedialogoptions").next(".message"))},
errorElement:"div",errorClass:"validationError",submitHandler:y},z=0,W=0,Y=null;return{init:function(a){v=a;d.loadScript("cssNamespace.pkportal.leistungenfinden.initComponent",v.googleMapsUrl)},initComponent:function(){b();p();m(v.alphabetLetters[0]);a("#showKatalogLink").click(l);a("#hideKatalogLink").click(g);X();f();"true"===v.showCatalogOnInit?(l(),v.showCatalogOnInit=!1):(void 0!==v.selecteduserchoice&&v.selecteduserchoice.userChoices&&"true"!==v.isFromTeaser&&(v.selecteduserchoice.isDialogChoice?
y(v.selecteduserchoice.userChoices):A(v.selecteduserchoice.userChoices)),a(".leistungskatalogentry").click(function(b){b=a(this).text();g();G(b)}),F())},initTeaser:function(a){v=a;p();F()}}}(jQuery,cssNamespace.pkportal.validation,cssNamespace.pkportal.animatedLoader,cssNamespace.pkportal.utils,cssNamespace.pkportal.googleMaps,cssNamespace.pkportal.systemMessage);
cssNamespace.pkportal.leistungsuebersicht_details=function(a,e,k,h){function d(a){a.find("a").addClass("link")}function c(b){a("#leistungsuebersichtDetailsTreatmentDate").text(b.result.treatmentDate);a("#leistungsuebersichtDetailsProvider").text(b.result.provider);a("#leistungsuebersichtDetailsBetrag").text(b.result.betrag);a("#leistungsuebersichtDetailsBetragCurrency").text(b.result.betragCurrency);a("#leistungsuebersichtDetailsInvoiceNr").text(b.result.invoiceNr);a("#leistungsuebersichtDetailsStatus").text(b.result.status);
a("#leistungsuebersichtDetailsPaymentType").text(b.result.paymentType);a("#detailsTitle").text(b.result.detailsTitle);a("#detailsDate").text(b.result.detailsDate);e.isBlank(b.result.downloadDocumentUrl)||e.isBlank(g.originalAccountAsPdf)?a("#originalDocumentDownload").hide():(a("#originalDocumentDownload").attr("href",b.result.downloadDocumentUrl),a("#originalDocumentDownload").show());0<b.result.rechnungOverview.length&&a("#leistungsuebersichtDetailsContainer").loadTemplate("#leistungsuebersichtDetailsTotalsTemplate",
b.result);b.result.showFootnote?a("#leistungsuebersichtDetailsContainer .tableFootnote").show():a("#leistungsuebersichtDetailsContainer .tableFootnote").hide();if(e.isBlank(g.originalAccountAsPdf)||e.isBlank(g.invoicePdfDownload))a("#leistunsabrechnungenDocument").parent().hide();else{var c=[];a.each(b.result.leistungsabrechnung,function(a,b){b.show_link&&c.push(b)});1<c.length?a(".textDetails ul").loadTemplate("#downloadDocumentUrlTemplate",c,{afterInsert:d}):1===c.length?a("#leistunsabrechnungenDocument").attr("href",
c[0].downloadDocumentUrl):0===c.length&&a("#leistunsabrechnungenDocument").parent().hide()}a(".rechnungsOverview thead tr th").each(function(){a(this).find("span.down").removeClass("selected").show();a(this).find("span.up").removeClass("selected").show()});var f="#leistungsuebersichtdetails_"+b.searchParams.sortOrder.property;"DESC"===b.searchParams.sortOrder.direction?(a(f).find("span.down").removeClass("selected").show(),a(f).find("span.up").addClass("selected").hide()):(a(f).find("span.down").addClass("selected").hide(),
a(f).find("span.up").removeClass("selected").show())}function f(){a("#leistungsuebersichtDetails").on("click",".rechnungsOverview thead tr th",function(){var b=a(this).attr("id").replace("leistungsuebersichtdetails_","").toUpperCase(),d=a(this).find("span.down").hasClass("selected");a(this).find("span.up").hasClass("selected");e.doPost({url:g.sortUrl,data:{type:b,direction:d?"DESC":"ASC",rechnungNr:g.rechnungNr},success:c})})}function l(){a("#leistungsuebersichtDetails .infoInnerLink a").click(function(){void 0===
a("#leistunsabrechnungenDocument").attr("href")&&a("#leistungsuebersichtDetails .infoInnerLink .popup").fadeIn()});a("#leistungsuebersichtDetails .infoInnerLink .popup .close").click(function(){a("#leistungsuebersichtDetails .infoInnerLink .popup").fadeOut()})}var g={};return{initializeComponent:function(a,d,h,p,t){g.rechnungNr=a;g.resultsUrl=d;g.sortUrl=h;g.originalAccountAsPdf=p;g.invoicePdfDownload=t;e.doPost({url:g.resultsUrl,data:{rechnungNr:g.rechnungNr},success:c});f();k.init();l()},setNumberParamAndUrlFrageRechnung:function(b){var c=
a(".textDetails").find("#leistungsuebersichtDetailsInvoiceNr").text();a(".frageZuRechnungRow button.button").click(function(){""!==c&&window.location.replace(""+b+".step_ENTERQUESTION.html?nid\x3d"+c)})}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.print,cssNamespace.pkportal.filterResultsTable);
cssNamespace.pkportal.teaser.kostenbeteiligung=function(a,e){function k(c){a("#kostenbeteiligungTeaser_css").text(c.css);a("#kostenbeteiligungTeaser_customer").text(c.customer);a("#kostenbeteiligungTeaser_uninsuredCosts").text(c.uninsuredCosts);a("#kostenbeteiligungTeaser_total").text(c.total);a("#kostenbeteiligungTeaser_currency").text(c.currency);c.show_uninsuredCosts?a("#kostenbeteiligungTeaser .nvk_row").show():a("#kostenbeteiligungTeaser .nvk_row").hide();a("#kostenbeteiligung_graphic").empty();
a("#kostenbeteiligung_graphic").data("currency",c.currency);a("#kostenbeteiligung_graphic").data("maxvalue",c.graphics_total_num);a("#kostenbeteiligung_graphic").data("customervalue",c.graphics_customer_num);a("#kostenbeteiligung_graphic").data("nvkvalue",c.graphics_uninsuredCosts_num);a("#kostenbeteiligung_graphic").startPieAnimation();a("#kostenbeteiligungTeaser .countUpToValue").startCountAnimation()}var h,d;return{init:function(a,f){h=a;d=f;e.doPost({url:h,data:{rechnungNr:d},success:k})}}}(jQuery,
cssNamespace.pkportal.utils);
cssNamespace.pkportal.footerShared=function(a){return{initFooter:function(e){a("#footer div.footerButton").click(function(){function k(){a.unblockUI();a(window).off("resize.footerMenu");d.$clickedButton.removeClass("active");a("BODY").removeClass("noScrollMobile")}a("BODY").addClass("noScrollMobile");var h=a(this).clone(),d={$clonedMarkup:h,$clickedButton:a(this)};(function(){h.addClass("active");a(".close-X",h).click(k);a(window).on("resize.footerMenu",function(){h.parent().css("left",d.$clickedButton.offset().left-
1)});a(".footerMenu",h).show();var c=setInterval(function(){a(".mobile").is(":visible")?0<a("DIV.footerButton.active DIV.map A").length&&(a("DIV.footerButton.active DIV.map A").click(),clearInterval(c)):clearInterval(c)},500)})();e(d,k)})}}}(jQuery);
cssNamespace.pkportal.versicherungsdeckungErrorMessages=function(a){return{populateErrorMessages:function(e){var k=!1,h=!1,d;a.each(e,function(c,e){d="yellow"===e.color?a(".versicherungsdeckung .supplementaryInsurance .errorMessage"):a(".versicherungsdeckung .basicInsurance .errorMessage");d.empty();e.hasMessages&&(c="yellow"===e.color?!1:!0,c?k=!0:h=!0,d.loadTemplate(a("#errorMessageContainerTemplate"),e,{beforeInsert:function(a){a.find(".validationError").addClass(e.color)}}))});k?a("html, body").animate({scrollTop:a(".versicherungsdeckung .basicInsurance .errorMessage").offset().top},
1E3):h&&a("html, body").animate({scrollTop:a(".versicherungsdeckung .supplementaryInsurance .errorMessage").offset().top},1E3)}}}(jQuery);
cssNamespace.pkportal.versicherungsdeckung=function(a,e,k,h,d){function c(){var b={url:D.getAgencyUrl,success:U};a(".contactDataTeaser").css("display","flex");a(".contactDataTeaser").animatedPost(b)}function f(){var b={data:{insuranceCompany:a(".companiesDropDown select").val()},url:D.setInsuranceCompanyUrl};e.doPost(b)}function l(b){var c=a("\x3cselect\x3e",{id:"currentInsuranceCompany",name:"currentInsuranceCompany"}).addClass("field dropdown currentInsuranceCompany"),d=a.merge(a.merge([{bag:-1,
name:D.pleaseSelectInsurerText}],b.favoriteCompanies),a.merge([{bag:-1,name:"------------------------------"}],b.otherCompanies));a.each(d,function(d,e){d=a("\x3coption\x3e").val(e.bag).text(e.name);b.currentInsurrer===e.bag&&d.prop("selected",!0);d.appendTo(c)});a("div#insuranceCompaniesContainer span.companiesDropDown").append(c)}function g(){a("button.updatePolicyButton").click(function(b){a("#currentInsuranceCompany").is(":enabled")||a("#doctorName").is(":enabled")?a("#versicherungdeckungForm").validate({submitHandler:n,
errorElement:"span",errorClass:"validationError",errorPlacement:function(b,c){c=c.attr("id");"doctorName"===c?(a(".doctorError").show(),b.appendTo(a(".doctorError"))):"currentInsuranceCompany"===c&&b.appendTo(a(".insuranceCompanyError"))}}):(b.preventDefault(),n())});a(".policyUpdateWindow .close").click(function(){var a=D.policyUpdateCloseButtonUrl;h.close();document.location.href=a+".html"})}function b(){a("button.orderOfferButton").click(function(b){a("#currentInsuranceCompany").is(":enabled")||
a("#doctorName").is(":enabled")?a("#versicherungdeckungForm").validate({submitHandler:t,errorElement:"span",errorClass:"validationError",errorPlacement:function(b,c){c=c.attr("id");"doctorName"===c?(a(".doctorError").show(),b.appendTo(a(".doctorError"))):"currentInsuranceCompany"===c&&b.appendTo(a(".insuranceCompanyError"))}}):(b.preventDefault(),t())});a(".orderOfferWindow .close").click(function(){var a=D.orderOfferCloseButtonUrl;h.close();document.location.href=a+".html"})}function m(){a("button.cancel").click(function(){document.location.href=
D.cancelOfferButtonUrl+".html";return!1})}function n(){var b={currentInsurer:a(".companiesDropDown select").val()};b={beforeSend:w,data:b,url:D.modifyOnlineAntragUrl,success:p};a(".policyUpdateWindow").animatedPost(b)}function p(){a(".policyUpdateWindow").hide()}function t(){var b={currentInsurer:a(".companiesDropDown select").val()};b={beforeSend:u,data:b,url:D.modifyOnlineAntragUrl,success:r};a(".orderOfferWindow").animatedPost(b)}function w(){h.openElement(a(".policyUpdateWindow"),500)}function u(){h.openElement(a(".orderOfferWindow"),
500)}function r(b){b.success?(a(".orderOfferWindow .pdfAvailable").show(),a(".orderOfferWindow .noPdfAvailable").hide()):(a(".orderOfferWindow .pdfAvailable").hide(),a(".orderOfferWindow .noPdfAvailable").show())}function x(){var b=function(){window.location.href=D.searchDoctorUrl+".html"};a("#docfinderOpenButton").click(b);a("#doctorName").click(b)}function A(b){!0===b.show?(a("#doctorContainer").show(),a("#doctorName").val(b.label)):a("#doctorContainer").hide()}function y(){B(!0)}function G(){B(!1)}
function E(a){return{avbVersion:a.attr("avbVersion"),fachlSchluessel:a.attr("fachlSchluessel"),anbieter:a.attr("anbieter"),productLevel:a.attr("productLevel"),networkId:a.attr("networkId")}}function C(a){return"[avbVersion\x3d"+a.avbVersion+"][fachlSchluessel\x3d"+a.fachlSchluessel+"][anbieter\x3d"+a.anbieter+"][productLevel\x3d"+a.productLevel+"][networkId\x3d"+a.networkId+"]"}function H(a,b){b.attr("avbVersion",a.avbVersion);b.attr("fachlSchluessel",a.fachlSchluessel);b.attr("anbieter",a.anbieter);
b.attr("productLevel",a.productLevel);b.attr("networkId",a.networkId)}function B(b){var c=E(a("#kvgProductsDropdown option:selected"));c.isSelected=b;b={data:c,url:D.selectKvgProductUrl,success:Q};N();a(".animatedSegment").animatedPost(b)}function q(){O(a(this),!0)}function F(){O(a(this),!1)}function O(b,c){b=b.closest(".productContainer");b.find(".allProductAttributesContainer").slideDown("slow");b=E(b);b.isSelected=c;c={data:b,url:D.selectProductUrl,success:Q};N();a(".animatedSegment").animatedPost(c)}
function M(){P(a(this),a(this).attr("attrVal"))}function J(){P(a(this),a(this).val())}function L(){var b=a(this);P(b,!0)}function K(){var b=a(this);P(b,!1)}function P(b,c){var d=E(b.closest(".productContainer"));d.productAttributeId=b.closest(".productAttributeContainer").attr("attrId");d.productAttributeValue=c;b={data:d,url:D.updateProductAttributeUrl,success:Q};N();a(".animatedSegment").animatedPost(b)}function T(b){a(":button.orderOfferButton").each(function(){!0===b?a(this).show():a(this).hide()})}
function R(b){a(":button.updatePolicyButton").each(function(){!0===b?a(this).show():a(this).hide()})}function U(b){if(null!==b){var c=a("#transformUrl").attr("href"),d=c.substring(0,c.lastIndexOf("/"));b.contactSalesPerson.pathToFoto=[d,b.contactSalesPerson.pathToFoto].join("/");c=c.endsWith(b.contactSalesPerson.pathToFoto);c||(b.contactSalesPerson.pathToFoto=[b.contactSalesPerson.pathToFoto,"jcr:content/renditions/cq5dam.web.452.300.jpeg"].join("/"));a(".teaserContent").loadTemplate(a("#contactDataTemplate"),
b,{afterInsert:V});c&&a(".contactDataTeaser .contactPhoto").addClass("contactPhoto--placeholder");b.contactSalesPerson.phone?a(".contactInfo__phone").attr("href","tel:"+b.contactSalesPerson.phone):a(".contactInfo__phone__container").hide();b.contactSalesPerson.email?a(".contactInfo__email").attr("href","mailto:"+b.contactSalesPerson.email):a(".contactInfo__email__container").hide()}}function V(){a(".teaserContent .set-bg-img").each(function(){var b=a(this).attr("src");a(this).css("background-image",
"url('"+b+"')").removeAttr("src")})}function Q(b){var g=b.originalAntragHasKvg;X(b.products);a("#kvgProductsDropdown option").each(function(){a(this).remove()});T(b.showOrderOfferButton);R(b.showUpdatePolicyButton);a("#offerPdf").attr("href",b.offerPdfUrl);var f=b.products;a("#productContainer").loadTemplate(a("#supplementaryInsurance"),f.immutableVvgProducts);f.selectableVvgProducts&&0!==f.selectableVvgProducts.length?(a(".contactDataTeaser").hide(),a(".supplementaryInsurance.additional.animatedSegment").show(),
a("#selectableProductContainer").loadTemplate(a("#selectProductsTemplate"),f.selectableVvgProducts)):(a(".supplementaryInsurance.additional.animatedSegment").hide(),"mycss"===D.mandant.toLowerCase()&&c());a("#kvgContainer").loadTemplate(a("#kvgProductsTemplate"),f.kvgProducts);a("#kvgTotalCostCurrency").text(f.kvgProductsTotalCostCurrency);a("#kvgTotalCostAmount").text(f.kvgProductsTotalCost);a("#vvgTotalCostCurrency").text(f.vvgProductsTotalCostCurrency);a("#vvgTotalCostAmount").text(f.vvgProductsTotalCost);
a("#totalCostCurrency").text(f.totalCostCurrency);a("#totalCostAmount").text(f.totalCost);a("#kvgTotal").text(f.kvgProductsTotalCost);a("#modelPopup").loadTemplate(a("#infoPopupTemplate"),f.grundversicherungPopup);S(b.products);!0===g?a("#kvgProductSelect").iCheck("disable"):a("#kvgProductSelect").iCheck("enable");a.each(f.kvgProducts,function(b,c){var d=c.productKey;!0===c.selected&&(a("#kvgProductDescription").text(c.productDescription),b=C(d),a("select#kvgProductsDropdown option"+b).prop("selected",
!0),H(d,a("#kvgProduct")),void 0!==c.productAttributes&&a.each(c.productAttributes,function(a,b){v(b.inputType,d,b.attributeId,b.currentValueContent,!b.immutable)}))});!1===f.hasKvgProduct&&a("#kvgProductDescription").text(D.defaultKvgText);a.each(f.selectableVvgProducts,function(b,c){var d=c.productKey;b=C(d);b=a("div"+b);!0===c.selected?(b.find(".vvgProduct").prop("checked",!0),b.find(".allProductAttributesContainer").show(),b.find(".discountContainer").css("display","block")):b.find(".vvgProduct").prop("checked",
!1);!0===c.selectable?b.find(".vvgProduct").iCheck("enable"):b.find(".vvgProduct").iCheck("disable");void 0!==c.productAttributes&&a.each(c.productAttributes,function(a,b){v(b.inputType,d,b.attributeId,b.currentValueContent,!b.immutable)})});a("#insuranceStartDate").text(b.insuranceStartDate);A(b.doctor);a(".doctorError").hide();d.populateErrorMessages(b.errorMessages);!0===I&&(!1===g?(e.doPost({url:D.getInsuranceCompaniesUrl,success:l}),a("#insuranceCompaniesContainer").show()):a("#insuranceCompaniesContainer").hide(),
I=!1);a("#kvgProductSelect").prop("checked",f.hasKvgProduct);!1===f.hasKvgProduct?a(".kvgProductRootContainer").deactivateElement():a(".kvgProductRootContainer").activateElement();k.initNiceInputs(!0)}function X(b){"undefined"===typeof a(".basicInsuranceTeaser .initialValue").data("value")&&(a(".basicInsuranceTeaser .initialValue").data("value",b.kvgProductsTotalCost),a(".supplementaryInsuranceTeaser .initialValue").data("value",b.vvgProductsTotalCost),a(".totalTeaser .initialValue").data("value",
b.totalCost))}function S(b){var c=a(".totalTeaser .initialValue").data("value")!==b.totalCost;a.each([".basicInsuranceTeaser",".supplementaryInsuranceTeaser",".totalTeaser"],function(b,d){b=a(d);d=b.find(".initialValue").data("value");c?(b.find(".newLabel").show(),b.find(".initialValue").show(),b.find(".initialValue .value").text(d)):(b.find(".newLabel").hide(),b.find(".initialValue").hide(),b.find(".initialValue .value").text(""))})}function v(b,c,d,e,g){var f=c.avbVersion+"_";f+=c.fachlSchluessel+
"_";f+=c.anbieter+"_";f+=c.productLevel+"_";f+=c.networkId;g=!0===g?"enable":"disable";c=C(c);c=a(c);"dropdown"===b?c.find("div[attrId\x3d"+d+"] select.productAttribute").val(e):"checkbox"===b?(!0===e?c.find("div[attrId\x3d"+d+"] input").prop("checked",!0):c.find("div[attrId\x3d"+d+"] input").prop("checked",!1),c.find("div[attrId\x3d"+d+"] input").iCheck(g)):"radio"===b&&(c.find("div[attrId\x3d"+d+"] input").attr("name",f+"_"+d),c.find("div[attrId\x3d"+d+'] input.productAttribute[attrval\x3d"'+e+
'"]').prop("checked",!0),c.find("div[attrId\x3d"+d+"] input").iCheck(g))}function N(){a(".contactDataTeaser").hide()}var I,D={getProductsUrl:"",selectProductUrl:"",updateProductAttributeUrl:"",modifyOnlineAntragUrl:"",currentPerson:"",policyNumber:"",searchDoctorUrl:"",selectKvgProductUrl:"",cancelOfferButtonUrl:"",policyUpdateCloseButtonUrl:"",orderOfferCloseButtonUrl:"",getInsuranceCompaniesUrl:"",setInsuranceCompanyUrl:"",pleaseSelectInsurerText:"",defaultKvgText:"",getAgencyUrl:"",mandant:""};
a.addTemplateFormatter("cssNamespace.pkportal.versicherungsdeckung.productAttributeFormatter",function(b,c){c=b.inputType;"radio"===c?this.loadTemplate(a("#radioButtonTemplate"),b.possibleValues):"dropdown"===c?this.loadTemplate(a("#dropDownTemplate"),b):"checkbox"===c&&this.loadTemplate(a("#checkBoxTemplate"),b)});a.addTemplateFormatter("cssNamespace.pkportal.versicherungsdeckung.kvgFormatter",function(b,c){H(b.productKey,this);this.text(b.productLabel);a("#kvgProductsDropdown").append(this);a("#kvgProductAttributes").loadTemplate(a("#inputTypesTemplate"),
b.productAttributes);a("#kvgProductAttributes .attributePopup").css("display","inline-block")});a.addTemplateFormatter("cssNamespace.pkportal.versicherungsdeckung.infoPopupFormatter",function(b,c){"undefined"!==typeof b&&this.loadTemplate(a("#infoPopupTemplate"),b)});return{init:function(c){D=c;I=!0;b();m();x();g();a(".mutieren.versicherungsdeckung").off("ifClicked","**");a(".mutieren.versicherungsdeckung").off("ifChecked","**");a(".mutieren.versicherungsdeckung").off("ifUnchecked","**");a(".mutieren.versicherungsdeckung").off("change",
"**");a(".mutieren.versicherungsdeckung").on("ifChecked",".vvgProduct",q);a(".mutieren.versicherungsdeckung").on("ifUnchecked",".vvgProduct",F);a(".mutieren.versicherungsdeckung").on("change","#kvgProductsDropdown",y);a(".mutieren.versicherungsdeckung").on("ifChecked","#kvgProductSelect",y);a(".mutieren.versicherungsdeckung").on("ifUnchecked","#kvgProductSelect",G);a(".mutieren.versicherungsdeckung").on("ifClicked","input:radio.productAttribute",M);a(".mutieren.versicherungsdeckung").on("ifChecked",
"input:checkbox.productAttribute",L);a(".mutieren.versicherungsdeckung").on("ifUnchecked","input:checkbox.productAttribute",K);a(".mutieren.versicherungsdeckung").on("change","select.productAttribute",J);a(".mutieren.versicherungsdeckung").on("change",".companiesDropDown select",f);c={data:{currentPerson:D.currentPerson,policyNumber:D.policyNumber},url:D.getProductsUrl,success:Q};a(".animatedSegment").animatedPost(c)}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.initcheckandradiobuttons,
cssNamespace.pkportal.popup,cssNamespace.pkportal.versicherungsdeckungErrorMessages);
cssNamespace.pkportal.passwordStrength=function(a){function e(){d.keyup(function(){var b=k(d.val()),c=f;c.empty();c=a("\x3cdiv\x3e").addClass("passwordStrength").appendTo(c);for(var e=0;5>e;e++){var h=a("\x3cdiv\x3e").addClass("passwordBox").appendTo(c);b>=e&&h.addClass("active")}c.addClass(g[b]);c=f.find(".passwordStrength");a("\x3cdiv\x3e").addClass("information").appendTo(c).text(l[b])})}function k(b){var c=0;d.complexify({strengthScaleFactor:.5,banmode:"strict"},function(b,d){cssNamespace.pkportal.validation.isValidPasswordProfile(a(this).val())&&
(c=Math.round(d/100*4))});return c}function h(){a.each([d,c],function(b,c){a(this).on("blur",function(){f.find(".passwordStrength").first().hide()});a(this).on("focus",function(){f.find(".passwordStrength").first().show()})})}var d=null,c=null,f=null,l=[],g=["red","orange","orange","green","green"];return{init:function(a,g,k,p){d=a;c=g;f=k;l=p;e();h()}}}(jQuery);
cssNamespace.pkportal.loginRegistrationCommonValidationSettings=function(a,e){function k(b,c){return 0===a.grep(a("input",a(c).parent()),function(a,c){return b.invalid.hasOwnProperty(a.name)}).length}function h(b,c){a(b.currentForm).data("running-validation-mode",c)}function d(b,d){var f=b.settings;c(b,d);if(d.name in b.invalid&&(!b.optional(d)||"FORM_VALIDATION"===a(b.currentForm).data("running-validation-mode"))){if(0<a(b.settings.errorElement+"."+b.settings.errorClass+":contains("+b.invalid[d.name]+
")",a(d).parent()).length){var h=a(b.settings.errorElement+"."+b.settings.errorClass+":contains("+b.invalid[d.name]+")",a(d).parent()).data("triggering-field-name");e.isInArray(d.name,h)||h.push(d.name)}else h=a("\x3c"+b.settings.errorElement+"\x3e"),h.addClass(b.settings.errorClass),h.data("triggering-field-name",[d.name]),h.text(b.invalid[d.name]),f.errorPlacement(h,d);f.highlight(d,f.errorClass);l(d).find(":not(."+b.settings.errorClass+")").show()}else k(b,d)?(g(b,d),l(d).find("."+b.settings.errorClass).remove(),
l(d).find(":not(."+b.settings.errorClass+")").hide()):f.unhighlight(d,f.errorClass)}function c(b,c){l(c).find("."+b.settings.errorClass).each(function(b,d){b=a(d);d=b.data("triggering-field-name");if(!e.isInArray(c.name,d))return!0;1<d.length?e.removeFromArrayInPlace(c.name,d):b.remove()})}function f(b,c){h(b,"FIELD_VALIDATION");a(c).hasClass(b.settings.errorClass)&&(a(b.currentForm).valid(),d(b,c));a(b.currentForm).removeData("running-validation-mode")}function l(b){return a(b).parents().has(".message").first().find(".message")}
function g(b,c){a("input",a(c).parent()).each(function(a,c){b.settings.unhighlight(c,b.settings.errorClass)})}return{getSettings:function(){return{onfocusin:function(a,c){f(this,a)},onfocusout:function(b,c){h(this,"FIELD_VALIDATION");a(this.currentForm).valid();d(this,b);a(this.currentForm).removeData("running-validation-mode")},onkeyup:function(a,c){f(this,a)},onclick:!1,errorElement:"div",errorClass:"validationError",focusInvalid:!1,errorPlacement:function(a,c){l(c).prepend(a)},showErrors:function(b,
c){var e=this;try{"FIELD_VALIDATION"!==a(e.currentForm).data("running-validation-mode")&&(h(e,"FORM_VALIDATION"),a("input",a(this.currentForm)).each(function(a,b){d(e,b)}),a(e.currentForm).removeData("running-validation-mode"))}catch(p){console&&console.error&&console.error(p.message)}},highlight:function(b,c,d){a(b).addClass(c)},unhighlight:function(b,c,d){a(b).removeClass(c)}}}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.loginRegistrationCommon=function(a,e,k,h,d,c){function f(){return{beforeSend:k.disableButtons,complete:k.enableButtons,success:function(b){if(b.success)document.location.href=t;else if(0!==a("#errorNotificationMessage").length){var c=a("#errorNotificationMessage");c.show();c.find(".title").text(b.title);c.find(".message").text(b.message);a(n).find(".message:not(.notificationMessage.withForm .message)").empty();200<a(document).scrollTop()&&a("html, body").animate({scrollTop:"200px"},
1E3)}else{c=b.title;var d=b.message;h.populateSystemMessages(["undefined"!==typeof c?"undefined"!==typeof d?[c,d]:c:"undefined"!==typeof d?d:""],"systemMessageUsersettingsLoginRegistration","yellow")}w&&w(b)}}}function l(){a(p).focus(function(){a(this).parents(".row").addClass("focused")})}function g(){a(p).blur(function(){a(this).parents(".row").removeClass("focused")})}function b(b,c){u.url=b;t=c;l();g();e.initNiceInputs();m();a(n).validate(r)}function m(){a(".checkbox label a[href]").click(function(b){a(this).hasClass(d.getPopupLinkClass())&&
(d.open(a(this).attr("href")),b.preventDefault());b.stopPropagation()})}var n=".loginRegistration form",p=n+" input[type\x3dtext], "+n+" input[type\x3dpassword]",t=null,w;var u=f();var r=a.extend(c.getSettings(),{submitHandler:function(b){b={data:a(b).serialize()+"\x26_charset_\x3dutf-8"};k.doPost(a.extend(u,b))}});return{init:b,initWithCustomFormSelector:function(a,c,d){n=d;b(a,c)},overrideValidatorSettings:function(b){a.extend(!0,r,b)},overrideAjaxSettings:function(b){a.extend(!0,u,b)},addFocusListenersToFormatRow:function(){l();
g()},addBackButtonHandler:function(){a("form button.cancel").click(function(){window.history.back()})},addBackButtonHandlerWithLocation:function(b){a("form button.cancel").click(function(){window.location.href=b})},getValidationSettings:function(){return r},getDefaultAjaxSettings:f,addAdditionalSuccessHandler:function(a){w=a}}}(jQuery,cssNamespace.pkportal.initcheckandradiobuttons,cssNamespace.pkportal.utils,cssNamespace.pkportal.systemMessage,cssNamespace.pkportal.popup,cssNamespace.pkportal.loginRegistrationCommonValidationSettings);
cssNamespace.pkportal.loginMtanShared=function(a,e,k){function h(a){a.shouldRedirect&&window.location.replace(c.medusaCheckUrl+"?Location\x3d"+a.location)}function d(a){f=a.location}var c={};var f=void 0;var l={onkeyup:!1,onfocusin:!1,onfocusout:!1,submitHandler:function(a){e.disableButtons();a.submit()}};return{initilizeComponent:function(g,b,m,n,p){c.formSelector=g;c.medusaCheckUrl=b;c.shouldRedirectUrl=m;c.locationUrl=n;g={url:c.shouldRedirectUrl,data:{FORM_TOKEN:e.getParameterFromUrl(document.URL,
"FORM_TOKEN"),time:e.getParameterFromUrl(document.URL,"time")},async:!0,success:h};e.doPost(g);g=e.getParameterFromUrl(document.URL,"FORM_TOKEN");a("#FORM_TOKEN").attr({value:g});g={url:c.locationUrl,data:{Location:e.getParameterFromUrl(document.URL,"Location")},async:!0,success:d};e.doPost(g);g=f;a("#Location").attr({value:g});cssNamespace.pkportal.validation.handleFormSubmissionOnEnter(a(p));g=k.getSettings();a(p).validate(a.extend(!0,{},g,l))}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.loginRegistrationCommonValidationSettings);
cssNamespace.pkportal.login=function(a,e,k,h){var d;return{initilizeComponent:function(c,f,l,g,b,m){d=l;k.initilizeComponent("#loginPostForm",c,f,g,"#loginPostForm");"1"===e.getParameterFromUrl(document.URL,"error")&&(c={url:d,data:{error:e.getParameterFromUrl(document.URL,"error"),message:e.getParameterFromUrl(document.URL,"message")},async:!0,success:cssNamespace.pkportal.login.errorMessageSuccessCallback},e.doPost(c));h.addFocusListenersToFormatRow();e.isSmallScreen()||a("input#email").focus()},
errorMessageSuccessCallback:function(c){if(c.error){var d=a("#loginPostForm").parents(".content").find(".notificationMessage.error");d.find(".title").html(c.message);d.find(".message").html(c.details);d.show()}}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.loginMtanShared,cssNamespace.pkportal.loginRegistrationCommon);
cssNamespace.pkportal.mtan=function(a,e,k,h){return{initilizeComponent:function(d,c,f,l){k.initilizeComponent("#mtanPostForm",d,c,f,"#mtanPostForm");h.addBackButtonHandlerWithLocation(l);h.addFocusListenersToFormatRow();d=d+"?Location\x3d"+e.getParameterFromUrl(document.URL,"Location");a("#sendNewSmsToken").attr("href",d);e.isSmallScreen()||a("input#smscode").focus()}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.loginMtanShared,cssNamespace.pkportal.loginRegistrationCommon);
cssNamespace.pkportal.nutzungsvereinbarung=function(a,e){function k(b){a("#submitButton").click(function(a){a.preventDefault();b.animatedPost({url:l,success:function(){e.windowLocationReplace(f)}})})}function h(){a("#declineButton").click(function(b){a("#buttonBar").toggle();a("#declineNoteContainer").toggle()})}function d(){a("#cancelButton").click(function(b){a("#buttonBar").toggle();a("#declineNoteContainer").toggle()})}function c(){a("#okButton").click(function(a){e.windowLocationReplace(g)})}
var f="",l="",g="";return{init:function(b,e,n){f=e;l=b;g=n;k(a("#nutzungsvereinbarungForm"));h();d();c()}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.versicherungsdeckung_va=function(a,e,k,h,d){function c(a){a=a.split(".");a=new Date(a[2],parseInt(a[1],10)-1,a[0]);var b=(new Date).getFullYear();a=new Date>a?new Date(b+1,11,31):new Date(b,11,31);a={editable:!1,clear:!1,format:k.getFormatString(),min:!0,max:a,onClose:function(a){this.$node.focusout()},onStart:function(){var a=new Date;this.set("select",[a.getFullYear(),a.getMonth()+1,a.getDate])}};f(a)}function f(b){a("input.birthDate").pickadate(b);a("input.birthDate").prop("disabled",
!1)}function l(){a("form#enterChildren").validate(a.extend(!0,e.formSettings,{onfocusout:function(a){this.element(a)},errorPlacement:function(a,b){b=b.parents(".children").find(".message");b.empty();a.appendTo(b)},success:!1,submitHandler:E}))}function g(){a("form#enterChildren").find(".button.addChild").click(function(b){var c={url:q.enterChildUrl,success:w};a(".deckung").animatedPost(c);b.preventDefault()})}function b(){a("form#enterChildren").on("click",".close-X.removeChild",function(){a(this).parents(".child").addClass("deleteThisChild");
a(".removeChildMessage").show();var b=a(window).width()/2-parseFloat(a(".removeChildMessage").css("width"))/2,c=a(window).height()/2-parseFloat(a(".removeChildMessage").css("height"))/2;a(".removeChildMessage").hide();a.blockUI({message:a(".removeChildMessage"),css:{cursor:"default",border:"none",left:b+20,top:c-15},overlayCSS:{cursor:"default",opacity:.2},onBlock:function(){a(".blockUI.blockOverlay").one("click",m)}})})}function m(){a("form#enterChildren").find(".deleteThisChild.child").each(function(){a(this).removeClass("deleteThisChild")});
a.unblockUI()}function n(){a("form#enterChildren").find(".deleteThisChild.child").each(function(){a(this);var b={data:{personSlot:parseInt(a(this).find(".personSlot").val(),10)},url:q.removeChildUrl,success:w};a(".deckung").animatedPost(b)});a.unblockUI()}function p(){a("button.cancelOffer").click(function(){document.location.href=q.policyPageUrl})}function t(){a(".versicherungsdeckung").on("focusout","input.firstname",function(){var b=a(this).val(),c=parseInt(a(this).parent().parent().find("input.personSlot").val());
k.doPost({data:{firstname:b,personSlot:c},url:q.setFirstname})});a(".versicherungsdeckung").on("focusout","input.lastname",function(){var b=a(this).val(),c=parseInt(a(this).parent().parent().find("input.personSlot").val());k.doPost({data:{lastname:b,personSlot:c},url:q.setLastname})})}function w(b){u(b);var c=b.child,d=b.additionalChildren;a("#additionalChildren").loadTemplate(a("#child_template"),d);r();3===d.length?a(".addChild").hide():a(".addChild").show();a("#firstname_0").val(c.firstName).prop("disabled",
!1);a("#lastname_0").val(c.lastName).prop("disabled",!1);void 0!==b.childrenPlaceHolder?(a("form#enterChildren").find(".childrenLabel").text(b.childrenPlaceHolder),a("form#enterChildren").find(".childrenLabel").show()):a("form#enterChildren").find(".childrenLabel").hide()}function u(b){a("#offerPdf").attr("href",b.offerPdfUrl);a("#birthdateLabelContainer").loadTemplate(a("#tooltipTemplate"),{tooltipContent:b.tooltipValue});c(b.nextPran);a("form#enterChildren").find(".birthDate").val(b.estimatedBirthdate);
a("form#enterChildren").find(".mandatoryInsuranceWithAdditionalInsuranceValue").text(b.kvgVvgTotal);a("form#enterChildren").find(".mandatoryInsuranceValue").text(b.kvgTotal);a("form#enterChildren").find(".additionalInsuranceValue").text(b.vvgTotal);a("form#enterChildren").find(".totalValue").text(b.total);b.onlyBasicInsurance?(a("#va_with").iCheck("uncheck"),a("#va_without").iCheck("check")):(a("#va_with").iCheck("check"),a("#va_without").iCheck("uncheck"));a(".birthdatetooltip").text(b.tooltipText)}
function r(){a("#additionalChildren .child").each(function(b,c){b=a(c);var d=a(".personSlot",b).val();c=b.attr("id");-1===c.indexOf("_")&&b.attr("id",c+"_"+d);b.find(":text").each(function(b,c){b=a(c);c=b.attr("id");-1===c.indexOf("_")&&b.attr("id",c+"_"+d)})})}function x(){var b={},c={},d={},e={};e.onlyBasicInsurance=a("#va_without").is(":checked");e.estimatedDateOfBirth=a("#birthDate").val();a("form#enterChildren").find(".child").each(function(e,g){b[e]=a(g).find(".firstname").val();c[e]=a(g).find(".lastname").val();
d[e]=a(g).find(".personSlot").val()});a.extend(e,{firstnames:b,lastnames:c,personSlots:d});return e}function A(){var b={data:{estimatedBirthDate:a("#birthDate").val()},url:q.setBirthdayDateUrl,success:u};a(".deckung").animatedPost(b)}function y(){var b={data:{onlyBasicInsurance:!1},url:q.changeKvgVvg,success:u};a(".deckung").animatedPost(b)}function G(){var b={data:{onlyBasicInsurance:!0},url:q.changeKvgVvg,success:u};a(".deckung").animatedPost(b)}function E(){var b=x();b={beforeSend:C,data:b,url:q.calculateOfferUrl,
success:H};a(".orderOfferWindow").animatedPost(b)}function C(){d.openElement(a(".orderOfferWindow"),500)}function H(b){b.success?(a(".orderOfferWindow .pdfAvailable").show(),a(".orderOfferWindow .noPdfAvailable").hide()):(a(".orderOfferWindow .pdfAvailable").hide(),a(".orderOfferWindow .noPdfAvailable").show())}function B(){d.close();document.location.href=q.policyPageUrl}var q={};return{init:function(c,d,e,f,k,u,r,x,C){q.getInitialStateUrl=c;q.setBirthdayDateUrl=d;q.enterChildUrl=e;q.removeChildUrl=
f;q.calculateOfferUrl=x;q.changeKvgVvg=k;q.setFirstname=u;q.setLastname=r;q.policyPageUrl=C;a("input.birthDate").prop("disabled",!0);a("#firstname_0").prop("disabled",!0);a("#lastname_0").prop("disabled",!0);c={url:q.getInitialStateUrl,success:w};a(".deckung").animatedPost(c);h.initNiceInputs();l();a(".versicherungsdeckung").on("click",".getOfferButton",E);a(".versicherungsdeckung").on("change",".birthDate",A);g();b();a(".removeChildMessage .button.cancel, .removeChildMessage .close-X").click(m);
a(".removeChildMessage .button.finalRemove").click(n);p();a("#va_with").on("ifChecked",y);a("#va_without").on("ifChecked",G);t();a(".close").click(B)}}}(jQuery,cssNamespace.pkportal.validation,cssNamespace.pkportal.utils,cssNamespace.pkportal.initcheckandradiobuttons,cssNamespace.pkportal.popup);
cssNamespace.pkportal.geocodeHelper=function(a){return{geocode:function(a,k){var e=new google.maps.LatLng(45.81792,5.95608),d=new google.maps.LatLng(47.808381,10.49234);(new google.maps.Geocoder).geocode({address:a,region:"ch",bounds:new google.maps.LatLngBounds(e,d)},k)}}}(jQuery);cssNamespace.pkportal.docfinder=cssNamespace.pkportal.docfinder||{};
cssNamespace.pkportal.docfinder.map=function(a){function e(b){var c={zoom:7,center:new google.maps.LatLng(46.77,8.27),mapTypeId:google.maps.MapTypeId.ROADMAP};m=new google.maps.Map(a(b)[0],c)}function k(a){new google.maps.Marker({position:a,map:m,title:"Current Position",clickable:!1,icon:g.userPosition,shape:{coord:l,type:"poly"},zIndex:1})}function h(b){a.each(b,function(a,b){b.setOptions({map:m,clickable:!0,icon:g.inactiveDoctor,shape:{coord:l,type:"poly"},zIndex:1})})}function d(b,c){var d,e=
!0;a.each(b,function(a,b){e&&(d=new google.maps.LatLngBounds(b.getPosition(),b.getPosition()),e=!1);d=d.extend(b.getPosition())});c&&(d=d.extend(c));d&&m.fitBounds(d)}function c(a){if("undefined"===typeof a||null===a)throw Error("No doctor markers to render");}function f(a){if(!(a instanceof google.maps.LatLng))throw Error("Expected the user's postion");}var l=[13,0,15,1,16,2,17,3,18,4,18,5,19,6,19,7,19,8,19,9,19,10,19,11,19,12,19,13,18,14,18,15,17,16,16,17,15,18,14,19,14,20,13,21,13,22,12,23,12,
24,12,25,12,26,11,27,11,28,11,29,11,30,11,31,11,32,11,33,8,33,8,32,8,31,8,30,8,29,8,28,8,27,8,26,7,25,7,24,7,23,6,22,6,21,5,20,5,19,4,18,3,17,2,16,1,15,1,14,0,13,0,12,0,11,0,10,0,9,0,8,0,7,0,6,1,5,1,4,2,3,3,2,4,1,6,0,13,0],g={},b=null,m=null;return{init:function(a){g.inactiveDoctor=new google.maps.MarkerImage(a.inactiveDoctor);g.activeDoctor=new google.maps.MarkerImage(a.activeDoctor);g.userPosition=new google.maps.MarkerImage(a.userPosition)},renderMapWithMarkers:function(a,b){c(b);e(a);h(b);d(b)},
renderMapWithoutMarkers:function(a){e(a)},renderMapWithMarkersAndUserPosition:function(a,b,g){f(b);c(g);e(a);k(b);h(g);d(g,b)},renderMapWithoutMarkersButUserPosition:function(a,b){f(b);e(a);k(b)},setActiveMarkerIcon:function(a){b&&(b.setIcon(g.inactiveDoctor),b.setZIndex(1));a.setIcon(g.activeDoctor);a.setZIndex(100);b=a;m.panTo(a.getPosition())}}}(jQuery);cssNamespace.pkportal.docfinder=cssNamespace.pkportal.docfinder||{};
cssNamespace.pkportal.docfinder.tableSorter=function(a){function e(){d=[[5,0]];c=[[0,0]];f={};a.tablesorter.addParser({id:"yesNoAskIcons",format:function(b,c,d){b=a(d).find(".buttons").children();return b.hasClass("okayGreenBig")?0:b.hasClass("cancelRed")?1:b.hasClass("questionMark")?2:999999999999999},type:"numeric"});a.tablesorter.addParser({id:"distanceOrder",format:function(b,c,d){b=parseInt(a(d).data("seconds"),10);if("number"!==typeof b||isNaN(b)||0>b)throw Error("Expected seconds to be a positive Number. Recevied type: "+
typeof b+" Value: "+b);b=Math.round(b/60);return 0===b?1:b},type:"numeric"});f[3]={sorter:"yesNoAskIcons"};f[4]={sorter:"yesNoAskIcons"};f[5]={sorter:"distanceOrder"}}function k(b){a(h).one("sortEnd",function(){a.each(b,function(a,b){b()})})}var h=null,d=null,c=null,f=null,l=!0,g=!0;return{init:function(b){h=b;e();a(h).on("sortEnd",function(b){g&&(a(h).find("th .up, th .down").show(),a(h).find("th.tablesorter-headerDesc").find(".down").hide(),a(h).find("th.tablesorter-headerAsc").find(".up").hide(),
b=a(h).data("tablesorter").sortList,1<b.length&&(a(h).find("th .up, th .down").show(),0===b[0][1]?a(h).find("th .up").eq(b[0][0]).hide():a(h).find("th .down").eq(b[0][0]).hide()))})},sort:function(b){k(b.postSortHandlers);l?(a(h).tablesorter({headers:f,sortList:d,sortAppend:c}),l=!1):(a(h).one("updateComplete",function(){a(h).trigger("sorton",[d])}),a(h).trigger("update"))},prepareTableForResults:function(){g=!0;a(h).trigger("update");a(h+" thead th").find(".up, .down").show()},prepareTableForNoResults:function(){g=
!1;a(h).trigger("update");a(h+" thead th").find(".up, .down").hide()}}}(jQuery);cssNamespace.pkportal.docfinder=cssNamespace.pkportal.docfinder||{};
cssNamespace.pkportal.docfinder.main=function(a,e,k,h,d,c,f,l,g,b){function m(){if("HAUSARZT"===S){var b=a("[name\x3ddoctorName]",a("#docfinder_filterMask")).val(),c=a("[name\x3daddress]",a("#docfinder_filterMask")).val();return b||c?!1:!0}return!1}function n(b,c,d){c=b.address;a("[name\x3daddress]",a("#docfinder_filterMask")).val(c);S=b.searchType;"HAUSARZT"===S?(a("[name\x3daddress]",a("#docfinder_filterMask")).parent().show(),a("[name\x3daddress]",a("#docfinder_filterMask")).parent().prev("label").show()):
(a("[name\x3daddress]",a("#docfinder_filterMask")).parent().hide(),a("[name\x3daddress]",a("#docfinder_filterMask")).parent().prev("label").hide());""!==p()?l.geocode(p(),t):w()}function p(){return a("[name\x3daddress]",a("#docfinder_filterMask")).val()}function t(a,b){"OK"===b&&(v=a[0].geometry.location,w())}function w(){return h.doPost({url:z.getDoctorsListUrl,data:{doctorName:a("#docfinder_filterMask [name\x3ddoctorName]").val(),latitude:v?v.lat():"",longitude:v?v.lng():"",filterByPediatricians:a("#docfinder_filterMask [name\x3dfilterByPediatricians]").is(":checked"),
filterByAcceptsNewPatients:a("#docfinder_filterMask [name\x3dfilterByAcceptsNewPatients]").is(":checked"),filterVisible:a("#docfinder_filterMask").is(":visible")},success:u})}function u(c,e,f){I={};N=[];e="undefined"!==typeof c;f=c.hasOwnProperty("doctorsList");var h=!1,k=!1;e&&f&&(h=c.doctorsList instanceof Array,k=0<c.doctorsList.length);e&&f&&h&&k?(b.prepareTableForResults(),e=c.numberOfResultsMessage,f=c.showTooManyResultsTooltip,a("#numberOfResultsMessage").show(),a("#numberOfResultsMessage .messageContent").text(e),
f?a("#numberOfResultsMessage .tooltip").show():a("#numberOfResultsMessage .tooltip").hide(),c=c.doctorsList,a("#docfinder_doctorsListTable tbody").loadTemplate(a("#docfinder_doctorsListTableTemplate"),c),r(),x(),G()?g.renderMapWithMarkersAndUserPosition("#docfinder_mapContainer",v,I):g.renderMapWithMarkers("#docfinder_mapContainer",I),a(".docfinderLegend").show(),G()?E():b.sort({postSortHandlers:[J,O]})):(d.showNoResultsMessage("#docfinder_doctorsListTable"),a("#numberOfResultsMessage").hide(),c=
a("#docfinder_selectedMarkerDetails"),c.empty(),c.loadTemplate("#docfinder_errorMessageTemplate"),G()?g.renderMapWithoutMarkersButUserPosition("#docfinder_mapContainer",v):g.renderMapWithoutMarkers("#docfinder_mapContainer"),J(),R(),a(".docfinderLegend").hide(),b.prepareTableForNoResults())}function r(){N=a.map(a("#docfinder_doctorsListTable tbody tr"),function(b,c){return a(b).data("doctordetails")})}function x(){a.each(N,function(a,b){a=A(b.latitude,b.longitude);if(I.hasOwnProperty(a))a=I[a];else{var c=
new google.maps.Marker({position:new google.maps.LatLng(b.latitude,b.longitude)});c.set("linkedDoctors",[]);google.maps.event.addListener(c,"click",y);a=I[a]=c}a.get("linkedDoctors").push(b)})}function A(a,b){"number"===typeof a&&(a=a.toFixed(7));"number"===typeof b&&(b=b.toFixed(7));return a+","+b}function y(){var b=this.get("linkedDoctors");if(1===b.length){var c=b[0];a("#docfinder_selectedMarkerDetails").loadTemplate(a("#docfinder_doctorDetailsTemplate"),c);U(b[0])}else 1<b.length&&(g.setActiveMarkerIcon(this),
a("#docfinder_selectedMarkerDetails").loadTemplate(a("#docfinder_multipleDoctorsAtLocationTemplate"),{doctors:b}))}function G(){return v instanceof google.maps.LatLng}function E(){var a=H(),b;for(b=0;b<a.length;b+=25){var c=a.slice(b,b+25);h.doPost({url:z.getDistanceMatrixUrl,data:{origins:v.lat()+","+v.lng(),destinations:c.join(""),travelMode:D},success:C(b)})}}function C(a){return function(b,c,d){B(b,c,d,a)}}function H(){return a.map(a("#docfinder_doctorsListTable tbody tr"),function(b,c){b=a(b).data("doctordetails");
return b.latitude+","+b.longitude+"|"})}function B(c,d,e,g){a("#docfinder_doctorsListTable tbody tr").slice(g,g+25).each(function(d,e){void 0!==c.rows[0].elements[d].duration?(a(e).find("td.distanceToDoctor").data("seconds",c.rows[0].elements[d].duration.value),a(e).find("td.distanceToDoctor").html(q(c.rows[0].elements[d].duration.value))):(a(e).find("td.distanceToDoctor").data("seconds",b.MAXIMAL_NUMBER_VALUE),a(e).find("td.distanceToDoctor").text(""))});F()&&b.sort({postSortHandlers:[O,M]})}function q(a){a=
e.duration(a,"seconds");return 0<a.days()?a.days()+z.dayLabel+" "+a.hours()+z.hourLabel+" "+a.minutes()+z.minuteLabel:0<a.hours()?a.hours()+z.hourLabel+" "+a.minutes()+z.minuteLabel:0<a.minutes()?a.minutes()+z.minuteLabel:z.lessThanOneMinuteLabel}function F(){return a.grep(a("#docfinder_doctorsListTable tbody .distanceToDoctor"),function(b,c){return"undefined"===typeof a(b).data("seconds")||""===a(b).data("seconds")}).length?!1:!0}function O(){a("#docfinder_doctorsListTable tbody tr a.showDoctorDetails").first().click()}
function M(){a(".distanceToDoctor").show();a("#docfinder_recalculateRoutes").show()}function J(){a(".distanceToDoctor").hide();a("#docfinder_recalculateRoutes").hide()}function L(){a("#docfinder_recalculateRoutes").on("click","div:not(.selected)",function(b){b=a(this);D=b.data("route-calculation-mode");b.siblings().removeClass("selected");b.addClass("selected");E()})}function K(){a("#docfinder_cancelButton").click(function(){window.history.back()})}function P(){a("[name\x3daddress]",a("#docfinder_filterMask")).change(function(){""===
p()&&(v=null)})}function T(b){b.preventDefault();b=a(this).data("doctordetails");a("#docfinder_selectedMarkerDetails").loadTemplate(a("#docfinder_doctorDetailsTemplate"),b);U(b);R()}function R(){a("html, body").animate({scrollTop:a("#docfinder_mapContainer").position().top+"px"},"fast")}function U(a){a=A(a.latitude,a.longitude);g.setActiveMarkerIcon(I[a])}function V(b){b=a(this).data("doctordetails");h.doPost({url:z.setSelectedDoctorUrl,data:b,success:Q})}function Q(a,b,c){h.windowLocationReplace(document.referrer)}
function X(){""!==p()?l.geocode(p(),t):w()}var S=null,v=null,N=[],I={},D="DRIVING",z={};a.addTemplateFormatter("yesNoAfterConsultationFormatter",function(a,b){return!0===a||"YES"===a?"okayGreenBig":!1===a||"NO"===a?"cancelRed":"AFTER_CONSULTATION"===a?"questionMark":""});a.addTemplateFormatter("yesNoPrintAlternativeValueFormatter",function(a,b){return!0===a||"YES"===a?z.okayGreenBigTextValue:!1===a||"NO"===a?z.cancelRedTextValue:"AFTER_CONSULTATION"===a?z.questionMarkText:""});a.addTemplateFormatter("showIfMatchingValue",
function(b,c){b===c&&a(this).show()});a.addTemplateFormatter("storeDoctorDetails",function(a,b){return JSON.stringify(a)});return{init:function(a,b,c,d){z.getSearchTypeUrl=a.getSearchTypeUrl;z.getDoctorsListUrl=a.getDoctorsListUrl;z.getDistanceMatrixUrl=a.getDistanceMatrixUrl;z.setSelectedDoctorUrl=a.setSelectedDoctorUrl;z.markerIconPaths=b;z.okayGreenBigTextValue=c.okayGreenBigTextValue;z.cancelRedTextValue=c.cancelRedTextValue;z.questionMarkText=c.questionMarkText;z.dayLabel=d.days;z.hourLabel=
d.hours;z.minuteLabel=d.minutes;z.lessThanOneMinuteLabel=d.lessThanOneMinute;f.loadScript("cssNamespace.pkportal.docfinder.main.initComponent",a.googleMapsUrl)},initComponent:function(){c.initNiceInputs();b.init("#docfinder_doctorsListTable");k.initDefaults();k.enableFormValidation({submitHandler:X,rules:{doctorName:{required:{depends:m}},address:{required:{depends:m}}},messages:{doctorName:jQuery.validator.messages.atLeastOneInputIsNeeded||cssNamespace.pkportal.validation.genericValidationMessage,
address:jQuery.validator.messages.atLeastOneInputIsNeeded||cssNamespace.pkportal.validation.genericValidationMessage},highlight:function(b,c,d){a("label",a(".doctorNameAndPatientAddress")).addClass(c);a("input",a(".doctorNameAndPatientAddress")).addClass(c)},unhighlight:function(b,c,d){a("label",a(".doctorNameAndPatientAddress")).removeClass(c);a("input",a(".doctorNameAndPatientAddress")).removeClass(c)},errorPlacement:function(b,c){c=a(c).parents(".doctorNameAndPatientAddress").find(".validationMessage");
c.empty();b.appendTo(c)}});g.init(z.markerIconPaths);h.doPost({url:z.getSearchTypeUrl,success:n});L();a(".docfinderContainer").on("click",".selectDoctor",V);K();a(".docfinderContainer").on("click",".showDoctorDetails",T);P()}}}(jQuery,moment,cssNamespace.pkportal.filter,cssNamespace.pkportal.utils,cssNamespace.pkportal.filterResultsTable,cssNamespace.pkportal.initcheckandradiobuttons,cssNamespace.pkportal.googleMaps,cssNamespace.pkportal.geocodeHelper,cssNamespace.pkportal.docfinder.map,cssNamespace.pkportal.docfinder.tableSorter);
cssNamespace.pkportal.passwordReset1=function(a,e){return{init:function(a,h){e.init(a,h)}}}(jQuery,cssNamespace.pkportal.loginRegistrationCommon);
cssNamespace.pkportal.passwordReset2=function(a,e,k,h,d){return{init:function(c,f,l){e.overrideValidatorSettings(d.getFourFieldValidationRules());e.init(c,f);e.addBackButtonHandler();c=a("#password");f=a("#passwordRepeat");var g=c.parents(".notificationMessage ").find(".message").last();h.init(c,f,g,l);l=k.getParameterFromUrl(document.URL,"user");c=k.getParameterFromUrl(document.URL,"code");0<l.length&&0<c.length&&(a("#email").val(l),d.insertCodeBlocks(c.split("-")));d.enableInputAssistance()}}}(jQuery,
cssNamespace.pkportal.loginRegistrationCommon,cssNamespace.pkportal.utils,cssNamespace.pkportal.passwordStrength,cssNamespace.pkportal.validation.activationCode);
cssNamespace.pkportal.changepassword=function(a,e,k,h){function d(d,e){a("#changePassword_form").validate({submitHandler:c(d,e),onfocusout:!1,errorClass:"validationError",errorElement:"div",errorPlacement:function(c,b){b=a(b).parents(".labelInputContainer").first().next(".labelInputContainer").find(".message");b.empty();b.prepend(c)}})}function c(c,d){return function(g){e.doPost({beforeSend:e.disableButtons,complete:e.enableButtons,url:c,data:{oldPassword:a("#oldPassword").val(),newPassword:a("#newPassword").val(),
newPasswordRepeat:a("#newPasswordRepeat").val()},success:function(a){if(a.success)window.location.href=d;else{var b=a.title;a=a.message;h.populateSystemMessages(["undefined"!==typeof b?"undefined"!==typeof a?[b,a]:b:"undefined"!==typeof a?a:""],"systemMessageChangePassword","yellow")}}})}}return{init:function(c,e,g){d(c,e);c=a("#newPassword");e=a("#newPasswordRepeat");var b=c.parents(".notificationMessage ").find(".message").last();k.init(c,e,b,g)}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.passwordStrength,
cssNamespace.pkportal.systemMessage);
cssNamespace.pkportal.changeProfile=function(a,e){function k(d){return function(c){e.doPost({beforeSend:e.disableButtons,complete:e.enableButtons,url:d,data:{oldEmail:a("#changeprofile input[name\x3doldEmail]").val(),email:a("#changeprofile_email").val()},success:function(a){a.success?window.location.href=a.successURL:a.validationFailures&&h.showErrors(a.validationFailures)}})}}var h;return{init:function(d,c){a("#changeprofile_back").click(function(){window.history.back()});e.doPost({url:d,success:function(c){a("#changeprofile_partnernr").val(c.partnerNr);
a("#changeprofile_email").val(c.email);a("#changeprofile_email_repeat").val(c.email);a("#changeprofile input[name\x3doldEmail]").val(c.email);a("#changeprofile_partnernr").parents(".labelInputContainer").first().next(".labelInputContainer").find(".okay").show()}});h=a("#changeprofile").validate({submitHandler:k(c),onfocusout:!1,errorClass:"validationError",errorElement:"div",errorPlacement:function(c,d){d=a(d).parents(".labelInputContainer").first().next(".labelInputContainer").find(".message");d.empty();
d.prepend(c)}})}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.emailVerification=function(a,e,k,h){return{init:function(d,c){e.overrideValidatorSettings(h.getThreeFieldValidationRules());e.init(d,c);d=k.getParameterFromUrl(document.URL,"mail");c=k.getParameterFromUrl(document.URL,"code");k.isNotBlank(d)&&k.isNotBlank(c)&&(a("#email").val(d),h.insertCodeBlocks(c.split("-")),a("#emailVerificationForm").submit());h.enableInputAssistance()}}}(jQuery,cssNamespace.pkportal.loginRegistrationCommon,cssNamespace.pkportal.utils,cssNamespace.pkportal.validation.activationCode);
cssNamespace.pkportal.registrationStep1=function(a,e,k,h,d,c){function f(){a("#partnerNumberA,#partnerNumberB,#birthday,#birthmonth").on("keyup",function(b){var c=a(this).val().length===parseInt(a(this).attr("maxlength"),10);b=d.isNumericKeyCode(b.keyCode);c&&b&&a(this).nextAll("input").first().focus()})}var l=[],g=null,b=a.extend({groups:{birthdate:"birthday birthmonth birthyear",partnerNumber:"partnerNumberA partnerNumberB partnerNumberC"}},c.getThreeFieldValidationRules()),m={success:function(b){if(b.success)document.location.href=
g;else if("POPUP"===b.errorMessageHandlerType)k.open(b.popupUrl);else{var c=a(".loginRegistration form").parents(".content").find(".notificationMessage.error");c.show();c.find(".title").text(b.title);c.find(".message").text(b.message);200<a(document).scrollTop()&&a("html, body").animate({scrollTop:"200px"},1E3);a(".loginRegistration form").find(".message").empty()}}};return{init:function(c,d,k){g=d;l=k;e.overrideValidatorSettings(b);e.overrideAjaxSettings(m);e.init(c,d);e.addBackButtonHandler();c=
a(".loginRegistration form").find("#password");d=a(".loginRegistration form").find("#passwordRepeat");k=c.parents(".row").find(".message").last();h.init(c,d,k,l);f()},addReregistrationFlagAndSubmit:function(){a("input[name\x3dreRegistration]").val("true");a(".loginRegistration form button.submit").click()}}}(jQuery,cssNamespace.pkportal.loginRegistrationCommon,cssNamespace.pkportal.popup,cssNamespace.pkportal.passwordStrength,cssNamespace.pkportal.utils,cssNamespace.pkportal.validation.partnerNumber);
cssNamespace.pkportal.registrationStep1PopupAccountExistsAlready=function(a,e,k,h){function d(){a(".popupContainer .loginRegistrationPopup .button.submit").click(function(){k.close();e.addReregistrationFlagAndSubmit()});a(".popupContainer .loginRegistrationPopup .button.cancel").click(function(){k.close()});h.addBackButtonHandler()}return{init:function(){d()}}}(jQuery,cssNamespace.pkportal.registrationStep1,cssNamespace.pkportal.popup,cssNamespace.pkportal.loginRegistrationCommon);
cssNamespace.pkportal.mobileregistration=function(a,e){return{init:function(a,h){e.initWithCustomFormSelector(a,h,".mobileregistration form")}}}(jQuery,cssNamespace.pkportal.loginRegistrationCommon);cssNamespace.pkportal.teaser=cssNamespace.pkportal.teaser||{};
cssNamespace.pkportal.teaser.openAnliegen=function(a,e){function k(d){d.noData?a(".teaser.openAnliegen").hide():(0!==d.nrOpenAnliegen?(a("#openAnliegenTeaserTitle").show(),a("#zeroOpenAnliegenTeaserTitle").hide()):(a("#zeroOpenAnliegenTeaserTitle").show(),a("#openAnliegenTeaserTitle").hide()),a("#notificationAnimation").empty(),a("#notificationAnimation").data("customervalue",d.nrOpenAnliegen),a("#notificationAnimation").startNotificationAnimation(),h(),a(".teaser.openAnliegen").show())}function h(){a("#notificationAnimation").find("svg").on("click",
function(){a(".teaser.openAnliegen").find(".categoryLink").find("a")[0].click()})}return{init:function(){e.registerUpdateHandler(k)}}}(jQuery,cssNamespace.pkportal.pendingAnliegenAndLeadMessagesCounter);cssNamespace.pkportal.mobileactivation1=function(a,e){return{init:function(a,h){e.init(a,h);e.addBackButtonHandler()}}}(jQuery,cssNamespace.pkportal.loginRegistrationCommon);
cssNamespace.pkportal.mobileactivation2=function(a,e,k,h){function d(a){e.doPost({url:f});a.preventDefault()}function c(c){c.success||(a("#mtanCode").val(""),a("#mtanCode").next("div.message").children("div").remove(),a("#sendSmsAgainLink").show())}var f=null;return{init:function(e,g,b){k.overrideValidatorSettings(h.getFourFieldValidationRules());k.addAdditionalSuccessHandler(c);k.init(e,g);k.addBackButtonHandler();f=b;a("#sendSmsAgainLink").click(d);h.enableInputAssistance()}}}(jQuery,cssNamespace.pkportal.utils,
cssNamespace.pkportal.loginRegistrationCommon,cssNamespace.pkportal.validation.activationCode);
cssNamespace.pkportal.usersettings=function(a,e,k,h){function d(b,d){b.find(".button.submit").click(function(){var e={data:JSON.stringify(f(b))},g=a(this);g.parents(".greyBox").first().animatedPost({beforeSend:k.disableButtons,complete:k.enableButtons,url:d,data:e,success:function(a){if(a.success)if(g.hasClass("reload")){k.putInSessionStorage("success",a.success);a=g.hasClass("scrollToTop");var b=k.getWindowLocation().href;b=k.addParameterToUrl(b,"scrollToTop",a?"true":"false");k.windowLocationReplace(b)}else h.populateSystemMessages([a.message],
"usersettingsinfomessage","green"),c();else c()},error:c})})}function c(){var b=200;a("div#mobileNav.mobile").is(":visible")&&(b=75);a(document).scrollTop()>b&&a("html, body").animate({scrollTop:b+"px"},1E3)}function f(b){var c={};b.find("input[type\x3dradio]:checked").each(function(){c[a(this).attr("name")]=a(this).val()});return c}function l(c){var d=c.usersettings,e=c.displayPersons;b(d,"notificationAnliegenNewMessage");b(d,"notificationAnliegenStatus");b(d,"notificationMessagesNewPraemienrechnung");
b(d,"notificationMessagesNewPolice");b(d,"notificationMessagesNewOffer");b(d,"notificationMessagesNewLeistungsAbrechnung");b(d,"notificationMessagesNewEingereichteRechnung");b(d,"notificationMessagesNewLeadMessage");b(d,"portalLanguage");b(d,"onlyElectronicDocumentDispatch");"undefined"!==typeof e&&0<e.length&&(m(e),a("#displayPersons").show(),a(".greyBoxTitle.displayPersonsTitle").show());a("#usersettingsemail").text(c.email);(c=c.accountDeactivated)&&"true"===c?(a("#documentDispatchSettings .row input").prop("disabled",
!0),a("#documentDispatchSettings .buttons button").prop("disabled",!0)):(a("#documentDispatchSettings .row input").prop("disabled",!1),a("#documentDispatchSettings .buttons button").prop("disabled",!1))}function g(b){a("#usersettingsRegistrationDynamic").html(b);e.initNiceInputs(!0)}function b(b,c){a(".usersettings").find("[name\x3d"+c+"][value\x3d"+b[c]+"]").iCheck("check")}function m(b){a("#displayPersons .personsList").loadTemplate("#personListTemplate",b,{afterInsert:function(a){p(a)}});e.initNiceInputs(!0);
n()}function n(){a("#displayPersons .personsList div.row").each(function(){"true"===a(this).attr("isblacklisted")?a(this).find('input[value\x3d"true"]').iCheck("check"):a(this).find('input[value\x3d"false"]').iCheck("check")})}function p(b){function c(b,c){var e=a(b).attr(c);a(b).attr(c,e+"_"+d)}var d=b.find("input").first().attr("name");b.find("label.mobile").each(function(){c(this,"for")});b.find("input").each(function(){c(this,"id")})}var t={resultsUrl:"",savenotificationsandlanguageUrl:"",savedocumentdispatchUrl:"",
dynamicRegistrationUrl:"",savedisplaypersonsUrl:"",successMessage:""};return{init:function(b){t=b;e.initNiceInputs();a.ajax({url:t.dynamicRegistrationUrl,success:g});k.doPost({url:t.resultsUrl,success:l});d(a("#notificationsSettings, #languageSettings"),t.savenotificationsandlanguageUrl);d(a("#documentDispatchSettings"),t.savedocumentdispatchUrl);d(a("#displayPersons"),t.savedisplaypersonsUrl);k.getFromSessionStorage("success")&&(h.populateSystemMessages([t.successMessage],"usersettingsinfomessage",
"green"),k.removeFromSessionStorage("success"));"true"===k.getParameterFromUrl(k.getWindowLocation().href,"scrollToTop")&&(a(document).scrollTop(201),c())}}}(jQuery,cssNamespace.pkportal.initcheckandradiobuttons,cssNamespace.pkportal.utils,cssNamespace.pkportal.systemMessage);
cssNamespace.pkportal.accordion=function(a){function e(){var d=window.location.href.split("#")[1];return"undefined"!==typeof d&&0<a("#"+d).length?a("#"+d).closest(".togglelistitem ").prevAll(".togglelistitem").length:!1}function k(){a(window).on("hashchange",function(){var d=location.hash;0<a(d).length&&0<a(d).closest(".cssch_accordion").length&&a(d).closest(".togglelistitem ").prevAll(".togglelistitem").length!==a(d).closest(".cssch_accordion").accordion("option","active")&&0<a(d).closest(".togglelistitem ").length&&
a(d).closest(".cssch_accordion").accordion("option","active",a(d).closest(".togglelistitem ").prevAll(".togglelistitem").length)})}function h(){a(".ui-accordion").on("accordionactivate",function(d,c){null!==c.newHeader&&0<c.newHeader.length&&(d=a(c.newHeader).find("a")[0].id.replace(/^.*#/,""),0<a("#"+d).length&&(a("#"+d).attr("id",d+"-tmp").attr("name",d+"-tmp"),window.location.hash=d,a("#"+d+"-tmp").attr("id",d).attr("name",d)),a("html, body").animate({scrollTop:a(c.newHeader).offset().top},500))})}
return{init:function(){a(".cssch_accordion").accordion({header:".cssch_ak_title",heightStyle:"content",collapsible:!0,active:e(),icons:{header:"ui-icon-plus",activeHeader:"ui-icon-minus"}});k();h()}}}(jQuery);
cssNamespace.pkportal.faqsearch=function(a,e){function k(a){a=encodeURI(a);n.css("minHeight","0");m.fadeOut("fast");if(null!==g)window.clearTimeout(g),g=null;else if(2<a.length){var b=e.getLoadingAnimationBlockUiSettings();b.overlayCSS.backgroundColor="transparent";n.block(b)}2<a.length?(n.css("minHeight","50px"),g=window.setTimeout(d,800)):(n.unblock(),m.empty())}function h(b){var c=null===b||0===b.length;m.empty();if(c)n.unblock(),m.loadTemplate("#noFaqResultsTemplate"),m.fadeIn();else{var d=a('\x3cdiv class\x3d"cssch_accordion" id\x3d"faqresultswrapper"\x3e\x3c/div\x3e').appendTo(m),
e=a("#faqresultswrapper"),g=b.length;a.each(b,function(b,c){b=c.path;var f=a('\x3cdiv class\x3d"togglelistitem section"\x3e\x3c/div\x3e');f.load(b,function(){f.appendTo(e);0===--g&&(d.accordion({header:".cssch_ak_title",heightStyle:"content",collapsible:!0,icons:{header:"ui-icon-plus",activeHeader:"ui-icon-minus"}}),e.find("a").each(function(){var b=a(this).attr("id");a(this).attr("id",b+"-search")}),n.unblock(),m.slideDown())})})}}function d(){g=null;a.ajax({url:l.servletPath+l.path+"/"+l.searchTerm,
dataType:"json",cache:!1,success:h})}function c(){a("#faqsearchform").submit(function(b){k(a("#faqsearchterms").val());b.preventDefault()})}function f(){var c=a(this).val();c!==b&&(b=c,l.searchTerm=c,k(c))}var l={},g,b,m,n;return{init:function(b,d){l.servletPath=b;l.path=d;a(".faqsearch").after(a('\x3cdiv id\x3d"faqresultstage"\x3e\x3cdiv id\x3d"faqresults"\x3e\x3c/div\x3e\x3c/div\x3e'));a("#faqresults").hide();m=a("#faqresults");n=a("#faqresultstage");a("#faqsearchterms").keyup(f);c()}}}(jQuery,
cssNamespace.pkportal.animatedLoader);
cssNamespace.pkportal.personSelection=function(a,e){function k(){f.dropdownSelector.find("button").click(function(c){var b=a(".selectorList.person");c.stopPropagation();b.toggle();a("ul.selectorList.person li").one("click",function(){h({name:a(this).text(),partnerNr:a(this).attr("value"),hasLeistungsempfaengerRolle:a(this).attr("hasLeistungsempfaengerRolle")})});a("body").one("click",function(){b.hide()})})}function h(a){f.dropdownSelector.find("button .person").text(a.name);c(a)}function d(){var d=
{url:f.populateDropdownUrl,success:function(b){c(b.allPersons[0]);if(b.isSinglePerson)f.dropdownSelector.remove(),a(l).show();else{k();b=b.allPersons;var d=b[0],e=f.dropdownSelector,g=e.find("ul.selectorList.person");h(d);g.loadTemplate("#personList",b);g.find("li").first().prepend('\x3cspan class\x3d"triangle"\x3e\x3c/span\x3e');e.show()}}};a(".personselection").animatedPost(d)}function c(c){a(l).hide().text(c.name);a("[name\x3dpartnerNr]").val()!==c.partnerNr&&(a("[name\x3dpartnerNr]").val(c.partnerNr).change(),
a("[name\x3dhasLeistungsempfaengerRolle]").val(c.hasLeistungsempfaengerRolle).change())}var f={populateDropdownUrl:"",dropdownSelector:""},l="";return{init:function(a){f=a;e.editMode()||d()},enablePersonDropdown:function(){a(l).hide();f.dropdownSelector.show()},disablePersonDropdown:function(){f.dropdownSelector.hide();a(l).show()},setNameContainerSelector:function(a){l=a}}}(jQuery,cssNamespace.pkportal.context);cssNamespace.pkportal.rechnungeinsenden=cssNamespace.pkportal.rechnungeinsenden||{};
cssNamespace.pkportal.rechnungeinsenden.upload=function(a,e,k,h,d,c){function f(c){c.preventDefault();a(".fileuploadComponent .uploadErrorMessage").text("").removeClass("validationError").hide();c=a("[name\x3dpartnerNr]").val();c={url:b.submitFormUrl,data:{partnerNr:c},success:function(b){!0===b.success?(sessionStorage.setItem("newInvoiceUploaded",!0),sessionStorage.setItem("selectedUserHasLeistungsempfaengerRolle",a("[name\x3dhasLeistungsempfaengerRolle]").val()),e.windowLocationReload()):(b=b.errorMessage)&&
a(".fileuploadComponent .uploadErrorMessage").text(b).addClass("validationError").show()}};a("#rechnungEinsendenButtonBar").animatedPost(c)}function l(){k.registerHandler("fileuploadstart",function(){g().hide();a("#rechnungEinsendenButtonBar button.submit").attr("disabled","disabled")});k.registerHandler("onFirstFileAdded",function(){a("#rechnungEinsendenButtonBar").show()});k.registerHandler("onLastFileAdded",function(){a("#rechnungEinsendenButtonBar button.submit").removeAttr("disabled")});k.registerHandler("onLastFileRemoved",
function(){a("#rechnungEinsendenButtonBar").hide()});k.registerHandler("fileuploadstart",d.disablePersonDropdown);k.registerHandler("onFirstFileAdded",d.disablePersonDropdown);k.registerHandler("onLastFileRemoved",d.enablePersonDropdown);a("#rechnungEinsendenButtonBar .button.cancel").click(function(){k.removeAll(a(".fileuploadComponent"))});a("#rechnungEinsendenButtonBar").appendTo(a(".fileUploadContainer"));a(".selectorWrapper.personSelection").length&&g().css("float","left");g().on("click.rechnungeinsenden",
function(){c.removeSystemMessage("invoiceuploadinfomessage")})}function g(){return a("button.attachDocument")}var b={submitFormUrl:""};return{init:function(c){b=c;d.setNameContainerSelector("h2.person");a(".uploadErrorMessage").insertAfter(a(".fileUploadContainer"));a("form").on("submit",f);l();h.editMode()||k.init(a(".rechnungeinsenden .fileuploadComponent"))}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.fileupload,cssNamespace.pkportal.context,cssNamespace.pkportal.personSelection,
cssNamespace.pkportal.systemMessage);cssNamespace.pkportal.rechnungeinsenden=cssNamespace.pkportal.rechnungeinsenden||{};
cssNamespace.pkportal.rechnungeinsenden.rechnungstabelle=function(a,e,k,h){function d(){a(".rechnungstabelleTable td.documentId").each(function(){var b=a(this).attr("showTooltip");if(b&&0<b.length){var c=a.trim(a(".generalTable").data((b+"text").toLowerCase()));b&&c&&c.length&&(b=a('\x3cdiv class\x3d"tooltipText"\x3e\x3ca class\x3d"hasTooltip '+b+'"\x3e\x3c/a\x3e\x3cdiv class\x3d"tooltipContent"\x3e\x3cp\x3e'+c+"\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e"),a(this).append(b))}else 0<a(this).find("a").length&&
(b=a('\x3cspan class\x3d"image pdfDownload"\x3e\x3c/span\x3e'),a(this).find("a").append(b))});1<a(".rechnungstabelle tbody tr td").length&&a(".rechnungstabelle").addClass("active");sessionStorage.getItem("newInvoiceUploaded")&&(sessionStorage.removeItem("newInvoiceUploaded"),"true"===sessionStorage.getItem("selectedUserHasLeistungsempfaengerRolle")?h.populateSystemMessages([l],"invoiceuploadinfomessage","green"):h.populateSystemMessages([g],"invoiceuploadinfomessagepermissionhint","yellow"),sessionStorage.removeItem("selectedUserHasLeistungsempfaengerRolle"),
a("html, body").delay(1E3).animate({scrollTop:a(".rechnungstabelleTitleWrapper").offset().top},1E3))}function c(){a("button.scrollTop").click(function(){var b=200;a("div#mobileNav.mobile").is(":visible")&&(b=75);a(document).scrollTop()>b&&a("html, body").animate({scrollTop:b+"px"},1E3)})}var f={},l="",g="";return{initializeComponent:function(b){l=a.trim(a(".rechnungstabelleTitleWrapper .successMessage").html());g=a.trim(a(".rechnungstabelleTitleWrapper .successMessagePermissionHint").html());f.resetFiltersUrl=
b.resetFiltersUrlParam;f.applyFiltersUrl=b.applyFiltersUrlParam;f.currentResultsUrl=b.resultsUrl;f.sortUrl=b.setSortUrl;f.documentDownloadUrl=b.documentDownloadUrl;f.filterStateUrl=b.filterStateUrl;f.allLeistungserbringerLabel=b.allLeistungserbringerLabel;f.allStatusesLabel=b.allStatusesLabel;f.detailsUrl=b.detailsUrl;f.tableTemplate="#rechnungstabelleTableTemplate";f.updateResultViewCallback=d;e.init(".rechnungstabelleTable",f);c()}}}(jQuery,cssNamespace.pkportal.filterResultsTable,cssNamespace.tracking,
cssNamespace.pkportal.systemMessage);
cssNamespace.pkportal.taxstatementDownload=function(a,e,k){function h(b){a("#currentTaxStatements").empty();a("#previousTaxStatements").empty();a(".taxStatementContainer .noResultsContainer").hide();a("button#toggleButton").hide();a("#previousTaxStatements").is(":visible")&&a("button#toggleButton").click();b.taxStatements.hasTaxStatements?(g.currentTaxStatementsContainter.loadTemplate(g.taxStatementsTemplate,b.taxStatements.currentDocuments),b.taxStatements.hasPreviousTaxStatements&&(g.previousTaxStatementsContainter.loadTemplate(g.taxStatementsTemplate,
b.taxStatements.previousDocuments),a("button#toggleButton").show(),d()),a("li.taxStatementLink a").on("click",function(){cssNamespace.tracking.trackCustomDownloadWithCategory(s,this,a(this).attr("href"),"Steuerausweis")}),a(".section .taxStatementContainer").show()):a(".taxStatementContainer .noResultsContainer").show()}function d(){var b=a("button#toggleButton").find(".text");a("button#toggleButton").unbind("click");a("button#toggleButton").bind("click",function(){a("button#toggleButton .image").toggleClass("minus");
a("button#toggleButton .image").toggleClass("plusSmall");a.trim(b.text())===c()?b.text(a.trim(a("button#toggleButton .text").data("hidepreviouslabel"))):b.text(c());a("#previousTaxStatements").slideToggle()})}function c(){return a.trim(a("button#toggleButton .text").data("showpreviouslabel"))}function f(){a.addTemplateFormatter({upperCaseFormatter:function(a,c){return a.toUpperCase()}})}function l(){a("[name\x3dpartnerNr]").change(function(){var b={url:g.getTaxStatementsUrl,data:{partnerNr:a("[name\x3dpartnerNr]").val()},
success:h};e.doPost(b)})}var g={getTaxStatementsUrl:"",taxStatementsContainer:"",currentTaxStatementsContainter:"",previousTaxStatementsContainter:"",taxStatementsContainerTemplate:"",taxStatementsTemplate:""};return{init:function(a){g=a;k.setNameContainerSelector("h2.person");l();f()}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.personSelection);
cssNamespace.pkportal.policyteasercontainer=function(a,e){function k(e){e.showFuturePolicy?a(".policyTeaser.futurePolicy").show():a(".policyTeaser.futurePolicy").hide();e.showLeistungsCheck?a(".policyTeaser.leistungscheck").show():a(".policyTeaser.leistungscheck").hide()}return{init:function(a){e.doPost({url:a,success:k})}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.leadmessages=function(a,e,k,h,d,c){function f(b){a(".mitteilungenTable tbody").loadTemplate("#mitteilungenTableTemplate",b);a(".mitteilungenTable td.documentId a").each(function(){var b=a('\x3cspan class\x3d"image pdfDownload"\x3e\x3c/span\x3e');a(this).append(b)})}function l(){a(".mitteilungenTable").on("click","tr:not(:has(.noResults),.openedMessage,.tableHeader)",function(){function c(){if(f.is(".newMessage")){var c=f.attr("id");e.doPost({url:b.makeMessageReadUrl,data:{leadKey:c},
success:function(){f.removeClass("newMessage");d.update();cssNamespace.tracking.trackCustomLinkAction("pkPortal","Mitteilungen","read",a("td:first-child",f).text())}})}}function g(a){var c=f.attr("id");e.doPost({url:b.changeMessageStateUrl,data:{leadKey:c,isOpen:a}})}var f=a(this),h=f.next();(function(){h.is(":visible")?(f.removeClass("active"),h.find("td \x3e div").slideUp({complete:function(){h.hide()}}),g(!1)):(f.addClass("active"),h.show({duration:0,complete:function(){h.find("td \x3e div").slideDown(function(){c()})}}),
g(!0))})()})}function g(){a(".mitteilungenTable").on("click",".pran-link",function(){var b=a(this).closest(".richTextContent").attr("personId"),d=a(this);cssNamespace.tracking.trackCustomLinkAction("pkPortal","PRAN-Mitteilungen","click",d.text());c.updateFamilyView(b).done(function(){var a=d.attr("href");e.windowLocationHref(a)});return!1})}var b={};a.addTemplateFormatter("cssNamespace.pkportal.leadmessages.mitteilungenUnreadFormatter",function(a,b){return!0===a?"newMessage":""});a.addTemplateFormatter("cssNamespace.pkportal.leadmessages.mitteilungenPdfButtonFormatter",
function(b,c){c=a(this).attr("class");return e.isBlank(b)?c+" noButton":c});a.addTemplateFormatter("cssNamespace.pkportal.leadmessages.mitteilungenOpenedMessageFormatter",function(b,c){return!0===b?a(this).attr("class")+" initialShow":a(this).attr("class")});return{initializeComponent:function(c,d,e,f,k,u){b.resetFiltersUrl=c;b.applyFiltersUrl=d;b.currentResultsUrl=e;b.filterStateUrl=f;b.makeMessageReadUrl=k;b.changeMessageStateUrl=u;b.tableTemplate="#mitteilungenTableTemplate";b.formSelector="#mitteilungenFiltersForm";
b.additionalFilterValues={subject:a("#mitteilungenFiltersForm [name\x3dsubject]").val()};h.init(".mitteilungenTable",b);l();g()},initializePreview:function(b){a(".mitteilungenTable thead").hide();cssNamespace.pkportal.utils.doPost({url:b,success:f})}}}(jQuery,cssNamespace.pkportal.utils,cssNamespace.pkportal.print,cssNamespace.pkportal.filterResultsTable,cssNamespace.pkportal.pendingAnliegenAndLeadMessagesCounter,cssNamespace.pkportal.familyview);
cssNamespace.pkportal.advertisingbanner=function(a,e){function k(a){a.hasData?h(a):f()}function h(c){a(".bannerAd").each(function(){var b=a(this);if(b.hasClass("bottom"))var d=c.horizontal;else b.hasClass("right")&&(d=c.vertical);e.isBlank(d.landingPageUrl)?b.loadTemplate("#bannerAdNoLink",d):b.loadTemplate("#bannerAdTemplate",d);b.hasClass("bottom")&&(d=new CustomEvent("event-impression-trigger",{detail:{eventCategory:"banner",eventAction:"impression",eventLabel:c.horizontal.alt||"unknown"}}),document.body.dispatchEvent(d))});
d(c);a(".bannerAd").removeClass("hidden")}function d(d){a(".bannerAd a").click(function(a){d.doMarkAsClicked&&c.apply(this,[d,a])})}function c(c,b){c={url:l.markBannerAsClickedUrl,data:{partnerNumber:c.partnerID,leadKey:c.leadKey}};var d="_blank"===a(this).attr("target"),f=a(this).attr("href");b.preventDefault();d?(e.doPost(c),window.open(f)):(a.extend(c,{complete:function(){location.href=f}}),e.doPost(c))}function f(){a(".bannerAd").addClass("hidden")}var l={};a.addTemplateFormatter("cssNamespace.pkportal.advertisingbanner.hrefFormatter",
function(a,b){return e.isBlank(a)?"#":a.match(/^[a-zA-Z]+:\/\//)?a:a+".html"});a.addTemplateFormatter("cssNamespace.pkportal.advertisingbanner.targetFormmater",function(a,b){return!0===a?"_blank":""});return{init:function(a,b,c){l.getBannerUrl=a;l.markBannerAsClickedUrl=b;f();"true"===c&&e.doPost({url:l.getBannerUrl,success:k,error:f})}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.individualmessagetool=function(a,e){function k(){a("button.saveIndividualMessage").click(function(){e.doPost({url:d.saveIndividualMessageUrl,success:h})})}function h(c){c.valid?(a(".successMessage").text(c.message),a(".successMessage").show(),a("button.saveIndividualMessage").hide()):(a(".validationError").text(c.message),a(".successMessage").hide(),a("button.saveIndividualMessage").show())}var d={};return{init:function(a){d.saveIndividualMessageUrl=a;k()}}}(jQuery,cssNamespace.pkportal.utils);
cssNamespace.pkportal.deactivateAccount=function(a,e){function k(d){var e={url:c.submitUrl,data:{accountDisabled:!0,ls_text:a(d).find("textarea").val()},success:function(d){d.errorMessage?(d=d.errorMessage,a("#deactivateAccountReasonContainer .message").text(d).addClass("validationError").show()):window.location.href=c.successUrl}};a("#deactivateAccountReasonContainer .message").removeClass("validationError").hide();a(d).animatedPost(e)}function h(c){a(c).validate(a.extend(e.formSettings,{onkeyup:function(a,
c){0>[9,8,46].indexOf(c.which)&&this.element(a)},submitHandler:k}));e.preventFormSubmissionOnEnter(a(c))}function d(){a("#cancelDeactivateAccount").click(function(){window.history.back()})}var c={};return{init:function(a){d();h(a)},setParameters:function(a,d){c={submitUrl:a,successUrl:d}}}}(jQuery,cssNamespace.pkportal.validation);
(function(){jQuery.validator.methods.date=function(a,e){return this.optional(e)||a.match(cssNamespace.pkportal.validation.methodsDate)};jQuery.validator.addMethod("cssCharset",function(a,e){return this.optional(e)||a.match(cssNamespace.pkportal.validation.methodsCssCharset)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("secureCharacters",function(a,e){return this.optional(e)||!a.match(cssNamespace.pkportal.validation.methodsSecureCharacters)},
function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("regex",function(a,e,k){return this.optional(e)||k.test(a)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("zipInternational",function(a,e){return this.optional(e)||jQuery.validator.methods.range.call(this,a,e,[1E3,999999])},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("fromAmountGreaterThanToAmountValidator",
function(a,e){return this.optional(e)||cssNamespace.pkportal.filterValidationRules.fromAmountGreaterThanToAmountValidator(a,e)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("fromDateGreaterThanToDateValidator",function(a,e){return this.optional(e)||cssNamespace.pkportal.filterValidationRules.fromDateGreaterThanToDateValidator(a,e)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("alphanumericWithWildcards",
function(a,e){return this.optional(e)||cssNamespace.pkportal.validation.methodsAlphanumericWithWildcards.test(a)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("iban",function(a,e){a=a.replace(/ /g,"");var k=/^[a-zA-Z]{2}[0-9]{5}[a-zA-Z0-9]{0,25}$/;return this.optional(e)||k.test(a)&&IBAN.isValid(a)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("day",function(a,e){return this.optional(e)||
jQuery.validator.methods.range.call(this,a,e,[1,31])},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("month",function(a,e){return this.optional(e)||jQuery.validator.methods.range.call(this,a,e,[1,12])},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("birthYear",function(a,e){return this.optional(e)||jQuery.validator.methods.range.call(this,a,e,[1900,cssNamespace.pkportal.validation.constants.currentYear])},
function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("passwordProfile",function(a,e){return this.optional(e)||cssNamespace.pkportal.validation.isValidPasswordProfile(a)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("partnerNumber",function(a,e){return this.optional(e)||cssNamespace.pkportal.validation.partnerNumber.threeFieldsPartnerNumberValidator(a)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});
jQuery.validator.addMethod("medusaPhoneNumberRemote",function(a,e){return this.optional(e)||cssNamespace.pkportal.validation.medusaPhoneNumberRemoteValidator(a)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("phoneBasic",function(a,e){return this.optional(e)||a.match(cssNamespace.pkportal.validation.methodsPhoneBasic)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("activationCode",
function(a,e,k){return this.optional(e)||cssNamespace.pkportal.validation.activationCode.multiFieldActivationCodeValidator(a,k)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("currentInsuranceCompany",function(a,e){return this.optional(e)||jQuery.validator.methods.range.call(this,a,e,[1,2E5])},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("passwordRepeat",function(a,e){return this.optional(e)||
a===$(".password").val()},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("email",function(a,e){return this.optional(e)||a.match(cssNamespace.pkportal.validation.methodsEmail)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("emailRepeat",function(a,e){return this.optional(e)||a===$(".email").val()},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("requiredAGB",
function(a,e){return $(e).is(":checked")},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addMethod("activationCodeBlock",function(a,e){return this.optional(e)||cssNamespace.pkportal.validation.activationCode.activationCodeBlockMatcher(a)},function(){return cssNamespace.pkportal.validation.genericValidationMessage});jQuery.validator.addClassRules("3digits",{cssCharset:!0,secureCharacters:!0,number:!0,maxlength:3,minlength:3});jQuery.validator.addClassRules("2digits",
{cssCharset:!0,secureCharacters:!0,number:!0,maxlength:2,minlength:2})})();
cssNamespace.pkportal.mobileNav=function(a,e){function k(){a("A.toggleNav").on("click",function(){a("BODY").hasClass("openNav")?a("BODY").removeClass("openNav"):(a("BODY").addClass("openNav"),0===a("DIV.openNavContentWrap").length&&a("DIV#container").append('\x3cdiv class\x3d"openNavContentWrap"\x3e\x3c/div\x3e'))});a("DIV#container").on("click","DIV.openNavContentWrap",function(){a("BODY").removeClass("openNav")})}function h(){a('.mobilenavigation a[href^\x3d"#"]').click(function(){a("A.toggleNav").trigger("click")})}return{init:function(){var d=
e.getWindowLocation();/mystep/.test(d.href)||a('a[href*\x3d"mystep"]').next(".submenu").find("li").hide();k();a("DIV#mobileNav UL.topLevelNav + UL \x3e LI:first-child A").appendTo("DIV#mobileNav UL LI.home");a("DIV#mobileNav UL LI.home A SPAN.home").remove();a("DIV#mobileNav UL LI.home SPAN.icon").prependTo("DIV#mobileNav UL LI.home A");a("DIV.indentHeader \x3e A.button.header").clone().appendTo("DIV#mobileNav UL LI.rechnungEinsenden");a("DIV#mobileNav UL LI.rechnungEinsenden A SPAN.image").remove();
a("DIV#mobileNav UL LI.rechnungEinsenden A").attr("class","");a("DIV#mobileNav UL LI.rechnungEinsenden SPAN.icon").prependTo("DIV#mobileNav UL LI.rechnungEinsenden A");a("DIV.indentHeader \x3e A.neuesAnliegen").appendTo("DIV#mobileNav UL LI.neuesAnliegen");a("DIV#mobileNav UL LI.neuesAnliegen A").attr("class","");a("DIV#mobileNav UL LI.neuesAnliegen SPAN.icon").prependTo("DIV#mobileNav UL LI.neuesAnliegen A");d=a("#headerPersonButton \x3e ul.selectorList li  a");for(var c=0;c<d.length;c++)if(-1<a(d[c]).attr("href").indexOf("einstellungen.html")){a(d[c]).clone().appendTo("DIV#mobileNav UL LI.settings");
a("DIV#mobileNav UL LI.settings A").attr("class","");a("DIV#mobileNav UL LI.settings SPAN.icon").prependTo("DIV#mobileNav UL LI.settings A");break}a("DIV.indentHeader A.logout").clone().appendTo("DIV#mobileNav UL LI.logout");a("DIV#mobileNav UL LI.logout SPAN.icon").prependTo("DIV#mobileNav UL LI.logout A");h()}}}(jQuery,cssNamespace.pkportal.utils);